!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var n in i)("object"==typeof exports?exports:e)[n]=i[n]}}(window,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=20)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=i(3),r=i(4),o=i(23),l=i(25),a=i(26),d=i(30),u=i(7),c=i(31),h=i(32),p=i(33),m=i(10),g=i(34),f=i(35),b=i(13),E=function(){};t.EBX_Table_Config=E;var C=function(){this.buttonOpenRegister=[],this.buttonFirstRegister=[],this.buttonPreviousRegister=[],this.buttonNextRegister=[],this.buttonLastRegister=[],this.tableByToolbar={},this.toolbarsByTable={},this.pageReportRegister=[],this.selectReportRegister=[]},_=function(){function e(){this.external=new S,this.update=new b.Table_PartsContainer}return e.prototype.isEmpty=function(){return!this.hasUpdatePart()&&!this.hasCreatePart()},e.prototype.hasUpdatePart=function(){return 0!==this.update.getNumberOfRowsDisplayed()},e.prototype.hasCreatePart=function(){return void 0!==this.create},e}(),S=function(){},v=function(){},y=function(){function e(e){this.tdElement=e,this.tableLZ=null,this.isPlacedInFixedContainerLZ=null,this.isPlacedInTheCreatePartLZ=null}return e.prototype.getTable=function(){return null===this.tableLZ&&(this.tableLZ=this.tdElement.parentElement.parentElement.parentElement),this.tableLZ},e.prototype.isPlacedInFixedContainer=function(){return null===this.isPlacedInFixedContainerLZ&&(this.isPlacedInFixedContainerLZ=EBX_Utils.matchCSSClass(this.getTable(),b.Table_PartsContainer.FIXED_TABLE_CSS_CLASS)),this.isPlacedInFixedContainerLZ},e.prototype.isPlacedInTheCreatePart=function(){return null===this.isPlacedInTheCreatePartLZ&&(this.isPlacedInTheCreatePartLZ=EBX_Utils.matchCSSClass(this.getTable().parentElement.parentElement.parentElement,b.Table_Element_Create.WRAPPER_CSS_CLASS)),this.isPlacedInTheCreatePartLZ},e}();t.Cell=y;var B=function(){function e(e){this.className=e}return e.NORMAL=new e("ebx_tvStateNormal"),e.DRAWING=new e("ebx_tvAlmostReady"),e.EMPTY=new e("ebx_tvStateEmpty"),e.CANCELLED=new e("ebx_tvStateCancelled"),e.ERROR=new e("ebx_tvStateError"),e.LOADING=new e("ebx_tvStateLoading"),e.LOADING_LONG=new e("ebx_tvStateLoadingLong"),e.LOGOUT=new e("ebx_tvStateLogout"),e.FORBIDDEN=new e("ebx_tvStateForbidden"),e}();t.EBX_Table_State=B;var x=function(){function e(e,t,i,n){var s=this;this.element=new _,this.tooltipHolder=new EBX_Utils.TooltipHolder,this.scroll=new g.Scroll(this),this.isTableReady=!1,this.dataSource=new v,this.currentTdMouseOver=null,this.showCancelHintTooltips=function(){s.tooltipHolder.showAll(EBX_Utils.cancel_delayBeforeTooltipsDisappear)},this.hideCancelHintTooltips=function(){s.tooltipHolder.hideAll()},this.tableName=e,this.sncParameter=t,this.containerId=e+"_container",this.fixedScrollerWrapperId=e+"_fixedScrollerWrapper",this.fixedScrollerId=e+"_fixedScroller",this.mainScrollerId=e+"_mainScroller",this.selectAndSortMenuButtonId=e+"_selectAndSortMenuButton",this.isRecordSelectionEnabled=n.isRecordSelectionEnabled,this.isOpenRecordEnabled=n.isOpenRecordEnabled,this.isOpenRecordSimpleClick=n.isOpenRecordSimpleClick,this.isWorkspaceTable=n.isWorkspaceTable,this.isDisplayingAdvancedSort=n.isDisplayingAdvancedSort,this.containerCSSClasses=n.containerCSSClasses,this.isOpenInPopup=n.isOpenInPopup,this.openInPopupURL=n.openInPopupURL,this.isEditionMode=n.isEditionMode,this.isInitialQueryEnabled=n.isInitialQueryEnabled,this.state=B.LOADING,this.element.update.clearRowsProperties(),this.isTableInit=!1,this.functionsToCallWhenTableIsInit=[],this.isTableReady=!1,this.functionsToCallWhenTableIsReady=[],this.copyModule=new l.GridEdit_CopyModule(this),this.pagination=new p.Pagination(this),this.resizeModule=new m.Resize(this),this.header=new c.Header(this,i,e,n.isSelectColumnEnabled),this.content=new o.Content(this),this.selection=new f.Table_Selection(this),this.grid_selection=new d.GridEdit_Selection(this),this.navigation=new h.NavigationRouter(this,this.selection,this.grid_selection),this.gridEditModule=new a.GridEdit(this)}return e.prototype.init=function(){e.initBrowsersGaps(),this.content.init(),this.isWorkspaceTable?YAHOO.util.Event.onContentReady(this.containerId,this.initDisplay,this,!0):EBX_Form.launchCmdWhenAllParentHidingContainersAreVisible(document.getElementById(this.containerId),'EBX_AjaxTable.initDisplay("'+this.tableName+'")'),this.selection.init(),this.dataSource.setColumnWidth=new YAHOO.util.XHRDataSource(e.constants.setColumnWidthRequest),this.dataSource.initAllColumnWidths=new YAHOO.util.XHRDataSource(e.constants.initAllColumnWidthsRequest),this.isEditionMode&&this.gridEditModule.init(),this.pagination.init(),this.grid_selection.init(),this.copyModule.init()},e.prototype.initDisplay=function(){this.isInitialQueryEnabled?(this.isTableReady=!1,this.setState(B.LOADING)):this.setState(B.CANCELLED),this.isInitialQueryEnabled&&this.content.refreshCurrentPage(),this.scroll.init(),this.initContainer(),this.initInternalElements(),this.initPluggedComponents(),this.initColumns(),this.initTablesStructures(),this.resizeModule.resizeContainers(),this.addListeners(),this.endTableInit(),this.isInitialQueryEnabled||(this.isTableReady=!0,this.onTableIsReady(),this.showCancelHintTooltips())},e.prototype.initContainer=function(){this.element.container=document.getElementById(this.containerId),this.resizeModule.initContainer()},e.prototype.initInternalElements=function(){this.header.initInternalElements(),this.element.update.fixed.scrollWrapper=document.getElementById(this.fixedScrollerWrapperId),this.element.update.fixed.scroll=document.getElementById(this.fixedScrollerId),this.element.update.main.scroll=document.getElementById(this.mainScrollerId);var t=document.getElementById("ebx_WorkspaceAdvancedSearch");this.element.selectAndSortMenuButton=document.getElementById(this.selectAndSortMenuButtonId),this.isDisplayingAdvancedSort&&this.tooltipHolder.addTooltip(this.element.selectAndSortMenuButton,{text:e.messages.table_sort_cancelTooltip,position:"top"},(function(e){return EBX_Utils.addCSSClass(e,"ebx_tvSelectAndSortMenuButton_highlightable"),EBX_Utils.addCSSClass(e,"ebx_tvSelectAndSortMenuButton_highlighted"),!0}),(function(e){return EBX_Utils.removeCSSClass(e,"ebx_tvSelectAndSortMenuButton_highlighted"),setTimeout((function(){EBX_Utils.removeCSSClass(e,"ebx_tvSelectAndSortMenuButton_highlightable")}),200),!0})),this.tooltipHolder.addTooltip(document.getElementById("ebx_AdvancedSearchQuickSearch"),{text:e.messages.table_quickSearch_cancelTooltip,position:"bottom"},(function(e){return(null==t||!EBX_Utils.matchCSSClass(t,"ebx_AdvancedSearchPaneOpened"))&&(e.focus(),!0)}));var i=document.getElementById("ebx_AdvancedSearchExpandCollapse");null!=i&&(this.tooltipHolder.addTooltip(i,{text:e.messages.table_advancedSearch_cancelTooltip,position:"bottom"},(function(){return null!=t&&!EBX_Utils.matchCSSClass(t,"ebx_AdvancedSearchPaneOpened")})),i.addEventListener("click",this.hideCancelHintTooltips)),this.element.messageContainer=EBX_Utils.getFirstDirectChildMatchingCSSClass(this.element.container,"ebx_tvMessageContainer"),this.element.messageEmpty=EBX_Utils.getFirstDirectChildMatchingCSSClass(this.element.container,"ebx_tvMessageEmpty"),this.isEditionMode&&this.gridEditModule.initInternalElements()},e.prototype.initPluggedComponents=function(){this.selection.registerPluggedComponents(),this.pagination.registerPluggedComponents()},e.prototype.initColumns=function(){this.header.initColumns(),-1===this.resizeModule.size.fixedColumnsWidth?this.element.update.fixed.scrollWrapper.style.width="0":this.element.update.fixed.scrollWrapper.style.width=this.resizeModule.size.fixedColumnsWidth+"px",this.element.update.fixed.scroll.style.width=this.resizeModule.size.fixedColumnsWidth+50+"px",this.element.update.main.scroll.style.width=this.resizeModule.size.containerWidth-this.resizeModule.size.fixedColumnsWidth+"px",this.scroll.refreshScrollUpdateHeight(this.resizeModule.size)},e.prototype.initTablesStructures=function(){this.element.update.fixed.table=document.createElement("table"),this.element.update.fixed.table.className=b.Table_PartsContainer.FIXED_TABLE_CSS_CLASS,this.element.update.fixed.table.appendChild(document.createElement("tbody")),this.element.update.fixed.scroll.appendChild(this.element.update.fixed.table),this.element.update.fixed.scrollMaker=document.createElement("div"),this.element.update.fixed.scrollMaker.className="ebx_tvScrollMaker",this.element.update.fixed.scroll.appendChild(this.element.update.fixed.scrollMaker),this.element.update.main.table=document.createElement("table"),this.element.update.main.table.className=b.Table_PartsContainer.MAIN_TABLE_CSS_CLASS,this.element.update.main.table.appendChild(document.createElement("tbody")),this.element.update.main.scroll.appendChild(this.element.update.main.table),this.element.update.main.scrollMaker=document.createElement("div"),this.element.update.main.scrollMaker.className="ebx_tvScrollMaker",this.element.update.main.scroll.appendChild(this.element.update.main.scrollMaker)},e.prototype.addListeners=function(){this.resizeModule.addListeners(),this.header.addListeners(),this.content.addListeners(this.element.container),this.scroll.addListenerTo(this.element.update),this.navigation.addListeners(this.element.update),this.isEditionMode&&this.gridEditModule.addListeners(),this.isDisplayingAdvancedSort&&this.element.selectAndSortMenuButton.addEventListener("click",this.hideCancelHintTooltips)},e.prototype.endTableInit=function(){for(var e;this.functionsToCallWhenTableIsInit.length>0;)(e=this.functionsToCallWhenTableIsInit.shift()).fn.call(e.scope,e.arg);this.isTableInit=!0},e.prototype.callFunctionWhenTableIsInit=function(e,t,i){void 0===i&&(i=this),this.isTableInit?e.call(i,t):this.functionsToCallWhenTableIsInit.push({fn:e,arg:t,scope:i})},e.prototype.callFunctionWhenTableIsReady=function(e,t,i){void 0===i&&(i=this),this.isTableReady?e.call(i,t):this.functionsToCallWhenTableIsReady.push({fn:e,arg:t,scope:i})},e.prototype.setState=function(e){this.state=e,this.refreshContainerCSSClasses()},e.prototype.getState=function(){return this.state},e.prototype.refreshContainerCSSClasses=function(){if(void 0!==this.element.container){var e=[];this.element.hasUpdatePart()||e.push("ebx_tvEmptyUpdatePart"),this.scroll.refreshContainerCSSClasses(e),0!==this.resizeModule.size.fixedColumnsWidth&&-1!==this.resizeModule.size.fixedColumnsWidth||e.push("ebx_tvContainerNoFixedColumn"),this.resizeModule.refreshContainerCSSClasses(e),e.push(this.state.className),this.state!==B.NORMAL||this.isTableReady||e.push(B.DRAWING.className),this.element.container.className=this.containerCSSClasses+" "+e.join(" ")}},e.prototype.dblclickOnTableListener=function(e,t){this.isEditionMode&&this.gridEditModule.editCellFromEvent(e,t)},e.prototype.mouseoverTableListener=function(e,t){!this.isEditionMode||EBX_Utils.matchCSSClass(EBX_Utils.getTargetElement(e),u.SelectionRangeMask.CSS_MASK)||this.gridEditModule.displaySeverityMessagePanel(EBX_Utils.getTargetElement(e),t)},e.prototype.mouseoutTableListener=function(e,t){if(this.isEditionMode){var i=this,n=EBX_Utils.getTargetElement(e);this.currentTdMouseOver_HideTimeout=window.setTimeout((function(){i.gridEditModule.hideSeverityMessagePanel(n,t)}),50)}else;},e.prototype.focusCellFromEvent=function(t,i,n){var s=2===n.detail;if(YAHOO.util.Event.stopEvent(n),"tbody"!==t.tagName.toLowerCase()&&"tr"!==t.tagName.toLowerCase()){var r=e.getParentTdElement(t,i);this.grid_selection.focusCell(new y(r))}else s&&null!==this.grid_selection.currentTdFocused&&this.gridEditModule.editCurrentCellFocus()},e.prototype.getTdElFromPath=function(e){var t=this.gridEditModule.widgetsByPath[e];if(void 0===t)return null;var i=t.gridCoords.colIndex;i++;var n=0;this.header.isSeverityColumnDisplayed&&(n=1);var s,r=n+this.gridEditModule.fixedColumnsWidgetIndexOffset+i;return r-n<this.gridEditModule.mainColumnsWidgetIndexOffset?(s=t.isForCreate?this.element.create.fixed.table:this.element.update.fixed.table,r++):(s=t.isForCreate?this.element.create.main.table:this.element.update.main.table,r-=this.gridEditModule.mainColumnsWidgetIndexOffset+n),s.rows[t.gridCoords.lineIndex].cells[r]},e.prototype.notifyWidgetIsLoaded=function(){null!==this.gridEditModule.onWidgetLoadedHandler&&this.gridEditModule.onWidgetLoadedHandler()},e.prototype.findFirstElementFocusableIn=function(e){if(null===e)return null;var t=!0;if("INPUT"!==e.tagName&&"BUTTON"!==e.tagName&&(t=!1),t&&EBX_Utils.matchCSSClass(e,"ebx_focusCatcher")&&(t=!1),t&&e.offsetWidth<=0&&(t=!1),t&&e.disabled&&(t=!1),t&&-1===e.tabIndex&&(t=!1),t)return e;for(var i=e.childNodes,n=i.length,s=0;!t&&s<n;)t=this.findFirstElementFocusableIn(i[s]),s++;return t},e.prototype.getCurrentCellFocused=function(){return null===this.grid_selection.currentTdFocused?null:new y(this.grid_selection.currentTdFocused)},e.prototype.notifyCreatedRecordIsFullyLoaded=function(e,t,i){EBX_FormPresenter.receive(t),this.gridEditModule.receiveAPVResponse("create",null,t),null===i||this.gridEditModule.currentWidgetEdited||this.gridEditModule.requestEditCell(new y(this.getTdElFromPath(i)))},e.prototype.triggerRefresh=function(){EBX_Events.trigger(this,e.events.refresh)},e.prototype.triggerSelectionChange=function(){EBX_Events.trigger(this,e.events.selectionChange)},e.prototype.isForCreate=function(e){return void 0!==this.element.create&&(e===this.element.create.fixed.table||e===this.element.create.main.table)},e.prototype.isInAFixedContainer=function(e){return e===this.element.update.fixed.table||this.element.hasCreatePart()&&e===this.element.create.fixed.table},e.prototype.getCellAt=function(e,t){var i,n=t<this.gridEditModule.mainColumnsWidgetIndexOffset,s=this.element.hasCreatePart()&&e<this.element.create.getNumberOfRowsDisplayed(),r=0;if(this.header.isSeverityColumnDisplayed&&r--,s)i=n?this.element.create.fixed.table.rows[e].cells[t-this.gridEditModule.fixedColumnsWidgetIndexOffset-r]:this.element.create.main.table.rows[e].cells[t-this.gridEditModule.mainColumnsWidgetIndexOffset];else{var o=0;this.element.hasCreatePart()&&(o=this.element.create.getNumberOfRowsDisplayed()),i=n?this.element.update.fixed.table.rows[e-o].cells[t-this.gridEditModule.fixedColumnsWidgetIndexOffset-r]:this.element.update.main.table.rows[e-o].cells[t-this.gridEditModule.mainColumnsWidgetIndexOffset]}return new y(i)},e.prototype.resetContent=function(){this.selection.reset(),this.element.update.clearRowsProperties(),this.pagination.updatePageReport(),this.pagination.updateButtonsState(),this.header.updateSortFlags(),this.header.updateSeverityColumn(),this.element.isEmpty()&&(this.isTableReady=!0,this.setState(B.EMPTY)),this.triggerRefresh()},e.prototype.refreshCellIndexes=function(){this.element.hasCreatePart()?(this.lastFixedCellIndex=this.element.create.fixed.table.rows.item(0).cells.length-1,this.lastMainCellIndex=this.element.create.main.table.rows.item(0).cells.length-1):this.element.hasUpdatePart()?(this.lastFixedCellIndex=this.element.update.fixed.table.rows.item(0).cells.length-1,this.lastMainCellIndex=this.element.update.main.table.rows.item(0).cells.length-1):(this.lastFixedCellIndex=-1,this.lastMainCellIndex=-1)},e.prototype.onTableIsReady=function(){for(var e;this.functionsToCallWhenTableIsReady.length>0;)(e=this.functionsToCallWhenTableIsReady.shift()).fn.call(e.scope,e.arg);this.isTableReady=!0},e.getParentTdElement=function(e,t){var i=e;for("td"!==i.tagName.toLowerCase()&&(i=EBX_Utils.getFirstParentMatchingTagName(i,"TD"));null!==i&&i.parentNode.parentNode.parentNode!==t;)i=EBX_Utils.getFirstParentMatchingTagName(i,"TD");return i},e.getCellFromEventTargetElement=function(e,t){var i;if("TBODY"===e.tagName||"TR"===e.tagName||EBX_Utils.matchCSSClass(e,u.SelectionRangeMask.CSS_MASK))return null;for(i="TD"===e.tagName?e:EBX_Utils.getFirstParentMatchingTagName(e,"TD");i.parentNode.parentNode.parentNode!==t;)i=EBX_Utils.getFirstParentMatchingTagName(i,"TD");return i},e.initAPVListeners=function(e){for(var t=0,i=EBX_Utils.getRecursiveChildrenMatchingCSSClass(e,EBX_Form.APVElementCSSClass);t<i.length;t++){var n=i[t];EBX_FormPresenter.addAPVElementListener(n)}},e.initBrowsersGaps=function(){null===r.EBX_AjaxTable_UIConstants.minWidthIssueGap&&("firefox"===EBX_LayoutManager.browser.toLowerCase()&&EBX_LayoutManager.browserMajorVersion<17?r.EBX_AjaxTable_UIConstants.minWidthIssueGap=-r.EBX_AjaxTable_UIConstants.minWidthColumn:r.EBX_AjaxTable_UIConstants.minWidthIssueGap=0)},e.createAndRegisterTable=function(t,i,n,s){if(void 0===e.AjaxTableRegister[t]){var r=new e(t,i,n,s);r.init(),e.AjaxTableRegister[t]=r}},e.initDisplay=function(t){e.AjaxTableRegister[t].initDisplay()},e.registerOpenButton=function(t,i){void 0===e.pluggedComponentRegister.buttonOpenRegister[t]&&(e.pluggedComponentRegister.buttonOpenRegister[t]=[]),e.pluggedComponentRegister.buttonOpenRegister[t].push(i)},e.registerFirstButton=function(t,i){void 0===e.pluggedComponentRegister.buttonFirstRegister[t]&&(e.pluggedComponentRegister.buttonFirstRegister[t]=[]),e.pluggedComponentRegister.buttonFirstRegister[t].push(i)},e.registerPreviousButton=function(t,i){void 0===e.pluggedComponentRegister.buttonPreviousRegister[t]&&(e.pluggedComponentRegister.buttonPreviousRegister[t]=[]),e.pluggedComponentRegister.buttonPreviousRegister[t].push(i)},e.registerNextButton=function(t,i){void 0===e.pluggedComponentRegister.buttonNextRegister[t]&&(e.pluggedComponentRegister.buttonNextRegister[t]=[]),e.pluggedComponentRegister.buttonNextRegister[t].push(i)},e.registerLastButton=function(t,i){void 0===e.pluggedComponentRegister.buttonLastRegister[t]&&(e.pluggedComponentRegister.buttonLastRegister[t]=[]),e.pluggedComponentRegister.buttonLastRegister[t].push(i)},e.registerToolbar=function(t,i){e.pluggedComponentRegister.tableByToolbar[i]=t;var n=e.pluggedComponentRegister.toolbarsByTable[t];n||(n=[],e.pluggedComponentRegister.toolbarsByTable[t]=n),n.push(i)},e.getTableNameFromToolbarName=function(t){return e.pluggedComponentRegister.tableByToolbar[t]},e.getToolbarNamesFromTableName=function(t){return e.pluggedComponentRegister.toolbarsByTable[t]},e.registerPageReport=function(t,i){void 0===e.pluggedComponentRegister.pageReportRegister[t]&&(e.pluggedComponentRegister.pageReportRegister[t]=[]),e.pluggedComponentRegister.pageReportRegister[t].push(i)},e.registerSelectReport=function(t,i){void 0===e.pluggedComponentRegister.selectReportRegister[t]&&(e.pluggedComponentRegister.selectReportRegister[t]=[]),e.pluggedComponentRegister.selectReportRegister[t].push(i)},e.gotoFirstPage=function(t){void 0!==e.AjaxTableRegister[t]?e.AjaxTableRegister[t].pagination.goToFirstPage():EBX_Logger.log("EBX_AjaxTable.gotoFirstPage: Table with name "+t+" is not registered.",EBX_Logger.error)},e.gotoPreviousPage=function(t){void 0!==e.AjaxTableRegister[t]?e.AjaxTableRegister[t].pagination.goToPreviousPage():EBX_Logger.log("EBX_AjaxTable.gotoPreviousPage: Table with name "+t+" is not registered.",EBX_Logger.error)},e.gotoNextPage=function(t){void 0!==e.AjaxTableRegister[t]?e.AjaxTableRegister[t].pagination.goToNextPage():EBX_Logger.log("EBX_AjaxTable.gotoNextPage: Table with name "+t+" is not registered.",EBX_Logger.error)},e.gotoLastPage=function(t){void 0!==e.AjaxTableRegister[t]?e.AjaxTableRegister[t].pagination.goToLastPage():EBX_Logger.log("EBX_AjaxTable.gotoLastPage: Table with name "+t+" is not registered.",EBX_Logger.error)},e.selectCurrentPage=function(t){void 0!==e.AjaxTableRegister[t]?e.AjaxTableRegister[t].selection.selectCurrentPage():EBX_Logger.log("EBX_AjaxTable.selectCurrentPage: Table with name "+t+" is not registered.",EBX_Logger.error)},e.unselectCurrentPage=function(t){void 0!==e.AjaxTableRegister[t]?e.AjaxTableRegister[t].selection.unselectCurrentPage():EBX_Logger.log("EBX_AjaxTable.unselectCurrentPage: Table with name "+t+" is not registered.",EBX_Logger.error)},e.selectAllRecords=function(t){void 0!==e.AjaxTableRegister[t]?e.AjaxTableRegister[t].selection.selectAllRecords():EBX_Logger.log("EBX_AjaxTable.selectAllRecords: Table with name "+t+" is not registered.",EBX_Logger.error)},e.unselectAllRecords=function(t){void 0!==e.AjaxTableRegister[t]?e.AjaxTableRegister[t].selection.unselectAllRecords():EBX_Logger.log("EBX_AjaxTable.unselectAllRecords: Table with name "+t+" is not registered.",EBX_Logger.error)},e.openCurrentFocusedRecord=function(t){void 0!==e.AjaxTableRegister[t]?e.AjaxTableRegister[t].selection.openCurrentFocusedRecord():EBX_Logger.log("EBX_AjaxTable.openCurrentFocusedRecord: Table with name "+t+" is not registered.",EBX_Logger.error)},e.setNewPageSize=function(t,i,n,s){void 0!==e.AjaxTableRegister[t]?e.AjaxTableRegister[t].pagination.sendRequestSetTablePageSize(i,n,s):EBX_Logger.log("EBX_AjaxTable.setNewPageSize: Table with name "+t+" is not registered.",EBX_Logger.error)},e.computeSize=function(t,i){void 0!==e.AjaxTableRegister[t]?e.AjaxTableRegister[t].pagination.sendRequestComputeTableSize(i):EBX_Logger.log("EBX_AjaxTable.setNewPageSize: Table with name "+t+" is not registered.",EBX_Logger.error)},e.isTableExists=function(t){return void 0!==e.AjaxTableRegister[t]},e.refreshCurrentPage=function(t,i){void 0===i&&(i=!1),void 0!==e.AjaxTableRegister[t]?e.AjaxTableRegister[t].content.refreshCurrentPage(i):EBX_Logger.log("EBX_AjaxTable.refreshCurrentPage: Table with name "+t+" is not registered.",EBX_Logger.error)},e.getSelectedRecordsNumber=function(t){if(void 0!==e.AjaxTableRegister[t]){var i=e.AjaxTableRegister[t].content.rawResponse;return null==i?0:i.meta.selectedNumber}EBX_Logger.log("EBX_AjaxTable.getSelectedRecordsNumber: Table with name "+t+" is not registered.",EBX_Logger.error)},e.hasPreviousPage=function(t){if(void 0!==e.AjaxTableRegister[t]){var i=e.AjaxTableRegister[t].content.rawResponse;return null!=i&&i.meta.hasPreviousPage}EBX_Logger.log("EBX_AjaxTable.hasPreviousPage: Table with name "+t+" is not registered.",EBX_Logger.error)},e.hasNextPage=function(t){if(void 0!==e.AjaxTableRegister[t]){var i=e.AjaxTableRegister[t].content.rawResponse;return null!=i&&i.meta.hasNextPage}EBX_Logger.log("EBX_AjaxTable.hasNextPage: Table with name "+t+" is not registered.",EBX_Logger.error)},e.hasChangeSet=function(t){if(void 0!==e.AjaxTableRegister[t]){var i=e.AjaxTableRegister[t].content.rawResponse;return null!=i&&i.meta.hasChangeSet}EBX_Logger.log("EBX_AjaxTable.hasChangeSet: Table with name "+t+" is not registered.",EBX_Logger.error)},e.isTableFullSizeUnknown=function(t){if(void 0!==e.AjaxTableRegister[t]){var i=e.AjaxTableRegister[t].content.rawResponse;return null==i||i.meta.fullSizeUnknown}EBX_Logger.log("EBX_AjaxTable.isTableFullSizeUnknown: Table with name "+t+" is not registered.",EBX_Logger.error)},e.isMassUpdateEnabled=function(t){return e.hasChangeSet(t)},e.toggleSortByRelevancy=function(){void 0!==e.AjaxTableRegister[EBX_AdvancedSearch.ajaxTableName]?e.isSortedByRelevancy(EBX_AdvancedSearch.ajaxTableName,EBX_AdvancedSearch.state)?window.location.href=e.constants.resetSortRequestLink:n.AdvancedSearchActions.applySearch(!0):EBX_Logger.log("EBX_AjaxTable.toggleSortByRelevancy: Table with name "+EBX_AdvancedSearch.ajaxTableName+" is not registered.",EBX_Logger.error)},e.isSortedByRelevancy=function(t,i){var n=e.AjaxTableRegister[t];if(void 0!==n)return!!i&&(!!s.AdvancedSearchModel.isSearchApplied(i)&&0===n.content.rawResponse.meta.sortState[0].length);EBX_Logger.log("EBX_AjaxTable.isSortedByRelevancy: Table with name "+t+" is not registered.",EBX_Logger.error)},e.isSortableByRelevancy=function(t,i){var n=e.AjaxTableRegister[t];if(void 0!==n){if(i){var r=n.content.rawResponse;return null!=r&&(s.AdvancedSearchModel.isSearchApplied(i)&&r.meta.isSortableByRelevancy)}return!1}EBX_Logger.log("EBX_AjaxTable.isSortedByRelevancy: Table with name "+t+" is not registered.",EBX_Logger.error)},e.messages=new r.LocalizedMessages,e.constants=new r.ConstantsFromServer,e.AjaxTableRegister={},e.widgetContainerTable={},e.maxIntPowerForBitwiseOperation=31,e.pluggedComponentRegister=new C,e.events={refresh:"EBX_AjaxTable.refresh",selectionChange:"EBX_AjaxTable.selectionChange"},e}();t.EBX_AjaxTable=x},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){var t=[],i=[],n=[],s=!1;function r(){if(!s&&0!==n.length){s=!0;try{for(var e=EBX_AdvancedSearch.state;n.length>0;){var t=n;n=[],EBX_Utils.forEach(t,(function(t){var n=o(i);e=n(t,e)}))}if(e!==EBX_AdvancedSearch.state){var l={previousState:EBX_AdvancedSearch.state,nextState:e};EBX_Events.trigger(null,"EVENT_DATA_UPDATE",l),EBX_AdvancedSearch.state=e}}finally{s=!1,n.length>0&&setTimeout(r)}}}e.registerReducer=function(e){t=t.concat([e])},e.unregisterReducer=function(e){t=EBX_Utils.filter(t,(function(t){return t!==e}))},e.registerMiddleware=function(e){i=i.concat([e])},e.unregisterMiddleware=function(e){i=EBX_Utils.filter(i,(function(t){return t!==e}))},e.registerStateListener=function(e){var t=function(t){e(t.data.nextState,t.data.previousState)};e.__wrapperEVENT_DATA_UPDATE=t,EBX_Events.on(null,"EVENT_DATA_UPDATE",t)},e.unregisterStateListener=function(e){var t=e.__wrapperEVENT_DATA_UPDATE;null!=t&&(EBX_Events.off(null,"EVENT_DATA_UPDATE",t),delete e.__wrapperEVENT_DATA_UPDATE)},e.sendAction=function(e,t){null!=window.EBX_AdvancedSearch&&(n.push({name:e,param:t}),s||1!==n.length||setTimeout(r))};var o=EBX_Utils.memoize((function(e){for(var i=function(e,i){return function(e,i,n){var s=i;return EBX_Utils.forEach(t,(function(t){s=t(e,s,n)})),s}(e.name,i,e.param)},n=function(e){var t;t=i,i=function(i,n){return e(t,i,n)}},s=0,r=e;s<r.length;s++){n(r[s])}return i}))}(t.AdvancedSearch||(t.AdvancedSearch={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1);!function(e){function t(e){return function(t){n.AdvancedSearch.sendAction(e,t)}}function i(e){return function(){n.AdvancedSearch.sendAction(e,void 0)}}var s,r,o,l,a,d,u,c,h,p,m,g,f,b,E,C,_,S,v,y,B,x,w,I,T,R;!function(e){e.NAME="togglePanel"}(s=e.TogglePanel||(e.TogglePanel={})),e.togglePanel=t(s.NAME),function(e){e.NAME="fetchCriterion_success"}(r=e.FetchCriterion_success||(e.FetchCriterion_success={})),e.fetchCriterion_success=t(r.NAME),function(e){e.NAME="removeCriterion"}(o=e.RemoveCriterion||(e.RemoveCriterion={})),e.removeCriterion=t(o.NAME),function(e){e.NAME="selectColumn"}(l=e.SelectColumn||(e.SelectColumn={})),e.selectColumn=t(l.NAME),function(e){e.NAME="selectColumn_success"}(a=e.SelectColumn_success||(e.SelectColumn_success={})),e.selectColumn_success=t(a.NAME),function(e){e.NAME="toggleLineActivation"}(d=e.ToggleLineActivation||(e.ToggleLineActivation={})),e.toggleLineActivation=t(d.NAME),function(e){e.NAME="setAllLinesActivation"}(u=e.SetAllLinesActivation||(e.SetAllLinesActivation={})),e.setAllLinesActivation=t(u.NAME),function(e){e.NAME="updateQuickSearch"}(c=e.UpdateQuickSearch||(e.UpdateQuickSearch={})),e.updateQuickSearch=t(c.NAME),function(e){e.NAME="clearQuickSearch"}(h=e.ClearQuickSearch||(e.ClearQuickSearch={})),e.clearQuickSearch=i(h.NAME),function(e){e.NAME="applySearch"}(p=e.ApplySearch||(e.ApplySearch={})),e.applySearch=t(p.NAME),function(e){e.NAME="setFetchingData"}(m=e.SetFetchingData||(e.SetFetchingData={})),e.setFetchingData=i(m.NAME),function(e){e.NAME="setFetchingData_success"}(g=e.SetFetchingData_success||(e.SetFetchingData_success={})),e.setFetchingData_success=i(g.NAME),function(e){e.NAME="setFetchingData_cancel"}(f=e.SetFetchingData_cancel||(e.SetFetchingData_cancel={})),e.setFetchingData_cancel=i(f.NAME),function(e){e.NAME="setFetchingData_uncertain"}(b=e.SetFetchingData_uncertain||(e.SetFetchingData_uncertain={})),e.setFetchingData_uncertain=i(b.NAME),function(e){e.NAME="selectOperator"}(E=e.SelectOperator||(e.SelectOperator={})),e.selectOperator=t(E.NAME),function(e){e.NAME="selectOperator_success"}(C=e.SelectOperator_success||(e.SelectOperator_success={})),e.selectOperator_success=t(C.NAME),function(e){e.NAME="initOperator"}(_=e.InitOperator||(e.InitOperator={})),e.initOperator=t(_.NAME),function(e){e.NAME="setValue"}(S=e.SetValue||(e.SetValue={})),e.setValue=t(S.NAME),function(e){e.NAME="initCurrentFilter"}(v=e.InitCurrentFilter||(e.InitCurrentFilter={})),e.initCurrentFilter=t(v.NAME),function(e){e.NAME="saveCurrentFilter"}(y=e.SaveCurrentFilter||(e.SaveCurrentFilter={})),e.saveCurrentFilter=i(y.NAME),function(e){e.NAME="saveCurrentFilter_success"}(B=e.SaveCurrentFilter_success||(e.SaveCurrentFilter_success={})),e.saveCurrentFilter_success=i(B.NAME),function(e){e.NAME="loadFilter"}(x=e.LoadFilter||(e.LoadFilter={})),e.loadFilter=t(x.NAME),function(e){e.NAME="loadFilter_success"}(w=e.LoadFilter_success||(e.LoadFilter_success={})),e.loadFilter_success=t(w.NAME),function(e){e.NAME="loadFilter_failure"}(I=e.LoadFilter_failure||(e.LoadFilter_failure={})),e.loadFilter_failure=i(I.NAME),function(e){e.NAME="deleteFilter"}(T=e.DeleteFilter||(e.DeleteFilter={})),e.deleteFilter=t(T.NAME),function(e){e.NAME="deleteFilter_success"}(R=e.DeleteFilter_success||(e.DeleteFilter_success={})),e.deleteFilter_success=i(R.NAME)}(t.AdvancedSearchActions||(t.AdvancedSearchActions={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e._countActivatedCriteria=function(e){for(var t=0,i=Object.keys(e),n=0;n<i.length;n++)e[i[n]].isActivated&&t++;return t},e._getNumberOfActivatedCriteria=EBX_Utils.memoize(e._countActivatedCriteria),e.getNumberOfActivatedCriteria=function(t){return e._getNumberOfActivatedCriteria(t.filter.criterionByLineId)},e._getNumberOfAppliedCriteria=EBX_Utils.memoize(e._countActivatedCriteria),e.getNumberOfAppliedCriteria=function(t){var i=t.appliedFilter;return null==i?0:e._getNumberOfAppliedCriteria(i.criterionByLineId)},e._isSearchEnabled=EBX_Utils.memoize((function(e){if(e.fetchingData)return!1;if(null==e.appliedFilter)return!0;if(e.appliedFilter===e.filter)return!1;var t=e.filter.criterionByLineId;for(var i in t){var n=t[i];if(n.isActivated){if(n.hasError)return!1;var o=n.operand;if(void 0===o)return!0;if(null===o)return!1;if(""===o)return!1;if(Array.isArray(o)&&0===o.length)return!1}}if(e.filter.quickSearch!==e.appliedFilter.quickSearch)return!0;var l=s(e.filter),a=s(e.appliedFilter);if(l.criteria.length!==a.criteria.length)return!0;for(var i in l.criteria)if(!r(l.criteria[i],a.criteria[i]))return!0;return!1})),e.isSearchEnabled=function(t){return e._isSearchEnabled({fetchingData:t.fetchingData,appliedFilter:t.appliedFilter,filter:t.filter})},e._isSaveEnabled=EBX_Utils.memoize((function(t){var i=t.quickSearch,n=t.criterionByLineId,s=t.allCriteriaIds;if(e._hasError(t))return!1;for(var r=0,o=0,l=s;o<l.length;o++){n[l[o]].isActivated&&r++}return""!==i||r>0})),e.isSaveEnabled=function(t){return e._isSaveEnabled(t.filter)},e.operandEquals=function(e,t){return e===t||null!=e&&null!=t&&(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!(!Array.isArray(e)||!Array.isArray(t))&&o(e,t))},e._isSearchApplied=EBX_Utils.memoize((function(e){var t=e.appliedFilter;if(null==t)return!1;var i=t.quickSearch;if(null!=i&&i.length>0)return!0;for(var n=0,s=t.allCriteriaIds;n<s.length;n++){var r=s[n];if(t.criterionByLineId[r].isActivated)return!0}return!1})),e.isSearchApplied=function(t){return e._isSearchApplied({appliedFilter:t.appliedFilter})},e._hasError=EBX_Utils.memoize((function(e){for(var t=e.allCriteriaIds,i=e.criterionByLineId,n=0,s=t;n<s.length;n++){var r=i[s[n]];if(r.isActivated){var o=r.operand;if(r.hasError||null===o||""===o)return!0;if(Array.isArray(o)&&0===o.length)return!0}}return!1})),e.hasError=function(t){return e._hasError({allCriteriaIds:t.filter.allCriteriaIds,criterionByLineId:t.filter.criterionByLineId})},e._hasValidationCriterion=EBX_Utils.memoize((function(e){for(var t=e.allCriteriaIds,i=e.criterionByLineId,n=0,s=t;n<s.length;n++){var r=i[s[n]];if(r.isActivated&&0===r.field.indexOf(EBX_AdvancedSearch.parameters.validationTargetPrefix))return!0}return!1})),e.hasValidationCriterion=function(t){return e._hasValidationCriterion({allCriteriaIds:t.filter.allCriteriaIds,criterionByLineId:t.filter.criterionByLineId})},e}();function s(e){if(null==e)return{quickSearch:"",criteria:[]};var t=[],i=function(i){var n=e.criterionByLineId[i];n.isActivated&&t.push({field:n.field,operator:n.operator,operand:n.operand,hasError:n.hasError})};function n(e,t){return e===t?0:null==e?-1:null==t?1:(""+e).localeCompare(""+t)}return EBX_Utils.forEach(e.allCriteriaIds,i),null!=e.additionalCriterionId&&i(e.additionalCriterionId),t=t.sort((function(e,t){var i=n(e.field,t.field);return 0!=i||0!=(i=n(e.operator,t.operator))||0!=(i=n(e.operand,t.operand))?i:0})),{quickSearch:e.quickSearch,criteria:t}}function r(e,t){if(e===t)return!0;if(e.field!==t.field)return!1;if(e.operator!==t.operator)return!1;var i=e.operand,s=t.operand;return i===s||n.operandEquals(i,s)}function o(e,t){if(e.length!==t.length)return!1;for(var i in e)if(!n.operandEquals(e[i],t[i]))return!1;return!0}t.AdvancedSearchModel=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};t.ConstantsFromServer=n;var s=function(){function e(){}return e.lineMinHeight=40,e.statusColumnWidth=49,e.minWidthColumn=41,e.minWidthIssueGap=null,e}();t.EBX_AjaxTable_UIConstants=s;var r=function(){};t.LocalizedMessages=r},function(e,t,i){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t,i){var n=e.call(this,t)||this;return n.responseType=YAHOO.util.DataSource.TYPE_JSON,n.responseSchema=i,n}return s(t,e),t}(YAHOO.util.XHRDataSource);t.YUI_XHRDataSourceJSON=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.compiledStateIndexInResultLine=0,e.keyIndexInResultLine=1,e.firstColumnContentIndexInResultLine=2,e.compiledRowStateIndexSelected=0,e.compiledRowStateIndexSeverity=1,e.compiledRowStateIndexInheritance=2,e.compiledRowStateSelected="1",e}();t.AjaxResponseRecordConstants=n},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Solid=0]="Solid",e[e.Outline=1]="Outline",e[e.Dotted=2]="Dotted"}(n=t.SelectionBorderStyle||(t.SelectionBorderStyle={}));var s,r=function(){function e(e,t,i){this.table=e,this.style=t,this.range=i,this.borders=[],this.visible=!1}return e.prototype.draw=function(){this.visible=!0;var e=this.range.getTopLeftCell(),t=this.range.getTopRightCell(),i=this.range.getBottomLeftCell(),n=this.range.getBottomRightCell();e&&(this.drawTransverseHorizontalBorder(s.Top,e,t),this.drawTransverseHorizontalBorder(s.Bottom,i,n),this.drawTransverseVerticalBorder(s.Left,e,i),this.drawTransverseVerticalBorder(s.Right,t,n))},e.prototype.isVisible=function(){return this.visible},e.prototype.drawTransverseHorizontalBorder=function(t,i,n){var r,o,l;r=i.isPlacedInTheCreatePart()?this.table.element.create:this.table.element.update;var a=this.isRangeInSameTable();i.isPlacedInFixedContainer()?(o=r.fixed,l=r.main):(o=r.main,l=r.fixed);var d=i.tdElement.offsetTop;t===s.Bottom&&(d+=i.tdElement.offsetHeight);var u=i.tdElement.offsetLeft+1;if(a){var c=n.tdElement.offsetLeft+n.tdElement.offsetWidth;this.borders.push(e.drawBorder(o,t,this.style,d,u,c))}else{c=o.table.offsetWidth;var h=e.drawBorder(o,t,this.style,d,u,c);this.borders.push(h);var p=n.tdElement.offsetLeft+n.tdElement.offsetWidth;if(this.borders.push(e.drawBorder(l,t,this.style,d,0,p)),this.isRangeInSameContainer()){if(t===s.Top){var m=this.range.getBottomLeftCell().tdElement;this.addVerticalBorderOnScroll(h,l,p,c,d,m.offsetTop+m.offsetHeight)}}else t===s.Top?this.addVerticalBorderOnScroll(h,l,p,c,d,o.table.offsetHeight):this.addVerticalBorderOnScroll(h,l,p,c,0,d)}},e.prototype.addVerticalBorderOnScroll=function(t,i,r,o,a,d){if(!EBX_LayoutManager.isIE8&&!EBX_LayoutManager.isIE9){var u=function(i,l){l.scrollLeft>r?t.borderOnScroll.displayedBorder||(t.borderOnScroll.displayedBorder=e.drawBorder(t.associatedTable,s.Right,n.Dotted,o,a,d)):t.borderOnScroll.displayedBorder&&(e.removeBorderFromDisplay(t.borderOnScroll.displayedBorder),t.borderOnScroll.displayedBorder=null)};YAHOO.util.Event.addListener(i.scroll,"scroll",u,i.scroll,this),t.borderOnScroll=new l(i.scroll,u)}},e.prototype.drawTransverseVerticalBorder=function(t,i,n){var r=i.isPlacedInTheCreatePart()?this.table.element.create:this.table.element.update,o=n.isPlacedInTheCreatePart()?this.table.element.create:this.table.element.update,l=this.isRangeInSameContainer(),a=i.isPlacedInFixedContainer()?r.fixed:r.main,d=i.isPlacedInFixedContainer()?o.fixed:o.main,u=i.tdElement.offsetLeft+1;t===s.Right&&(u+=i.tdElement.offsetWidth-1);var c=i.tdElement.offsetTop;if(l){var h=n.tdElement.offsetTop+n.tdElement.offsetHeight;this.borders.push(e.drawBorder(a,t,this.style,u,c,h))}else{h=a.table.offsetHeight;this.borders.push(e.drawBorder(a,t,this.style,u,c,h));var p=n.tdElement.offsetTop+n.tdElement.offsetHeight,m=e.drawBorder(d,t,this.style,u,0,p);if(this.borders.push(m),this.isRangeInSameTable()){if(t===s.Left){var g=this.range.getBottomLeftCell().tdElement;this.addHorizontalBorderOnScroll(m,this.table.element.create.wrapper,c,u,g.offsetLeft+g.offsetWidth)}}else t===s.Left?this.addHorizontalBorderOnScroll(m,this.table.element.create.wrapper,c,u,a.table.offsetWidth):this.addHorizontalBorderOnScroll(m,this.table.element.create.wrapper,c,0,u)}},e.prototype.addHorizontalBorderOnScroll=function(t,i,r,o,a){if(!EBX_LayoutManager.isIE8&&!EBX_LayoutManager.isIE9){var d=function(i,l){l.scrollTop+l.offsetHeight<r?t.borderOnScroll.displayedBorder||(t.borderOnScroll.displayedBorder=e.drawBorder(t.associatedTable,s.Bottom,n.Dotted,1,o+1,a)):t.borderOnScroll.displayedBorder&&(e.removeBorderFromDisplay(t.borderOnScroll.displayedBorder),t.borderOnScroll.displayedBorder=null)};YAHOO.util.Event.addListener(i,"scroll",d,i,this),t.borderOnScroll=new l(i,d)}},e.drawBorder=function(t,i,r,l,a,d){var u="",c="",h="";switch(r){case n.Outline:u="dashed",h="2px";break;case n.Dotted:u="dotted",h="1px";break;default:u="solid",h="1px"}var p=e.getSpecialBorderOffset(i,r,l);switch(i){case s.Top:c="top :"+(l-p)+"px; left : "+(a-1)+"px; width : "+(d-a)+"px",h="border-top-width :"+h;break;case s.Bottom:c="top :"+(l-1)+"px; left : "+(a-1)+"px; width : "+(d-a)+"px",h="border-bottom-width :"+h;break;case s.Left:c="left :"+(l-1-p)+"px; top : "+a+"px; height : "+(d-a)+"px",h="border-left-width :"+h;break;case s.Right:c="left :"+(l-1)+"px; top : "+a+"px; height : "+(d-a)+"px",h="border-right-width :"+h}var m="\n            <div class='"+e.CSS_MASK+"' style='\n                "+c+"; border-width: 0; "+h+";\n                position: absolute; border-style: "+u+";'\n            >\n            </div>",g=document.createElement("div");return g.innerHTML=m,t.scroll.appendChild(EBX_Utils.firstElementChild(g)),new o(t,EBX_Utils.lastElementChild(t.scroll))},e.prototype.hide=function(){this.visible=!1;for(var t=0,i=this.borders.length;t<i;t++)e.removeBorderFromDisplay(this.borders[t]);this.borders=[]},e.getSpecialBorderOffset=function(e,t,i){return t===n.Outline&&e===s.Top||t===n.Outline&&e===s.Left?1:t===n.Solid&&e===s.Left&&0===i?-1:0},e.removeBorderFromDisplay=function(e){e.associatedTable.scroll.removeChild(e.element),e.borderOnScroll&&e.borderOnScroll.remove()},e.prototype.isRangeInSameContainer=function(){var e=this.range.getTopLeftCell(),t=this.range.getBottomLeftCell();return(e.isPlacedInTheCreatePart()?this.table.element.create:this.table.element.update)===(t.isPlacedInTheCreatePart()?this.table.element.create:this.table.element.update)},e.prototype.isRangeInSameTable=function(){var e=this.range.getTopLeftCell(),t=this.range.getTopRightCell();return e.isPlacedInFixedContainer()===t.isPlacedInFixedContainer()},e.CSS_MASK="ebx_selection_border",e}();t.SelectionRangeMask=r,function(e){e[e.Top=0]="Top",e[e.Right=1]="Right",e[e.Bottom=2]="Bottom",e[e.Left=3]="Left"}(s||(s={}));var o=function(e,t){this.associatedTable=e,this.element=t,this.borderOnScroll=null},l=function(){function e(e,t){this.scrollElement=e,this.eventHandler=t,this.displayedBorder=null}return e.prototype.remove=function(){this.displayedBorder&&(r.removeBorderFromDisplay(this.displayedBorder),this.displayedBorder=null),YAHOO.util.Event.removeListener(this.scrollElement,"scroll",this.eventHandler)},e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(15),s=function(){function e(){}return e.CreateWidget=function(t,i,s,r,o,l){var a=new n.EBX_ModelElementSelector(t,i,s,r,o,l);return e.mapWidget[t]=a,a},e.GetWidget=function(t){return e.mapWidget[t]},e.AddValueChangeHandler=function(t,i){var n=e.valueChangeHandlers[t];n||(e.valueChangeHandlers[t]=[],n=e.valueChangeHandlers[t]),n.push(i),this.valueChangeHandlers[t]=n},e.NotifyValueChange=function(t,i){var n=e.valueChangeHandlers[t];if(n)for(var s=0;s<n.length;s++)n[s](i)},e.SetError=function(t,i){var n=e.GetWidget(t);if(n){var s=new EBX_ValidationMessage;s.errors=[i],n.setError(s)}},e.mapWidget={},e.valueChangeHandlers={},e}();t.EBX_ModelElementSelector_Registry=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){}return e.prototype.setValue=function(e){return!1},e.prototype.getValue=function(){},e.prototype.serialize=function(){return""},e.prototype.setPastedValue=function(e){},e.prototype.getCopyValue=function(){return this.getValue()},e}();t.EBX_FormNodeEditor_Missing=n,window.EBX_FormNodeEditor_Missing=n;var s=function(){function e(e,t){this.inputWrapperEl=e,this.args=t}return e.prototype.setValue=function(e){return this.getInput().value=e,!0},e.prototype.getValue=function(){return this.getInput().value},e.prototype.serialize=function(){return encodeURIComponent(this.getInput().name)+"="+encodeURIComponent(this.getInput().value)},e.prototype.getInput=function(){return void 0===this.inputElement&&(this.inputElement=EBX_Utils.getFirstDirectChildMatchingTagName(this.inputWrapperEl,"input")),this.inputElement},e.prototype.setPastedValue=function(e){this.setValue(e.getDisplayedString())},e.prototype.getCopyValue=function(){return this.getValue()},e}();t.EBX_FormNodeEditor_TextInput=s,window.EBX_FormNodeEditor_TextInput=s;var r=function(){function e(e,t){this.inputWrapperEl=e,this.args=t}return e.prototype.setValue=function(e){return this.getInput().value=e,!0},e.prototype.getValue=function(){return this.getInput().value},e.prototype.serialize=function(){return encodeURIComponent(this.getInput().name)+"="+encodeURIComponent(this.getInput().value)},e.prototype.getInput=function(){return void 0===this.textAreaElement&&(this.textAreaElement=EBX_Utils.getFirstRecursiveChildMatchingTagName(this.inputWrapperEl,"textarea")),this.textAreaElement},e.prototype.getCopyValue=function(){return this.getValue()},e.prototype.setPastedValue=function(e){this.setValue(e.getDisplayedString())},e.prototype.enableControlEnterToCRLF=function(){var e=this.getInput();e.addEventListener("keydown",(function(t){if(t.keyCode===EBX_Utils.keyCodes.ENTER&&t.ctrlKey){var i=e.selectionStart;e.value=e.value.slice(0,i)+"\n"+e.value.slice(e.selectionEnd),e.selectionStart=i+1,e.selectionEnd=i+1,t.preventDefault(),t.stopPropagation()}}))},e}();t.EBX_FormNodeEditor_TextArea=r,window.EBX_FormNodeEditor_TextArea=r;var o=function(){function e(e,t){this.inputWrapperEl=e,this.id=t}return e.prototype.setValue=function(e){return void 0===EBX_Form.APVHTMLEditorIdEditor[this.id]||null===EBX_Form.APVHTMLEditorIdEditor[this.id]?(this.getTextarea().value=e,!0):(EBX_Form.APVHTMLEditorIdEditor[this.id].setData(e),!0)},e.prototype.getValue=function(){return void 0===EBX_Form.APVHTMLEditorIdEditor[this.id]||null===EBX_Form.APVHTMLEditorIdEditor[this.id]?this.getTextarea().value:EBX_Form.APVHTMLEditorIdEditor[this.id].getData()},e.prototype.serialize=function(){return encodeURIComponent(this.getTextarea().name)+"="+encodeURIComponent(this.getValue())},e.prototype.getTextarea=function(){return void 0===this.textareaElement&&(this.textareaElement=EBX_Utils.getFirstRecursiveChildMatchingTagName(this.inputWrapperEl,"textarea")),this.textareaElement},e.prototype.getCopyValue=function(){return this.getValue()},e.prototype.setPastedValue=function(e){this.setValue(e.getDisplayedString())},e}();t.EBX_FormNodeEditor_HTML=o,window.EBX_FormNodeEditor_HTML=o;var l=function(){function e(e,t){this.inputWrapperEl=e,this.lastRdoBtnDeclaredId=t}return e.prototype.setValue=function(e){return this.setInnerValue(e,!1)},e.prototype.setValueForUser=function(e){return this.setInnerValue(e,!0)},e.prototype.setInnerValue=function(e,t){var i=this.getRdoBtns(),n=i.length,s=!1;if(null!==e)for(;n--;){(r=i[n]).value===""+e&&(t&&r.click(),r.checked=!0,s=!0)}if(null===e||!s)for(n=i.length;n--;){var r;(r=i[n]).checked&&r.click(),r.checked=!1}return s||null===e},e.prototype.getValue=function(){for(var e=this.getRdoBtns(),t=e.length;t--;){var i=e[t];if(i.checked)return i.value}return null},e.prototype.serialize=function(){for(var e=this.getRdoBtns(),t=e.length;t--;){var i=e[t];if(i.checked)return encodeURIComponent(i.name)+"="+encodeURIComponent(i.value)}return""},e.prototype.getRdoBtns=function(){if(void 0===this.rdoBtnElements){var e=document.getElementById(this.lastRdoBtnDeclaredId);this.rdoBtnElements=e.form.elements[e.getAttribute("name")],void 0!==this.rdoBtnElements.parentNode&&(this.rdoBtnElements=[this.rdoBtnElements])}return this.rdoBtnElements},e.prototype.getCopyValue=function(){return this.getValue()},e.prototype.setPastedValue=function(e){this.setValueForUser(e.getValue())},e}();t.EBX_FormNodeEditor_RdoBtn=l,window.EBX_FormNodeEditor_RdoBtn=l;var a=function(){function e(e,t){this.inputWrapperEl=e,this.isEmptyButtonEnabled=t}return e.prototype.setValue=function(e){var t=this.getRdoBtns(),i=t.length,n=!1;if(null!==e)for(;i--;){(s=t[i]).value===""+e&&(s.checked=!0,n=!0,this.isEmptyButtonEnabled&&EBX_Form.refreshEmptyButtonFromRadioButton(s.name,!1))}if(null===e||!n)if(this.isEmptyButtonEnabled)EBX_Form.emptyRadioButtonGroup(t[0].name,!1);else for(i=t.length;i--;){var s;(s=t[i]).checked&&s.click(),s.checked=!1}return n||null===e},e.prototype.getValue=function(){for(var e=this.getRdoBtns(),t=e.length;t--;){var i=e[t];if(i.checked)return i.value}return null},e.prototype.serialize=function(){for(var e=this.getRdoBtns(),t=e.length;t--;){var i=e[t];if(i.checked)return encodeURIComponent(i.name)+"="+encodeURIComponent(i.value)}return""},e.prototype.getRdoBtns=function(){if(void 0===this.rdoBtnElements){this.rdoBtnElements=[];for(var e=this.inputWrapperEl.getElementsByTagName("INPUT"),t=e.length;t--;){var i=e[t];"radio"===i.type&&this.rdoBtnElements.push(i)}}return this.rdoBtnElements},e.prototype.getCopyValue=function(){return this.getValue()},e.prototype.setPastedValue=function(e){this.setValue(e.getValue())},e}();t.EBX_FormNodeEditor_RdoBtnGrp=a,window.EBX_FormNodeEditor_RdoBtnGrp=a;var d=function(){function e(e,t){this.inputWrapperEl=e,this.lastCkbDeclaredId=t}return e.prototype.setValue=function(e){null===e&&(e=[]),Array.isArray(e)||(e=[e?""+e:e]);for(var t=this.getCkbs(),i=t.length;i--;){var n=t[i];n.checked=EBX_Utils.arrayContains(e,n.value)}return!0},e.prototype.getValue=function(){for(var e=[],t=this.getCkbs(),i=t.length;i--;){var n=t[i];n.checked&&e.push(n.value)}return e},e.prototype.serialize=function(){for(var e=[],t=this.getCkbs(),i=t.length;i--;){var n=t[i];n.checked&&e.push(encodeURIComponent(n.name)+"="+encodeURIComponent(n.value))}return e.join("&")},e.prototype.getCkbs=function(){if(void 0===this.ckbsElements){var e=document.getElementById(this.lastCkbDeclaredId);this.ckbsElements=e.form.elements[e.getAttribute("name")],void 0!==this.ckbsElements.parentNode&&(this.ckbsElements=[this.ckbsElements])}return this.ckbsElements},e.prototype.getCopyValue=function(){return this.getValue().join("#CKB_SEP#")},e.prototype.setPastedValue=function(e){var t=e.getValue().split("#CKB_SEP#");this.setValue(t)},e}();t.EBX_FormNodeEditor_Ckb=d,window.EBX_FormNodeEditor_Ckb=d;var u=function(){function e(e,t){this.inputWrapperEl=e,this.ckbGrpParentId=t}return e.prototype.setValue=function(e){null===e&&(e=[]);for(var t=this.getCkbs(),i=t.length;i--;){var n=t[i];n.checked=EBX_Utils.arrayContains(e,n.value)}return EBX_FormWidgets.checkboxGroupRefreshSelectAll(t[0],!1),!0},e.prototype.getValue=function(){for(var e=[],t=this.getCkbs(),i=t.length;i--;){var n=t[i];n.checked&&e.push(n.value)}return e},e.prototype.serialize=function(){for(var e=[],t=this.getCkbs(),i=t.length;i--;){var n=t[i];n.checked&&e.push(encodeURIComponent(n.name)+"="+encodeURIComponent(n.value))}return e.join("&")},e.prototype.getCkbs=function(){if(void 0===this.ckbsElements){this.ckbsElements=[];var e=document.getElementById(this.ckbGrpParentId),t=e.getElementsByTagName("INPUT"),i=EBX_Utils.getFirstRecursiveChildMatchingCSSClass(e,EBX_FormWidgets.checkboxGroupSelectAllCSSClass),n=void 0;n=null===i?null:i.getElementsByTagName("INPUT")[0];for(var s=t.length;s--;){var r=t[s];r!==n&&"checkbox"===r.type&&this.ckbsElements.push(r)}}return this.ckbsElements},e.prototype.getCopyValue=function(){return this.getValue().join("#CKB_SEP#")},e.prototype.setPastedValue=function(e){var t=e.getValue().split("#CKB_SEP#");this.setValue(t)},e}();t.EBX_FormNodeEditor_CkbGrp=u,window.EBX_FormNodeEditor_CkbGrp=u;var c=function(){function e(e,t){this.inputWrapperEl=e,this.args=t,this.invalidDateInput=null,this.invalidDateInputElem=null}return e.prototype.getContainer=function(){return EBX_Utils.getFirstDirectChildMatchingCSSClass(this.inputWrapperEl,e.InputsDateContainerCSSClass)},e.prototype.setValue=function(e){var t=""+e;if(this.clearInvalidInput(),null===e)return EBX_Form.emptyDateInputs(this.args.mainName,!1),!0;if("string"==typeof e){var i=/^([+-]?\d+)-(\d{1,2})-(\d{1,2})(?:T(\d{1,2}):(\d{1,2}):(\d{1,2})(?:.(\d{1,3}).*)?)?$/.exec(e);if(null!=i){var n=function(e){var t=i[e];if(null!=t)return parseInt(t,10)},s=n(1),r=n(2),o=n(3),l=n(4),a=n(5),d=n(6),u=n(7);return EBX_Form.fillTimeDateFields(this.args.mainName,!1,s,r,o,l,a,d,u),!0}}return e.constructor!==Date&&(e=new Date(e)),isNaN(e.valueOf())?(this.invalidDateInput=t,this.invalidDateInputElem=document.createElement("input"),this.invalidDateInputElem.hidden=!0,this.invalidDateInputElem.name=this.getRawInputParamName(),this.invalidDateInputElem.value=this.invalidDateInput,this.invalidDateInputElem.style.display="none",this.invalidDateInputElem.style.visibility="hidden",EBX_Form.emptyDateInputs(this.args.mainName,!1),this.getContainer().appendChild(this.invalidDateInputElem),!1):(EBX_Form.fillTimeDate(this.args.mainName,e,!1),!0)},e.prototype.clearInvalidInput=function(){this.invalidDateInput=null,null!==this.invalidDateInputElem&&(this.getContainer().removeChild(this.invalidDateInputElem),this.invalidDateInputElem=null)},e.prototype.getValue=function(){if(null!==this.invalidDateInput)return this.invalidDateInput;var e,t,i,n,s,r,o,l=this.args.mainName;e="";var a=document.getElementById(l+EBX_Form.dateSuffixes.year);null!==a&&(e=a.value),t="";var d=document.getElementById(l+EBX_Form.dateSuffixes.month);null===d||isNaN(parseInt(d.value,10))||(t=parseInt(d.value,null)-1),i="";var u=document.getElementById(l+EBX_Form.dateSuffixes.day);null!==u&&(i=u.value),n="";var c=document.getElementById(l+EBX_Form.dateSuffixes.hour);null!==c&&(n=c.value),s="";var h=document.getElementById(l+EBX_Form.dateSuffixes.minute);null!==h&&(s=h.value),r="";var p=document.getElementById(l+EBX_Form.dateSuffixes.second);null!==p&&(r=p.value),o="";var m=document.getElementById(l+EBX_Form.dateSuffixes.milliSecond);return null!==m&&(o=m.value),0===(e+t+i+n+s+r+o).length?null:new Date(e,t,i,n,s,r,o)},e.prototype.serialize=function(){var t=[];null!==this.invalidDateInput&&t.push(encodeURIComponent(this.getRawInputParamName())+"="+encodeURIComponent(this.invalidDateInput));var i=EBX_Utils.getFirstDirectChildMatchingCSSClass(this.inputWrapperEl,e.InputsDateContainerCSSClass),n=EBX_Utils.firstElementChild(i);do{void 0!==n.name&&t.push(encodeURIComponent(n.name)+"="+encodeURIComponent(n.value))}while(null!==(n=EBX_Utils.nextElementSibling(n)));return t.join("&")},e.prototype.setPastedValue=function(e){this.setValue(e.getDisplayedString())},e.prototype.getCopyValue=function(){return""+this.getValue()},e.prototype.getRawInputParamName=function(){return this.args.mainName+"_rawInput"},e.InputsDateContainerCSSClass="ebx_InputsDateContainer",e}();t.EBX_FormNodeEditor_DateInput=c,window.EBX_FormNodeEditor_DateInput=c;var h=function(e,t){this.key=e,this.label=t},p=function(){function e(e){this.inputWrapperEl=e}return e.prototype.setValue=function(e){var t=this.getInput();return null===e?(EBX_Form.emptyFacetEnum(t.id,!1),!0):(t.value=e.key,this.getLabel().value=e.label,EBX_Form.refreshEmptyButtonFromFacetEnumField(t,!1),!0)},e.prototype.getValue=function(){return this.getInput().value===ebx_nullValueForFacetEnum?null:{key:this.getInput().value,label:this.getLabel().value}},e.prototype.serialize=function(){var e=this.getInput();return encodeURIComponent(e.name)+"="+encodeURIComponent(e.value)},e.prototype.getInput=function(){return void 0===this.inputElement&&(this.inputElement=EBX_Utils.getFirstDirectChildMatchingTagName(this.inputWrapperEl,"input")),this.inputElement},e.prototype.getLabel=function(){return void 0===this.labelElement&&(this.labelElement=EBX_Utils.nextElementSibling(this.getInput())),this.labelElement},e.prototype.setPastedValue=function(e){var t=new h(e.getValue(),e.getDisplayedString());this.setValue(t)},e.prototype.getCopyValue=function(){return this.getValue().key},e}();t.EBX_FormNodeEditor_FEC=p,window.EBX_FormNodeEditor_FEC=p;var m=function(){};t.EBX_ISS_Value=m;var g=function(){function e(e){this.inputWrapperEl=e,this.paramLabel=this.getInput().name+"_label"}return e.prototype.setValue=function(t){var i=this.getLabel();if(null===t||t.key===ebx_nullValueForFacetEnum)return i.className="ebx_ValueND",null!==this.getEmptyButton()&&EBX_Utils.addCSSClass(this.getEmptyButton(),EBX_FormWidgets.emptyButtonHidden_CSSClass),EBX_ISS.mapIdPreviewURL[i.id]=void 0,null!==this.getPreviewButton()&&EBX_ButtonUtils.setButtonDisabled(this.getPreviewButton(),!0),this.getInput().value=ebx_nullValueForFacetEnum,i.value=EBX_FACET_ENUMERATION_LABEL_NULL_VALUE,!0;if(!0!==t.labelLoaded){var n=[];return n.push(EBX_ISS.sendingRequest),n.push("&",EBX_ISS.requestParam_ajaxComponentIndex,"=",encodeURIComponent(EBX_ISS.mapIdAjaxComponentIndex[i.id])),n.push("&",EBX_ISS.requestParam_key,"=",encodeURIComponent(t.key)),EBX_ISS.dataSource.sendRequest(n.join(""),{success:this.receiveSuccess,failure:e.receiveFailure,scope:this,argument:t}),!1}if(null!==this.getEmptyButton()?(i.className=EBX_FormWidgets.inputWithEmptyButton_CSSClass,EBX_Utils.removeCSSClass(this.getEmptyButton(),EBX_FormWidgets.emptyButtonHidden_CSSClass)):i.className="",void 0===t.previewURL||null===t.previewURL?EBX_ISS.mapIdPreviewURL[i.id]=void 0:EBX_ISS.mapIdPreviewURL[i.id]=t.previewURL,null!==this.getPreviewButton()){var s=void 0!==EBX_ISS.mapIdPreviewURL[i.id];EBX_ButtonUtils.setButtonDisabled(this.getPreviewButton(),!s)}return this.getInput().value=t.key,i.value=t.label,!0},e.prototype.getValue=function(){return this.getInput().value===ebx_nullValueForFacetEnum?null:{key:this.getInput().value,label:this.getLabel().value,previewURL:EBX_ISS.mapIdPreviewURL[this.getLabel().id],labelLoaded:!0}},e.prototype.serialize=function(){var e=this.getInput(),t=encodeURIComponent(e.name)+"="+encodeURIComponent(e.value);return t+="&"+encodeURIComponent(this.paramLabel)+"="+encodeURIComponent(this.getLabel().value)},e.prototype.getInput=function(){return void 0===this.inputElement&&(this.inputElement=EBX_Utils.getFirstRecursiveChildMatchingTagName(this.inputWrapperEl,"input")),this.inputElement},e.prototype.getLabel=function(){return void 0===this.labelElement&&(this.labelElement=EBX_Utils.nextElementSibling(this.getInput())),this.labelElement},e.prototype.getEmptyButton=function(){return void 0===this.emptyButton&&(this.emptyButton=EBX_Utils.getFirstRecursiveChildMatchingCSSClass(this.inputWrapperEl,"ebx_Empty")),this.emptyButton},e.prototype.getPreviewButton=function(){return void 0===this.previewButton&&(this.previewButton=EBX_Utils.getFirstDirectChildMatchingCSSClass(this.inputWrapperEl,"ebx_Open")),this.previewButton},e.prototype.receiveSuccess=function(e,t,i){if(0!==t.results.length){var n=t.results[0];n.labelLoaded=!0,this.setValue(n)}else i.labelLoaded=!0,this.setValue(i);EBX_FormPresenter.stackElementForValidation(this.getLabel())},e.prototype.setPastedValue=function(e){var t=new m;t.key=e.getValue(),t.label=e.getDisplayedString(),t.labelLoaded=!0,this.setValue(t)},e.prototype.getCopyValue=function(){return this.getInput().value},e.receiveFailure=function(e,t,i){401===t.status&&EBX_Loader.gotoTimeoutPage()},e.notifyInputPositionChanged=function(){EBX_ISS.notifyInputPositionChanged()},e}();t.EBX_FormNodeEditor_ISS=g,window.EBX_FormNodeEditor_ISS=g;var f=function(){function e(e,t){this.inputWrapperEl=e,this.args=t}return e.prototype.setValue=function(e){Array.isArray(e)||(e=[e]);var t=this.getInput(),i=t.id,n=EBX_Utils.map(this.getValue(),(function(e){return e.key}));null==e&&(e=[]);var s=document.createElement("select"),r=document.createElement("ul"),o=[];return EBX_Utils.forEach(e,(function(e){var t,l="";n.indexOf(e.key)<0&&(l+=" "+EBX_LCB.freshlyAddedCSSClass),e.key===ebx_nullValueForFacetEnum&&(l+=" ebx_ValueND"),s.appendChild(EBX_Utils.createElement("option",{value:e.key,selected:!0},e.key));var a=document.createElement("textarea");a.innerHTML=e.labelForDisplay,0===(t=a.value).trim().length&&(t="");var d=void 0,u=void 0,c=EBX_LCB.previewButton[i];void 0!==c&&void 0!==e.previewURL&&(u=e.previewURL,(h=document.createElement("div")).innerHTML=c,d=h.children[0]);o.push(u);var h,p=void 0,m=EBX_LCB.deleteButton[i];null!=m&&((h=document.createElement("div")).innerHTML=m,p=h.children[0]);r.appendChild(EBX_Utils.createElement("li",{class:l},t,EBX_Utils.createElement("div",{class:EBX_LCB.lineActionsCSSClass},d,p)))})),t.innerHTML=s.innerHTML,document.getElementById(EBX_LCB.listId[i]).innerHTML=r.innerHTML,void 0!==EBX_LCB.previewURLs[i]&&(EBX_LCB.previewURLs[i]=o),!0},e.prototype.getValue=function(){for(var e=this.getInput(),t=e.children,i=document.getElementById(EBX_LCB.listId[this.getValuesSelectId()]).children,n=[],s=0;s<e.childElementCount;s++){var r=t[s],o=i[s];n.push({key:r.value,labelForDisplay:o.innerText})}return n},e.prototype.getValuesSelectId=function(){return this.getInput().id},e.prototype.serialize=function(){var e=this.getInput();return EBX_Utils.map(this.getValue(),(function(t){return encodeURIComponent(e.name)+"="+encodeURIComponent(t.key)})).join("&")},e.prototype.getInput=function(){return void 0===this.inputElement&&(this.inputElement=EBX_Utils.getFirstRecursiveChildMatchingTagName(this.inputWrapperEl,"select")),this.inputElement},e.prototype.setPastedValue=function(e){},e.prototype.getCopyValue=function(){return""},e}();t.EBX_FormNodeEditor_LCB=f,window.EBX_FormNodeEditor_LCB=f;var b=function(){function e(e,t){this.inputWrapperEl=e,this.args=t}return e.prototype.setValue=function(e){return null===e&&(e=ebx_nullValueForFacetEnum),this.getInput().value=e,!0},e.prototype.getValue=function(){var e=this.getInput();return e.value===ebx_nullValueForFacetEnum?null:e.value},e.prototype.serialize=function(){return encodeURIComponent(this.getInput().name)+"="+encodeURIComponent(this.getInput().value)},e.prototype.getInput=function(){return void 0===this.inputElement&&(this.inputElement=EBX_Utils.getFirstDirectChildMatchingTagName(this.inputWrapperEl,"select")),this.inputElement},e.prototype.setPastedValue=function(e){this.setValue(e.getValue())},e.prototype.getCopyValue=function(){return this.getValue()},e}();t.EBX_FormNodeEditor_DropDownBox=b,window.EBX_FormNodeEditor_DropDownBox=b;var E=function(){function e(e,t){this.inputWrapperEl=e,this.args=t}return e.prototype.setValue=function(e){var t,i,n,s,r=this.getInput(),o=r.options;for(i=o.length;i--;)o[i].selected=!1;for(t=e.length;t--;)for(n=e[t],i=o.length;i--;)(s=o[i]).value===n&&(s.selected=!0);return EBX_FormWidgets.selectMultipleRefreshSelectAll(r,!1),!0},e.prototype.getValue=function(){var e,t,i,n,s=[],r=this.getInput();for(e=0,t=r.options.length;e<t;e++)(i=r.options[e]).selected&&(n="",n=i.hasAttribute?i.hasAttribute("value")?i.value:i.text:i.attributes.value.specified?i.value:i.text,s.push(n));return s},e.prototype.serialize=function(){var e,t,i,n,s=[],r=this.getInput();for(e=0,i=r.options.length;e<i;e++)(t=r.options[e]).selected&&(n="",n=t.hasAttribute?t.hasAttribute("value")?t.value:t.text:t.attributes.value.specified?t.value:t.text,s.push(encodeURIComponent(r.name)+"="+encodeURIComponent(n)));return s.join("&")},e.prototype.getInput=function(){return void 0===this.inputElement&&(this.inputElement=EBX_Utils.getFirstRecursiveChildMatchingTagName(this.inputWrapperEl,"select")),this.inputElement},e.prototype.getCopyValue=function(){return this.getValue().join("#DDM_SEP#")},e.prototype.setPastedValue=function(e){var t=e.getValue().split("#DDM_SEP#");this.setValue(t)},e}();t.EBX_FormNodeEditor_DropDownBoxMultiple=E,window.EBX_FormNodeEditor_DropDownBoxMultiple=E;var C=function(){function e(e,t){this.inputWrapperEl=e,this.previewColorId=t}return e.prototype.setValue=function(e){return this.getInput().value=e,EBX_ColorPicker.updatePreviewForWidget(e,this.previewColorId),!0},e.prototype.getValue=function(){return this.getInput().value},e.prototype.serialize=function(){return encodeURIComponent(this.getInput().name)+"="+encodeURIComponent(this.getInput().value)},e.prototype.getInput=function(){return void 0===this.inputElement&&("input"===this.inputWrapperEl.tagName.toLowerCase()?this.inputElement=this.inputWrapperEl:this.inputElement=EBX_Utils.getFirstRecursiveChildMatchingTagName(this.inputWrapperEl,"input")),this.inputElement},e.prototype.getCopyValue=function(){return this.getValue()},e.prototype.setPastedValue=function(e){this.setValue(e.getDisplayedString())},e}();t.EBX_FormNodeEditor_ColorPicker=C,window.EBX_FormNodeEditor_ColorPicker=C;var _=function(){function e(e,t){this.value=t}return e.prototype.setValue=function(e){return!1},e.prototype.getValue=function(){return this.value},e.prototype.serialize=function(){return""},e.prototype.getCopyValue=function(){return this.getValue()},e.prototype.setPastedValue=function(e){},e}();t.EBX_FormNodeEditor_ReadOnly=_,window.EBX_FormNodeEditor_ReadOnly=_},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=function(){this.createHeight=0,this.createResizeHandleHeight=0};t.Size=s;var r=function(){function e(e){this.table=e,this.size=new s,this.isAutoHeight=!1,this.sizeToUseWhenTableIsInit=null}return e.prototype.initContainer=function(){if(this.isYUIResize=!1,this.table.isWorkspaceTable){var t=EBX_LayoutManager.workspaceLayout.getUnitByPosition(EBX_LayoutManager.workspaceUnits.center.position).getSizes();this.size.containerWidth=t.body.w,this.size.containerHeight=t.body.h,this.table.element.container.style.width=this.size.containerWidth+"px",this.table.element.container.style.height=this.size.containerHeight+"px"}else if(this.table.isEditionMode){this.size.containerWidth=EBX_LayoutManager.lastWorkspaceSizeWithoutFormBottomBarComputed.w,this.size.containerHeight=EBX_LayoutManager.lastWorkspaceSizeWithoutFormBottomBarComputed.h;var i=EBX_Form.getFormBody();i.style.overflow="hidden",i.style.padding="0";var n=EBX_Form.getFirstValidationReportFound(i);null!==n&&(n.style.display="none"),e.enableFormWorkspaceResizeListener(this,!1),this.table.callFunctionWhenTableIsReady(this.table.gridEditModule.initWhenTableIsReady,null,this.table.gridEditModule)}else this.isWidgetFullSizeTab=this.isAssociationNodeAloneInWorkspaceTabContent(),this.isWidgetFullSizeTab?(this.size.containerWidth=this.table.element.container.offsetWidth-2*EBX_LayoutManager.getWorkspaceContentMarginHorizontal(),this.size.containerHeight=this.table.element.container.offsetHeight,e.disableWorkspaceTabOverflow(this),e.enableFormWorkspaceResizeListener(this,!1)):(this.isWidgetAvailableWidthAutoHeight=!0,this.isWidgetAvailableWidthAutoHeight?(this.size.containerWidth=this.table.element.container.offsetWidth,this.size.containerHeight=this.table.element.container.offsetHeight,this.table.element.compactTableShadow=document.createElement("div"),this.table.element.compactTableShadow.className="ebx_tvCompactTableShadow",this.table.element.container.insertBefore(this.table.element.compactTableShadow,this.table.element.container.firstChild),this.isAutoHeight=!0,this.table.callFunctionWhenTableIsReady(this.resizeContainers,null,this),e.enableFormWorkspaceResizeListener(this,!0)):(this.size.containerWidth=this.table.element.container.offsetWidth,this.size.containerHeight=this.table.element.container.offsetHeight,this.yui_resize=new YAHOO.util.Resize(this.table.element.container,{handles:["br"],proxy:!0,ghost:!0,setSize:!1}),this.yui_resize.getProxyEl().className+=" ebx_tvContainerResizeProxy",this.yui_resize.set("minWidth",e.minWidth),this.yui_resize.set("minHeight",e.minHeight),this.yui_resize.subscribe("endResize",this.endResizeListener,null,this),this.isYUIResize=!0))},e.prototype.isAssociationNodeAloneInWorkspaceTabContent=function(){if(!1===EBX_Utils.matchCSSClass(this.table.element.container.parentElement,"ebx_AssociationNodeTable"))return!1;var e=EBX_Utils.getFirstParentMatchingCSSClass(this.table.element.container,EBX_Form.WorkspaceFormTabContentCSSClass);if(null===e)return!1;var t=this.table.element.container.parentElement.parentElement.parentElement.parentElement.parentElement===e&&EBX_Utils.matchCSSClass(this.table.element.container.parentElement.parentElement.parentElement,EBX_Form.InputClassName),i=!1;if(this.table.element.container.parentElement.parentElement.parentElement===e){var n=EBX_Utils.childElementCount(e);(1===n||2===n&&EBX_Utils.getFirstDirectChildMatchingCSSClass(e,"ebx_form_bottom_bar_spacer"))&&(i=!0)}return t||i},e.prototype.addListeners=function(){this.table.isWorkspaceTable&&EBX_LayoutManager.workspaceLayout.addListener("resize",this.resizeFromYUILayout,null,this)},e.prototype.resizeFromYUILayout=function(e){var t=e.sizes.center.h,i=e.sizes.center.w;this.resize(i,t)},e.prototype.formWorkspaceResizeListener=function(e,t){this.sizeToUseWhenTableIsInit=e,this.sizeWithoutFormBottomBarToUseWhenTableIsInit=t,this.table.callFunctionWhenTableIsInit(this.resizeWhenTableIsInit,null,this)},e.prototype.resizeWhenTableIsInit=function(){if(null!==this.sizeToUseWhenTableIsInit){if(this.table.isEditionMode){if(null==this.sizeWithoutFormBottomBarToUseWhenTableIsInit)return;this.resize(this.sizeWithoutFormBottomBarToUseWhenTableIsInit.w,this.sizeWithoutFormBottomBarToUseWhenTableIsInit.h)}if(this.isWidgetFullSizeTab)this.resizeFromAssociationNodeFullTab(this.sizeToUseWhenTableIsInit);else{if(this.isWidgetAvailableWidthAutoHeight){var e=this.size.containerHeight;return this.isAutoHeight&&(e=this.getAutoHeight()),void this.resizeFromSuperContainerAvailableWidth(e)}this.sizeToUseWhenTableIsInit=null,this.sizeWithoutFormBottomBarToUseWhenTableIsInit=null}}},e.prototype.resizeFromAssociationNodeFullTab=function(e){void 0===this.table.element.external.associationNodeTableToolbar&&(this.table.element.external.associationNodeTableToolbar=EBX_Utils.getFirstDirectChildMatchingCSSClass(this.table.element.container.parentElement,"ebx_AssociationNodeTableToolbar"));var t=e.w,i=e.h;i-=this.table.element.external.associationNodeTableToolbar.offsetHeight;var n=this.size.containerWidth;this.resize(t,i),this.size.containerWidth!==n&&this.resizeFromAssociationNodeFullTab(e)},e.prototype.getAutoHeight=function(){var t=this.size.headerHeight,i=this.table.getState();return i===n.EBX_Table_State.NORMAL?t+=this.table.element.update.getLinesHeightsSum():i!==n.EBX_Table_State.EMPTY&&i!==n.EBX_Table_State.CANCELLED||(t+=this.table.element.messageEmpty.offsetHeight),this.table.scroll.hasHorizontalScrollbarVisible()&&(t+=this.table.scroll.hScrollHeight),t<e.minHeight&&(t=e.minHeight),t},e.prototype.prepareTableToAutoWidth=function(){var e=this.size.containerHeight;this.isAutoHeight&&(e=this.getAutoHeight()),this.resize(0,e)},e.prototype.resizeFromSuperContainerAvailableWidth=function(e){void 0===this.table.element.external.superContainerToFillWidth&&(this.table.element.external.superContainerToFillWidth=this.table.element.container.parentElement.parentElement.parentElement,this.isInAFormLineInput=EBX_Utils.getFirstParentMatchingCSSClass(this.table.element.container,EBX_Form.InputClassName)===this.table.element.external.superContainerToFillWidth);var t=this.table.element.external.superContainerToFillWidth.clientWidth;if(this.isInAFormLineInput){t-=2*EBX_Form.InputPadding;var i=EBX_Form.getFormScrollingContainer(this.table.element.external.superContainerToFillWidth);if(this.table.element.external.superContainerToFillWidth.parentElement.parentElement.parentElement.parentElement===i)!1===i.scrollHeight>i.clientHeight&&(t-=this.table.scroll.vScrollWidth)}this.resize(t,e)},e.prototype.endResizeListener=function(e){this.resize(e.width+2,e.height+2)},e.prototype.resize=function(t,i){void 0!==t&&void 0!==i&&(t<e.minWidth&&(t=e.minWidth),i<e.minHeight&&(i=e.minHeight),this.table.element.container.style.width=t+"px",this.table.element.container.style.height=i+"px",this.size.containerWidth=t,this.size.containerHeight=i),this.size.createHeight>this.getCreateMaxHeight()&&(this.size.createHeight=this.getCreateMaxHeight()),this.table.scroll.refreshScrollUpdateHeight(this.size),this.resizeContainers(),e.resizeToolbar(),EBX_Events.trigger(this,"resize",{width:t,height:i})},e.prototype.resizeContainers=function(){var t,i,n,s=this.table.header.columnDefinitions[this.table.nbFixedColumns-1].cumulativeWidth;if(this.size.fixedColumnsWidth=s,this.size.fixedColumnsWidth+e.mainContainerMinWidth>this.size.containerWidth&&(this.size.fixedColumnsWidth=this.size.containerWidth-e.mainContainerMinWidth),i=this.size.containerWidth-this.size.fixedColumnsWidth,this.table.element.hasCreatePart()&&(this.table.element.create.fixed.scrollWrapper.style.height=this.table.element.create.getLinesHeightsSum()+"px",this.table.element.create.main.scrollWrapper.style.height=this.table.element.create.getLinesHeightsSum()+"px"),this.table.scroll.refreshScrollProperties(this.size),this.isAutoHeight&&(n=this.getAutoHeight())!==this.size.containerHeight)this.resize(this.size.containerWidth,n);else{if(0,this.table.header.elements.fixedContainer.style.height=this.size.headerHeight+0+"px",this.table.header.elements.mainContainerWrapper.style.height=this.size.headerHeight+0+"px",this.table.header.elements.mainContainer.style.height=this.size.headerHeight+0+"px",this.table.header.elements.fixed.rows.item(0).style.height=this.size.headerHeight+0+"px",this.table.header.elements.main.rows.item(0).style.height=this.size.headerHeight+0+"px",this.table.scroll.fixedColumnsHasHScroll?(this.table.element.update.fixed.scroll.style.height=this.table.scroll.mainScrollerHeight+"px",this.table.element.update.fixed.scroll.style.overflowX="scroll"):(this.table.element.update.fixed.scroll.style.height=this.table.scroll.mainScrollerHeight-this.table.scroll.currentScrollbarHeight+"px",this.table.element.update.fixed.scroll.style.overflowX="hidden"),this.table.scroll.mainScrollerHasVScroll||this.table.scroll.fixedColumnsHasHScroll?this.table.element.update.fixed.scroll.style.overflow="":this.table.element.update.fixed.scroll.style.overflow="hidden",this.table.scroll.mainScrollerHasVScroll||this.table.scroll.mainScrollerHasHScroll?this.table.element.update.main.scroll.style.overflow="":this.table.element.update.main.scroll.style.overflow="hidden",this.table.isEditionMode){var r=EBX_Form.getWorkspaceFormBottomBarHeight();this.table.element.update.fixed.scrollMaker.style.height=r+"px",this.table.element.update.main.scrollMaker.style.height=r+"px",EBX_Form.letScrollbarDisplay(this.table.scroll.fixedColumnsHasHScroll||this.table.scroll.mainScrollerHasHScroll,this.table.scroll.mainScrollerHasVScroll)}if(t=0,this.table.scroll.hasScrollbarVisible()){if(i-=2,this.table.isWorkspaceTable){var o=EBX_LayoutManager.workspaceLayout.getUnitByPosition(EBX_LayoutManager.workspaceUnits.filters.position);!1!==o&&0===o.getSizes().body.w&&i++}t=1}else this.size.fixedColumnsWidth++,i--;var l,a;this.size.fixedColumnsWidth+t===-1?(this.table.header.elements.fixedContainer.style.width="0",l="0"):(this.table.header.elements.fixedContainer.style.width=this.size.fixedColumnsWidth+t+"px",l=this.size.fixedColumnsWidth+t+"px"),this.table.header.elements.mainContainerWrapper.style.width=i+"px",this.table.element.update.fixed.scrollWrapper.style.width=l,this.table.element.hasCreatePart()&&(this.table.element.create.fixed.scrollWrapper.style.width=l),a=this.size.fixedColumnsWidth+t+this.table.scroll.currentScrollbarWidth===-1?"0":this.size.fixedColumnsWidth+t+this.table.scroll.currentScrollbarWidth+"px",this.table.element.update.fixed.scroll.style.width=a,this.table.element.hasCreatePart()&&(this.table.element.create.fixed.scroll.style.width=this.size.fixedColumnsWidth+t+this.table.scroll.vScrollWidth+"px"),this.table.element.update.main.scroll.style.width=i+1+"px",this.table.element.hasCreatePart()&&(this.table.element.create.main.scrollWrapper.style.width=i-this.table.scroll.currentScrollbarWidth+1+"px",this.table.element.create.main.scroll.style.width=i-this.table.scroll.currentScrollbarWidth+"px",this.table.scroll.createScrollerHasVScroll=this.size.createHeight<this.table.element.create.getLinesHeightsSum());var d=this.table.header.columnDefinitions[this.table.header.columnDefinitions.length-1].cumulativeWidth;if(d<0&&(d=0),this.table.element.hasCreatePart()){var u=this.size.fixedColumnsWidth+d;u<this.size.containerWidth?this.table.element.create.resize.style.width=u+"px":this.table.element.create.resize.style.width=""}this.table.header.elements.mainContainer.style.width=i-this.table.scroll.currentScrollbarWidth+"px",this.table.element.hasUpdatePart()&&!this.table.element.isEmpty()||(this.table.element.update.fixed.scrollMaker.style.width=s+t+"px",this.table.element.update.main.scrollMaker.style.width=d+"px"),this.size.containerHeight<e.heightBelowTableIsSmall?this.table.element.messageContainer.style.paddingTop="0":this.table.element.messageContainer.style.paddingTop=this.size.headerHeight+"px",this.table.element.messageEmpty.style.marginTop=this.size.headerHeight+"px",this.table.scroll.hasScrollbarVisible()?(this.table.element.messageContainer.style.width=this.size.containerWidth+"px",this.table.element.messageContainer.style.height=this.size.headerHeight+this.table.scroll.mainScrollerHeight+"px",this.table.element.messageEmpty.style.width=this.size.containerWidth+"px"):(this.table.element.messageContainer.style.width=this.size.fixedColumnsWidth+this.table.header.columnDefinitions[this.table.header.columnDefinitions.length-1].cumulativeWidth+"px",this.table.element.messageContainer.style.height=this.size.headerHeight+this.table.element.update.getLinesHeightsSum()+"px",this.table.element.messageEmpty.style.width=this.size.fixedColumnsWidth+this.table.header.columnDefinitions[this.table.header.columnDefinitions.length-1].cumulativeWidth+"px"),this.table.element.compactTableShadow&&(this.table.element.compactTableShadow.style.height=this.size.containerHeight+"px",this.table.element.compactTableShadow.style.width=this.size.fixedColumnsWidth+this.table.header.columnDefinitions[this.table.header.columnDefinitions.length-1].cumulativeWidth+"px"),this.table.refreshContainerCSSClasses(),this.table.header.alignResizeKnob(this.table.nbFixedColumns-1),this.table.isEditionMode&&this.table.gridEditModule.resizeWidgetContainer(),this.table.scroll.refreshScrollPosition()}},e.prototype.refreshContainerCSSClasses=function(t){this.isYUIResize&&t.push("yui-resize"),this.size.containerHeight<e.heightBelowTableIsSmall&&t.push("ebx_tvSmallHeight"),this.isAutoHeight&&t.push("ebx_tvAutoHeight")},e.resizeToolbar=function(){var e=document.getElementById("ebx_WorkspaceToolbar");if(null!=e){var t=document.getElementById("ebx_WorkspaceToolbarCenter");if(null!=t){var i=e.offsetWidth;i>1e3?EBX_Utils.matchCSSClass(t,"ebx_ToolsAlignCenterCompressed")&&EBX_Utils.removeCSSClass(t,"ebx_ToolsAlignCenterCompressed"):EBX_Utils.matchCSSClass(t,"ebx_ToolsAlignCenterCompressed")||EBX_Utils.addCSSClass(t,"ebx_ToolsAlignCenterCompressed"),i>=700&&i<900?EBX_Utils.matchCSSClass(t,"ebx_ToolsAlignCenterIntermediateShort")||EBX_Utils.addCSSClass(t,"ebx_ToolsAlignCenterIntermediateShort"):EBX_Utils.matchCSSClass(t,"ebx_ToolsAlignCenterIntermediateShort")&&EBX_Utils.removeCSSClass(t,"ebx_ToolsAlignCenterIntermediateShort"),i>=900&&i<1e3?EBX_Utils.matchCSSClass(t,"ebx_ToolsAlignCenterIntermediateLarge")||EBX_Utils.addCSSClass(t,"ebx_ToolsAlignCenterIntermediateLarge"):EBX_Utils.matchCSSClass(t,"ebx_ToolsAlignCenterIntermediateLarge")&&EBX_Utils.removeCSSClass(t,"ebx_ToolsAlignCenterIntermediateLarge");var n=document.getElementById("ebx_WorkspaceAdvancedSearch");null!=n&&(i<1125?EBX_Utils.matchCSSClass(n,"ebx_AdvancedSearchPaneCompressed")||EBX_Utils.addCSSClass(n,"ebx_AdvancedSearchPaneCompressed"):EBX_Utils.matchCSSClass(n,"ebx_AdvancedSearchPaneCompressed")&&EBX_Utils.removeCSSClass(n,"ebx_AdvancedSearchPaneCompressed"))}}},e.prototype.getCreateMaxHeight=function(){var e=this.table.resizeModule.size.containerHeight-this.table.resizeModule.size.headerHeight-50;return e<0&&(e=0),e},e.prototype.getCreateMaxHeightForAutoExpand=function(){return.5*Math.round(this.table.resizeModule.size.containerHeight-this.table.resizeModule.size.headerHeight)},e.enableFormWorkspaceResizeListener=function(t,i){!1===e.formWorkspaceResizeListenerEnabled&&(EBX_LayoutManager.resizeWorkspaceListeners.push(e.formWorkspaceResizeListener),e.formWorkspaceResizeListenerEnabled=!0),i?e.tablesNeedToBeSmallWithOthersToComputeWidthListeningWorkspaceResize.push(t):e.tablesListeningWorkspaceResize.push(t),null!==EBX_LayoutManager.lastWorkspaceSizeComputed&&t.formWorkspaceResizeListener(EBX_LayoutManager.lastWorkspaceSizeComputed,EBX_LayoutManager.lastWorkspaceSizeWithoutFormBottomBarComputed)},e.formWorkspaceResizeListener=function(t,i){var n;for(n=e.tablesListeningWorkspaceResize.length-1;n>=0;n--)e.tablesListeningWorkspaceResize[n].formWorkspaceResizeListener(t,i);for(n=e.tablesNeedToBeSmallWithOthersToComputeWidthListeningWorkspaceResize.length-1;n>=0;n--)e.tablesNeedToBeSmallWithOthersToComputeWidthListeningWorkspaceResize[n].prepareTableToAutoWidth();for(n=e.tablesNeedToBeSmallWithOthersToComputeWidthListeningWorkspaceResize.length-1;n>=0;n--)e.tablesNeedToBeSmallWithOthersToComputeWidthListeningWorkspaceResize[n].formWorkspaceResizeListener(t)},e.disableWorkspaceTabOverflow=function(e){var t=EBX_Utils.getFirstParentMatchingCSSClass(e.table.element.container,EBX_Form.WorkspaceFormTabContentCSSClass);null!==t&&(t.style.overflow="hidden")},e.mainContainerMinWidth=100,e.heightBelowTableIsSmall=100,e.formWorkspaceResizeListenerEnabled=!1,e.tablesListeningWorkspaceResize=[],e.tablesNeedToBeSmallWithOthersToComputeWidthListeningWorkspaceResize=[],e.minWidth=200,e.minHeight=50,e}();t.Resize=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.PREFIX_WIDGET="ebx_mes_",e.DIRTY=e.PREFIX_WIDGET+"dirty",e.ICONED=e.PREFIX_WIDGET+"iconed",e.LOADED=e.PREFIX_WIDGET+"loaded",e.EMPTY=e.PREFIX_WIDGET+"empty",e.OPENED=e.PREFIX_WIDGET+"open",e.TREE_CTN=e.PREFIX_WIDGET+"tree_ctn",e.ID_TREE_CTN=e.TREE_CTN+"_",e.TREE=e.PREFIX_WIDGET+"tree",e.ID_TREE=e.TREE+"_",e.LOADING=e.PREFIX_WIDGET+"loading",e.BODY=e.PREFIX_WIDGET+"body",e.ID_BODY=e.BODY+"_",e.ITEM_HELP=e.PREFIX_WIDGET+"item_help",e.NOT_SELECTED=e.PREFIX_WIDGET+"not_selected",e.HAS_EMPTY=e.PREFIX_WIDGET+"input_has_empty_button",e.HIDDEN=e.PREFIX_WIDGET+"hidden",e.ICON=e.PREFIX_WIDGET+"icon",e.ID_BUTT_LIST=e.PREFIX_WIDGET+"display_list_",e.ITEM_CTN=e.PREFIX_WIDGET+"item_ctn",e}();t.ModelElementSelector_CSS=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3),s=function(){function e(){}return e.updateNoSearchIcon=function(){var e=document.getElementsByClassName("ebx_NoSearch");if(null!=e)for(var t=n.AdvancedSearchModel.isSearchApplied(EBX_AdvancedSearch.state),i=0;i<e.length;i++){var s=e[i];t?EBX_Utils.addCSSClass(s,"ebx_NoSearch_Show"):EBX_Utils.removeCSSClass(s,"ebx_NoSearch_Show")}},e.addIncorrectFilterMessage=function(){EBX_UserMessageManager.addMessage(EBX_AdvancedSearch.messages.incorrectFilter,EBX_UserMessageManager.ERROR)},e}();t.AdvancedSearchPane=s},function(e,t,i){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r=i(28),o=i(29),l=function(){function e(){this.main=new o.Table_Element_Main,this.fixed=new o.Table_Element_WithScrollWrapper,this.rowsDisplayedLength=0}return e.prototype.clearRowsProperties=function(){this.currentRowsProperties=[],this.rowsDisplayedLength=0,this.linesHeightsSum=0},e.prototype.getRowProperty=function(e){return this.currentRowsProperties[e]},e.prototype.getNumberOfRowsDisplayed=function(){return this.rowsDisplayedLength},e.prototype.getLinesHeightsSum=function(){return this.linesHeightsSum},e.prototype.setLinesHeightsSum=function(e){this.linesHeightsSum=e},e.prototype.clearRowProperty=function(e){this.currentRowsProperties[e]={}},e.prototype.incrementNumberOfRowDisplayed=function(){this.rowsDisplayedLength++},e.FIXED_TABLE_CSS_CLASS="ebx_tvFixed",e.MAIN_TABLE_CSS_CLASS="ebx_tvMain",e}();t.Table_PartsContainer=l;var a=function(e){function t(t){var i=e.call(this)||this;return i.table=t,i.main=new o.Table_Element_WithScrollWrapper,i}return s(t,e),t.prototype.buildTableForCreationIfAbsent=function(){var e=this.table.element.create;e.wrapper=document.createElement("div"),e.wrapper.className=t.WRAPPER_CSS_CLASS,e.fixed.scrollWrapper=document.createElement("div"),e.fixed.scrollWrapper.className="ebx_tvFixedScrollerWrapper",e.fixed.scrollWrapper.style.width=this.table.resizeModule.size.fixedColumnsWidth+"px",e.fixed.scroll=document.createElement("div"),e.fixed.scroll.className="ebx_tvFixedScroller",e.fixed.scroll.style.width=this.table.resizeModule.size.fixedColumnsWidth+50+"px",e.fixed.table=document.createElement("table"),e.fixed.table.className=l.FIXED_TABLE_CSS_CLASS,e.fixed.table.appendChild(document.createElement("tbody")),e.fixed.scrollMaker=document.createElement("div"),e.fixed.scrollMaker.className="ebx_tvScrollMaker",e.fixed.scroll.appendChild(e.fixed.table),e.fixed.scroll.appendChild(e.fixed.scrollMaker),e.fixed.scrollWrapper.appendChild(e.fixed.scroll),e.main.scrollWrapper=document.createElement("div"),e.main.scrollWrapper.className="ebx_tvMainScrollerWrapper",e.main.scrollWrapper.style.width=this.table.resizeModule.size.containerWidth-this.table.resizeModule.size.fixedColumnsWidth+"px",e.main.scroll=document.createElement("div"),e.main.scroll.className="ebx_tvMainScroller",e.main.scroll.style.width=this.table.resizeModule.size.containerWidth-this.table.resizeModule.size.fixedColumnsWidth+"px",e.main.table=document.createElement("table"),e.main.table.className=l.MAIN_TABLE_CSS_CLASS,e.main.table.appendChild(document.createElement("tbody")),e.main.scrollMaker=document.createElement("div"),e.main.scrollMaker.className="ebx_tvScrollMaker",e.main.scroll.appendChild(e.main.table),e.main.scroll.appendChild(e.main.scrollMaker),e.main.scrollWrapper.appendChild(e.main.scroll),e.wrapper.appendChild(e.fixed.scrollWrapper),e.wrapper.appendChild(e.main.scrollWrapper),this.table.element.container.insertBefore(e.wrapper,this.table.element.update.fixed.scrollWrapper),e.resize=document.createElement("div"),e.resize.className="ebx_tvResizerForCreate",e.resizeHandle=document.createElement("div"),e.resizeHandle.className="ebx_tvResizerDragForCreate",e.resize.appendChild(e.resizeHandle),this.table.element.container.insertBefore(e.resize,this.table.element.update.fixed.scrollWrapper),this.table.scroll.addListenerTo(e),YAHOO.util.Event.addListener(this.table.element.create.wrapper,"scroll",this.table.gridEditModule.synchronizePositionOfCurrentWidgetEditedWithScroll,null,this.table.gridEditModule),YAHOO.util.Event.addListener(e.fixed.table,"click",this.table.navigation.clickOnTableListener,e.fixed.table,this.table.navigation),YAHOO.util.Event.addListener(e.main.table,"click",this.table.navigation.clickOnTableListener,e.main.table,this.table.navigation),YAHOO.util.Event.addListener(e.fixed.table,"dblclick",this.table.dblclickOnTableListener,e.fixed.table,this.table),YAHOO.util.Event.addListener(e.main.table,"dblclick",this.table.dblclickOnTableListener,e.main.table,this.table),YAHOO.util.Event.addListener(e.fixed.table,"mouseover",this.table.mouseoverTableListener,e.fixed.table,this.table),YAHOO.util.Event.addListener(e.main.table,"mouseover",this.table.mouseoverTableListener,e.main.table,this.table),YAHOO.util.Event.addListener(e.fixed.table,"mouseout",this.table.mouseoutTableListener,e.fixed.table,this.table),YAHOO.util.Event.addListener(e.main.table,"mouseout",this.table.mouseoutTableListener,e.main.table,this.table),e.clearRowsProperties(),this.table.resizeModule.size.createResizeHandleHeight=5,this.resizeCreate=new r.Table_ResizeCreate(this.table),this.resizeCreate.init()},t.WRAPPER_CSS_CLASS="ebx_tvWrapperForCreate",t}(l);t.Table_Element_Create=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CONTAINER_ID="ebx_workspaceTable_container"}(t.HierarchyWidgetConstants||(t.HierarchyWidgetConstants={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(8),s=i(11),r=i(16),o=i(17),l=i(41),a=function(){function e(e,t,i,n,l,a){var d=this;this.id=e,this.path=i,this.isAjaxPrevalidationOn=l,this.lastValidValue=null,this.input=null,this.icon=null,this.container=null,this.emptyButton=null,this.helpInputButton=null,this.helpInputButtonContainer=null,this.listButton=null,this.onFormCtnScroll=null,this.onTreeSelect=function(e){EBX_FormNodeIndex.getFormNode(d.path).setValue(e)},this.showPanel=function(){var e=function(){var e=d.input.value!==d.getNotDefinedLabel()&&d.input.value!==(d.lastValidValue?d.lastValidValue.label:"");d.panelObj.showPanelAndRefreshTree(e?d.input.value:null)};if(d.panelObj.isVisible())e();else{EBX_Utils.addCSSClass(d.input,s.ModelElementSelector_CSS.OPENED),EBX_LayoutManager.bodyLayout.addListener("resize",d.hidePanelAndResetValue,null,null),EBX_LayoutManager.bodyLayout.addListener("click",d.hidePanelAndResetValue,null,null);var t=EBX_Form.getFormScrollingContainer(d.input);t.fixedScrollTop=t.scrollTop,t.fixedScrollLeft=t.scrollLeft,e(),EBX_ButtonUtils.setStateToToggleButton(d.listButton,!0),d.onFormCtnScroll=function(){t.scrollTop=t.fixedScrollTop,t.scrollLeft=t.fixedScrollLeft},YAHOO.util.Event.addListener(t,"scroll",d.onFormCtnScroll)}},this.hidePanel=function(){EBX_LayoutManager.bodyLayout.removeListener("resize",d.hidePanelAndResetValue),EBX_LayoutManager.bodyLayout.removeListener("click",d.hidePanelAndResetValue);var e=EBX_Form.getFormScrollingContainer(d.input);null!==d.onFormCtnScroll&&(YAHOO.util.Event.removeListener(e,"scroll",d.onFormCtnScroll),d.onFormCtnScroll=null),EBX_Utils.removeCSSClass(d.input,s.ModelElementSelector_CSS.OPENED),d.panelObj.hide(),EBX_ButtonUtils.setStateToToggleButton(d.listButton,!1),o.EBX_ScrollMaker.getScrollMaker(d.container).reset()},this.hidePanelAndResetValue=function(){d.refreshDisplayedValue(d.lastValidValue)},this.container=document.getElementById(e),this.input=document.getElementById(t),this.icon=EBX_Utils.getFirstDirectChildMatchingCSSClass(this.input.parentElement,s.ModelElementSelector_CSS.ICON),this.helpInputButtonContainer=EBX_Utils.getFirstDirectChildMatchingCSSClass(this.input.parentElement,"ebx_mes_input_help_ctn"),this.helpInputButton=this.helpInputButtonContainer.firstElementChild,EBX_LayoutManager.isIE8&&EBX_Utils.addCSSClass(this.helpInputButton,"ebx_mes_help_ie"),this.emptyButton=document.getElementById(e+EBX_Form.EmptySuffix),this.listButton=document.getElementById(s.ModelElementSelector_CSS.ID_BUTT_LIST+e);var u=EBX_Utils.firstElementChild(this.container);if(u.value!==ebx_nullValueForFacetEnum){var c=EBX_Utils.previousElementSibling(this.input);this.lastValidValue={id:u.value,label:this.input.value,urlInfos:n,icon:c.innerHTML}}this.panelObj=new r.MES_Panel(this.id,a,this.container,this.input,this.onTreeSelect),this.initListener()}return e.prototype.initListener=function(){var e=this;YAHOO.util.Event.addListener(this.input,"keydown",(function(t){e.onKeyDown(t)})),YAHOO.util.Event.addListener(this.input,"blur",(function(t){e.onBlur(t)}))},e.prototype.onKeyDown=function(e){this.isAnInterestingKeyEvent(e)&&(null===this.lastValidValue&&this.input.value===this.getNotDefinedLabel()&&(this.input.value=""),this.panelObj.processKeyBoardEvent(e)||(EBX_Utils.addCSSClass(this.input,s.ModelElementSelector_CSS.DIRTY),EBX_NodeDocumentation.hideCurrentDocumentationNow(),clearTimeout(this.inputDebounce),this.inputDebounce=window.setTimeout(this.showPanel,d)))},e.prototype.isAnInterestingKeyEvent=function(e){return!!l.isAnInterestingKeyEventBasic(e)&&(e.keyCode===EBX_Utils.keyCodes.TAB||e.keyCode===EBX_Utils.keyCodes.ESCAPE?(this.refreshDisplayedValue(this.lastValidValue),!1):!!(e.keyCode!==EBX_Utils.keyCodes.LEFT&&e.keyCode!==EBX_Utils.keyCodes.RIGHT&&e.keyCode!==EBX_Utils.keyCodes.UP||this.panelObj.isVisible())&&(!(e.keyCode===EBX_Utils.keyCodes.DOWN&&!this.panelObj.isVisible())||(this.onClickOpenList(),YAHOO.util.Event.stopEvent(e),!1)))},e.prototype.onBlur=function(e){this.panelObj.isVisible()?YAHOO.util.Event.stopEvent(e):this.refreshDisplayedValue(this.lastValidValue)},e.prototype.onClickInputHelp=function(){EBX_NodeDocumentation.displayDocumentation(this.container),this.input.focus()},e.prototype.setToNull=function(){var e=EBX_FormNodeIndex.getFormNode(this.path);null!=e.getValue()&&(e.setValue(null),this.hidePanel(),this.input.focus())},e.prototype.onClickOpenList=function(){EBX_NodeDocumentation.hideCurrentDocumentationNow(),this.input.focus(),this.showPanel()},e.prototype.onClickCloseList=function(){this.hidePanel()},e.prototype.setError=function(e){EBX_FormNodeIndex.getFormNode(this.path).setMessage(e)},e.prototype.clearError=function(){EBX_FormNodeIndex.getFormNode(this.path).setMessage(new EBX_ValidationMessage)},e.prototype.setCustomNullValueLabel=function(e){this.customNullValueLabel=e},e.prototype.onValueChange=function(e,t){void 0===t&&(t=!0);var i=!this.lastValidValue||!e||e.id!==this.lastValidValue.id;this.lastValidValue=e,i&&n.EBX_ModelElementSelector_Registry.NotifyValueChange(this.path,e),this.refreshDisplayedValue(e,t)},e.prototype.getNotDefinedLabel=function(){return this.customNullValueLabel?this.customNullValueLabel:EBX_FACET_ENUMERATION_LABEL_NULL_VALUE},e.prototype.refreshDisplayedValue=function(e,t){void 0===t&&(t=!0),this.input.value=e&&e.label?e.label:this.getNotDefinedLabel(),e&&e.icon?(this.icon.innerHTML=e.icon,EBX_Utils.addCSSClass(this.input,s.ModelElementSelector_CSS.ICONED)):(EBX_Utils.removeCSSClass(this.input,s.ModelElementSelector_CSS.ICONED),this.icon.innerHTML=""),t&&this.isAjaxPrevalidationOn&&this.clearError(),this.refreshCSSButtons(this.lastValidValue),e&&e.urlInfos&&(EBX_NodeDocumentation.docPanels[this.id]=e.urlInfos),EBX_Utils.removeCSSClass(this.input,s.ModelElementSelector_CSS.DIRTY),this.hidePanel()},e.prototype.refreshCSSButtons=function(e){var t=!e;(this.emptyButton&&(EBX_ButtonUtils.setButtonDisabled(this.emptyButton,t),t?(EBX_Utils.addCSSClass(this.emptyButton,EBX_FormWidgets.emptyButtonHidden_CSSClass),EBX_Utils.removeCSSClass(this.input,s.ModelElementSelector_CSS.HAS_EMPTY)):(EBX_Utils.removeCSSClass(this.emptyButton,EBX_FormWidgets.emptyButtonHidden_CSSClass),EBX_Utils.addCSSClass(this.input,s.ModelElementSelector_CSS.HAS_EMPTY))),EBX_Utils.removeCSSClass(this.input,"ebx_InputWithHelpButton"),EBX_Utils.addCSSClass(this.helpInputButtonContainer,s.ModelElementSelector_CSS.HIDDEN),t)?(EBX_Utils.addCSSClass(this.input,EBX_FormWidgets.inputEmpty_CSSClass),EBX_Utils.removeCSSClass(this.input,EBX_FormWidgets.inputWithEmptyButton_CSSClass)):(EBX_Utils.removeCSSClass(this.input,EBX_FormWidgets.inputEmpty_CSSClass),EBX_Utils.addCSSClass(this.input,EBX_FormWidgets.inputWithEmptyButton_CSSClass),!t&&e.urlInfos&&(EBX_Utils.addCSSClass(this.input,"ebx_InputWithHelpButton"),EBX_Utils.removeCSSClass(this.helpInputButtonContainer,s.ModelElementSelector_CSS.HIDDEN)))},e.prototype.notifyInputPositionChanged=function(){this.panelObj.refreshPanelAlignment()},e.prototype.getPanel=function(){return this.panelObj},e}();t.EBX_ModelElementSelector=a;var d=400},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e};Object.defineProperty(t,"__esModule",{value:!0});var s=i(8),r=i(11),o=i(39),l=i(40),a=function(){function e(e,t,i,n,l){var a=this;this.widgetId=e,this.componentIndex=t,this.parentContainer=i,this.linkedInput=n,this.onSelectValue=l,this.treeContainer=null,this.panel=null,this.widgetTree=null,this.panelBody=null,this.hoveredNode=null,this.selectNodeFirstChildAfterExpand=!1,this.resize=null,this.mousePosition=new YAHOO.util.Region(0,0,0,0),this.onLoadingFail=function(e){s.EBX_ModelElementSelector_Registry.SetError(a.widgetId,e)},this.onTreeClick=function(e){var t=e.event.srcElement||e.event.target,i=EBX_Utils.matchCSSClass(t,r.ModelElementSelector_CSS.ITEM_HELP)||EBX_Utils.getFirstParentMatchingCSSClass(t,r.ModelElementSelector_CSS.ITEM_HELP),n=EBX_Utils.matchCSSClass(t,r.ModelElementSelector_CSS.ITEM_CTN)||EBX_Utils.getFirstParentMatchingCSSClass(t,r.ModelElementSelector_CSS.ITEM_CTN);if(!i&&n&&e.hasOwnProperty("node")&&e.node.data.isEnabled){var s=e.node.data;s.isSeeMore?a.loadNextItems(e.node):window.requestAnimationFrame((function(){a.onSelectValue(s)}))}YAHOO.util.Event.stopEvent(e.event),a.linkedInput.focus()},this.loadNextItems=function(e){var t=e.data;e.setDynamicLoad((function(){}),1),e.isLeaf=!1,e.expanded=!0,e.isLoading=!0,t.isEnabled=!1,t.html=a.templateItem(t),e.data.loadChildren((function(t){a.isVisible()&&(a.addTreeItems(t,e.parent),e.isLoading=!1,e.enableHighlight=!1,a.hoveredNode===e&&a.highlightNode(e.nextSibling?e.nextSibling:e.previousSibling,!1),a.widgetTree.removeNode(e,!0))}),a.onLoadingFail)},this.templateItem=function(e){var t="";e.isEnabled||(t=" ebx_mes_disabled");var i=e.icon?e.icon:"",n="",s='EBX_ModelElementSelector_Registry.GetWidget("'+a.widgetId+'").getPanel()';return e.urlInfos&&(n='\n                <button id="'+e.id+'"\n                    class="ebx_mes_item_help ebx_mes_not_selected ebx_IconFlatButtonSmall ebx_LabelDocButton"\n                    type="button" title="'+EBX_LocalizedMessage.label_showDetails+"\"\n                    onclick='"+s+'.onClickItemHelp(this, event);\' >\n                    <span class="ebx_SmallIcon">&nbsp;</span>\n                </button>\n            '),'\n\t\t<div class="ebx_mes_item_mask"\n\t\t\tonmousemove=\''+s+".onNodeHighlight(this, event);'></div>\n\t\t<div class=\"ebx_mes_item_ctn"+t+"\"\n\t\t\tonmousemove='"+s+".onNodeHighlight(this, event);'>\n\t\t\t<div class=\"ebx_mes_item\"\n\t\t\t\tonmousemove='"+s+".onNodeHighlight(this, event);'>\n\t\t\t\t<span onmousemove='"+s+".onNodeHighlight(this, event);'\n\t\t\t\t\tonmouseover='"+s+".onNodeHighlightSearch(this, true);'\n\t\t\t\t\tonmouseout='"+s+'.onNodeHighlightSearch(this, false);\'\n\t\t\t\t\tstyle="padding-right: 23px">\n\t\t\t\t\t'+i+" "+e.labelForDisplay+"\n\t\t\t\t\t"+n+"\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>"},this.templatePanel=function(){var e=a.parentContainer.offsetWidth-1+"px",t=a.widgetId;return'\n\t\t<div id="ebx_mes_body_'+t+'" class="ebx_mes_body"\n\t\t\tstyle="min-width : '+e+'">\n\t\t\t<div id="ebx_mes_loading_'+t+'" class="ebx_mes_loading">\n\t\t\t\t'+EBX_LocalizedMessage.comboBox_loading+'\n\t\t\t</div>\n\t\t\t<div id="ebx_mes_msg_empty_'+t+'"  class="ebx_mes_msg_empty">\n\t\t\t\t'+EBX_LocalizedMessage.comboBox_empty+'\n\t\t\t</div>\n\t\t\t<div id="ebx_mes_tree_ctn_'+t+'" class="ebx_mes_tree_ctn"\n\t\t\t\tonScroll="MES_Panel.onScrollItems()">\n\t\t\t\t<div id="ebx_mes_tree_'+t+'" class="ebx_mes_tree"></div>\n\t\t\t</div>\n\t\t</div>'},this.dataLoader=new o.MES_DataLoader(this.componentIndex)}return e.prototype.addTreeItems=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];this.addTreeItem(n,t)}if(null==t.parent){if(e.length>0&&EBX_Utils.removeCSSClass(this.panelBody,r.ModelElementSelector_CSS.EMPTY),EBX_Utils.addCSSClass(this.panelBody,r.ModelElementSelector_CSS.LOADED),1===e.length){var s=t.children[0];s.isLeaf||(s.isLoading=!0,s.expanded=!0)}this.widgetTree.render(),this.panel.visible?this.resize.refreshPanelDimensions():t.collapse()}},e.prototype.addTreeItem=function(e,t){var i=this,s=n({},e,{html:this.templateItem(e)}),r=new YAHOO.widget.HTMLNode(s,t);return e.isLeaf||r.setDynamicLoad((function(t,n){e.loadChildren((function(e){i.isVisible()&&(i.addTreeItems(e,t),n())}),i.onLoadingFail)}),1),e.isSeeMore&&(r.contentStyle+=" ebx_ValueND"),r},e.prototype.showPanelAndRefreshTree=function(e){var t=this;this.show(),this.clearTree(),this.dataLoader.loadRoots(e,(function(e,i){t.isVisible()&&(i&&t.resize.updateForcedSize(i),t.addTreeItems(e,t.widgetTree.getRoot()))}),this.onLoadingFail)},e.prototype.show=function(){this.isVisible()||(this.panel||this.initPanel(),this.widgetTree.subscribe("clickEvent",this.onTreeClick),this.resize.refreshPanelDimensions(),this.panel.show(),this.panel.visible=!0)},e.prototype.isVisible=function(){return this.panel&&this.panel.visible},e.prototype.hide=function(){this.panel&&(this.widgetTree.unsubscribeAll("clickEvent"),this.clearTree(),this.panel.hide(),this.panel.visible=!1)},e.prototype.clearTree=function(){this.widgetTree&&(this.widgetTree.removeChildren(this.widgetTree.getRoot()),this.widgetTree.render()),this.panelBody&&(EBX_Utils.removeCSSClass(this.panelBody,r.ModelElementSelector_CSS.LOADED),EBX_Utils.addCSSClass(this.panelBody,r.ModelElementSelector_CSS.EMPTY)),this.hoveredNode=null},e.prototype.refreshPanelAlignment=function(){null!==this.panel&&this.panel.align("tl","bl",[-1,-1])},e.prototype.onNodeHighlightSearch=function(e,t){var i=this.widgetTree.getNodeByElement(e);if(i&&i.getContentEl()){var n=EBX_Utils.getFirstRecursiveChildMatchingCSSClass(i.getContentEl(),r.ModelElementSelector_CSS.ITEM_HELP);if(!n)return;t?EBX_Utils.removeCSSClass(n,r.ModelElementSelector_CSS.NOT_SELECTED):EBX_Utils.addCSSClass(n,r.ModelElementSelector_CSS.NOT_SELECTED)}},e.prototype.onNodeHighlight=function(e,t){var i=t.pageX,n=t.pageY;if(i!==this.mousePosition.left||n!==this.mousePosition.top){this.mousePosition.left=i,this.mousePosition.top=n;var s=this.widgetTree.getNodeByElement(e);this.highlightNode(s,!1)}},e.prototype.highlightNode=function(t,i){if(this.hoveredNode&&this.hoveredNode.unhighlight(),this.hoveredNode=t,t&&(t.highlight(),i)){var n=e.getAbsoluteTopOf(t),s=t.getContentEl().offsetHeight,r=this.treeContainer.scrollTop,o=this.treeContainer.clientHeight;if(n<r+2*EBX_ISS.listScrollPadding)this.treeContainer.scrollTop=n-2*EBX_ISS.listScrollPadding;else n+s+2*EBX_ISS.listScrollPadding>r+o&&(this.treeContainer.scrollTop=n+s+2*EBX_ISS.listScrollPadding-o)}},e.prototype.onClickItemHelp=function(e,t){var i=this.widgetTree.getNodeByElement(e);i&&(EBX_NodeDocumentation.docPanels[i.data.id]||(EBX_NodeDocumentation.docPanels[i.data.id]=i.data.urlInfos),YAHOO.util.Event.stopEvent(t),this.linkedInput.focus(),EBX_NodeDocumentation.displayDocumentation(e))},e.prototype.initPanel=function(){var e=this,t="panel-"+this.widgetId;this.panel=new YAHOO.widget.Overlay(t,{width:this.linkedInput.offsetWidth+"px",visible:!1}),this.panel.cfg.setProperty("context",[this.linkedInput,"tl","bl",null,[0,0]]),this.panel.render(document.body);var i=this.templatePanel();this.panel.setBody(i),YAHOO.util.Event.addListener(this.panel.body,"click",(function(){YAHOO.util.Event.stopEvent(event),e.linkedInput.focus()})),this.treeContainer=document.getElementById(r.ModelElementSelector_CSS.ID_TREE_CTN+this.widgetId),this.panelBody=document.getElementById(r.ModelElementSelector_CSS.ID_BODY+this.widgetId),this.widgetTree=new YAHOO.widget.TreeView(r.ModelElementSelector_CSS.ID_TREE+this.widgetId),this.widgetTree.setNodesProperty("propagateHighlightUp",!0),this.widgetTree.singleNodeHighlight=!0,this.widgetTree.subscribe("expandComplete",(function(t){e.selectNodeFirstChildAfterExpand&&(e.selectNodeFirstChildAfterExpand=!1,e.highlightNode(t.children[0],!0))})),this.widgetTree.subscribe("clickEvent",this.onTreeClick),this.widgetTree.subscribe("expand",(function(){e.linkedInput.focus()})),this.widgetTree.subscribe("collapse",(function(){e.linkedInput.focus()})),this.resize=new l.MES_Panel_Resize(this.widgetId,this.componentIndex,this.linkedInput,this.panelBody,this.widgetTree,this.panel,this.parentContainer,this.treeContainer),this.computeDefaultPanelMinHeight()},e.prototype.computeDefaultPanelMinHeight=function(){EBX_Utils.addCSSClass(this.panelBody,r.ModelElementSelector_CSS.LOADED),this.widgetTree.render();var e=this.widgetTree.getEl().offsetHeight,t=this.addTreeItem({id:"XXXX",label:"#UNKNOWN"},this.widgetTree.getRoot());this.widgetTree.render(),e+=8.5*(this.widgetTree.getEl().offsetHeight-e),this.widgetTree.removeNode(t,!0),this.widgetTree.render(),EBX_Utils.removeCSSClass(this.panelBody,r.ModelElementSelector_CSS.LOADED),this.resize.setPanelMinHeight(e)},e.onScrollItems=function(){EBX_NodeDocumentation.hideCurrentDocumentationNow()},e.getAbsoluteTopOf=function(e){for(var t=0;e;)t+=e.getEl().offsetTop,e=e.parent;return t},e.prototype.processKeyBoardEvent=function(e){if(!this.isVisible())return!1;if(e.keyCode===EBX_Utils.keyCodes.ENTER){if(this.hoveredNode){YAHOO.util.Event.stopEvent(e);var t=this.hoveredNode.data;t.isEnabled&&(t.isSeeMore?this.loadNextItems(this.hoveredNode):this.onSelectValue(t))}return!0}if(e.keyCode===EBX_Utils.keyCodes.LEFT||e.keyCode===EBX_Utils.keyCodes.RIGHT||e.keyCode===EBX_Utils.keyCodes.UP||e.keyCode===EBX_Utils.keyCodes.DOWN){var i=null;return e.keyCode===EBX_Utils.keyCodes.UP&&this.hoveredNode&&(i=this.hoveredNode.previousSibling),e.keyCode===EBX_Utils.keyCodes.DOWN&&(i=this.hoveredNode?this.hoveredNode.nextSibling:this.widgetTree.getRoot().children[0]),e.keyCode===EBX_Utils.keyCodes.LEFT&&this.hoveredNode&&(i=this.hoveredNode.parent),e.keyCode===EBX_Utils.keyCodes.RIGHT&&this.hoveredNode&&!this.hoveredNode.isLeaf&&(this.hoveredNode.childrenRendered?(this.hoveredNode.expand(),i=this.hoveredNode.children[0]):(this.selectNodeFirstChildAfterExpand=!0,this.hoveredNode.expand())),i&&i!==this.widgetTree.getRoot()&&this.highlightNode(i,!0),YAHOO.util.Event.stopEvent(e),!0}return!1},e}();t.MES_Panel=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.formScrollCtn=e,this.gutterBottom=YAHOO.widget.Overlay.VIEWPORT_OFFSET,this.scrollMaker=void 0,this.formExtraHeightBottom=0,this.oldScrollTop=null,this.init()}return e.prototype.init=function(){this.scrollMaker=document.createElement("div"),this.scrollMaker.className="ebx_scrollMaker",this.formScrollCtn.appendChild(this.scrollMaker),this.formExtraHeightBottom=this.getFormExtraHeightBottom(),this.gutterBottom=this.computeGutterBottom()},e.prototype.getFormExtraHeightBottom=function(){var e=YAHOO.util.Dom,t=e.getRegion(this.formScrollCtn),i=e.getRegion(this.scrollMaker),n=t.bottom-i.bottom;return n<0&&(n=0),n},e.prototype.isElemOverflowing=function(){return null!==this.oldScrollTop},e.prototype.makeElementDisplayed=function(e){var t=YAHOO.util.Dom,i=t.getRegion(e),n=t.getClientRegion(),s=i.bottom-n.bottom+this.gutterBottom;if(s>0){this.formExtraHeightBottom>0&&(this.formScrollCtn.style.overflowY="hidden");var r=this.formExtraHeightBottom+s;this.scrollMaker.style.height=r+"px",this.oldScrollTop=this.formScrollCtn.scrollTop,this.formScrollCtn.fixedScrollTop=this.oldScrollTop+r,this.formScrollCtn.scrollTop=this.formScrollCtn.fixedScrollTop}},e.prototype.computeGutterBottom=function(){var e=YAHOO.util.Dom,t=e.getClientRegion(),i=e.getRegion(this.formScrollCtn);return t.bottom-i.bottom+YAHOO.widget.Overlay.VIEWPORT_OFFSET-2},e.prototype.reset=function(){this.scrollMaker.style.height="",this.formScrollCtn.style.overflowY="",null!==this.oldScrollTop&&(this.formScrollCtn.fixedScrollTop=this.oldScrollTop,this.formScrollCtn.scrollTop=this.formScrollCtn.fixedScrollTop,this.oldScrollTop=null)},e.getScrollMaker=function(t){var i=EBX_Form.getFormScrollingContainer(t),n=!1,s=0,r=null;if(null!==i){for(;!n&&s<e.instances.length;)(r=e.instances[s]).formScrollCtn===i&&(n=!0),s++;n||(r=new e(i),e.instances.push(r))}return r},e.instances=[],e}();t.EBX_ScrollMaker=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(19),s=function(){function e(){}return e.isInExtension=function(){return!!EBX_LayoutManager.WorkspaceContentAreaEl&&EBX_LayoutManager.WorkspaceContentAreaEl.classList.contains("ebx_ExtensionNode_ContentArea")},e.isExtensionFrameHeader=function(t){return!(!t||!e.isInExtension())&&t.classList.contains("ebx_ExtensionNode_Header")},e.getFormBodyHeightInExtension=function(e){return e-EBX_Form.getWorkspaceFormBottomBarHeight()},e.switchFullscreenState=function(){e.isInFullscreen=!e.isInFullscreen,window.parent.EBX_ModelExtensionsContainer.changeExtensionFullscreenDisplay(window.frameElement,e.isInFullscreen);var t=document.getElementById("ebx_ExtensionNode_FullscreenSwitch");e.isInFullscreen?(t.classList.remove(EBX_UIButtonIcon.BLOCK_EXPAND),t.classList.add(EBX_UIButtonIcon.BLOCK_COLLAPSE),t.title=EBX_ModelExtensionFrameMessages.fullscreenOff):(t.classList.add(EBX_UIButtonIcon.BLOCK_EXPAND),t.classList.remove(EBX_UIButtonIcon.BLOCK_COLLAPSE),t.title=EBX_ModelExtensionFrameMessages.fullscreenOn),n.EBX_Fullscreen.saveFullscreenStateOnServer(e.isInFullscreen)},e.isInFullscreen=!1,e}();t.EBX_ModelExtensionFrame=s;var r=function(){function e(){}return e.blockSubmitIfExtensionsAreModified=function(){for(var e=[],t=document.querySelectorAll(".ebx_ExtensionNode_Frame"),i=0;i<t.length;i++){var n=t.item(i).contentWindow;n.hasOwnProperty("EBX_Loader")&&n.EBX_Loader.onbeforeunload()&&e.push(n)}if(0===e.length)return!0;var s=(e.length>1?EBX_ModelExtensionsContainerMessages.extensionsNotSaved:EBX_ModelExtensionsContainerMessages.singleExtensionNotSaved)+"\n                    <ul>\n            "+e.map((function(e){return"<li>"+e.EBX_LayoutManager.getWorkspaceTitleH2().innerText+"</li>"})).join("")+"\n                    </ul>";return ebx_alert(EBX_ModelExtensionsContainerMessages.tabTitle,s),!1},e.disableExtensionsUnloadCheck=function(){for(var e=document.querySelectorAll(".ebx_ExtensionNode_Frame"),t=0;t<e.length;t++){e.item(t).contentWindow.onbeforeunload=function(){}}},e.synchroniseExtensionsUnloadWithSubmitRevert=function(){EBX_Form.addCustomCheckBeforeSubmit(e.blockSubmitIfExtensionsAreModified);var t=document.getElementById(EBX_Form.WorkspaceFormFooterId);if(t){var i=t.firstElementChild.lastElementChild;if(i.onclick){var n=i.onclick;i.onclick=function(t){e.disableExtensionsUnloadCheck(),n.call(this,t)}}}},e.changeExtensionFullscreenDisplay=function(e,t){var i=EBX_Utils.getFirstParentMatchingCSSClass(e,"ebx_ExtensionNode_Wrapper");i&&(t?i.classList.add("ebx_ExtensionNode_Wrapper-in-fullscreen"):i.classList.remove("ebx_ExtensionNode_Wrapper-in-fullscreen"))},e}();t.EBX_ModelExtensionsContainer=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.displayButtonIfInHybrid=function(){var e=EBX_Utils.getWindowStackToHybridParentFrame();e&&!EBX_LayoutManager.isEmbedded()&&(e[0].EBX_HybridFullscreenHandler&&document.getElementById(EBX_Fullscreen_Constants.changeFullScreenButtonId).classList.remove(EBX_Fullscreen_Constants.changeFullScreenButtonHiddenClassname))},e.switchFullscreenState=function(){e.changeFullscreenState(!e.isInFullscreen())},e.changeFullscreenState=function(t){if(t!==e.isInFullscreen()){var i=EBX_Utils.getWindowStackToHybridParentFrame();if(i){var n=i[0].EBX_HybridFullscreenHandler;n&&n.changeFullscreen(!!t)}}},e.refreshWorkspaceDisplay=function(e){var t=document.getElementById(EBX_Fullscreen_Constants.changeFullScreenButtonId);e?(document.body.classList.add("ebx_fullscreen"),t&&(t.classList.remove(EBX_UIButtonIcon.ENTER_FULLSCREEN),t.classList.add(EBX_UIButtonIcon.EXIT_FULLSCREEN),t.title=EBX_Fullscreen_Constants.exitFullscreenLabel),EBX_LayoutManager.collapseNavigationPane()):(document.body.classList.remove("ebx_fullscreen"),t&&(t.classList.add(EBX_UIButtonIcon.ENTER_FULLSCREEN),t.classList.remove(EBX_UIButtonIcon.EXIT_FULLSCREEN),t.title=EBX_Fullscreen_Constants.enterFullscreenLabel),EBX_LayoutManager.expandNavigationPane())},e.onFullscreenStateChange=function(t){EBX_LayoutManager.isEmbedded()||e.saveFullscreenStateOnServer(t),e.refreshWorkspaceDisplay(t);for(var i=0,n=e.onChangeListeners.length;i<n;i++)e.onChangeListeners[i](t)},e.syncStateWithParent=function(){var t=EBX_Utils.getWindowStackToHybridParentFrame();if(t){var i=t[0].EBX_HybridFullscreenHandler;if(i){i.addListener({scope:window,onChange:function(t){e.onFullscreenStateChange(t)}});var n=e.isInFullscreen();EBX_Fullscreen_Constants.wasInFullscreenWhilePageBuild!==n&&e.onFullscreenStateChange(n)}}},e.isInFullscreen=function(){var e=EBX_Utils.getWindowStackToHybridParentFrame();if(e){var t=e[0].EBX_HybridFullscreenHandler;return!!t&&t.isInFullscreen()}},e.addListener=function(t){e.onChangeListeners.push(t)},e.removeListener=function(t){var i=e.onChangeListeners.indexOf(t);-1!==i&&e.onChangeListeners.splice(i,1)},e.saveFullscreenStateOnServer=function(t){e.lastChangeFullscreenRequestID||(e.lastChangeFullscreenRequestID=EBX_Fullscreen_Constants.lastChangeFullscreenRequestID),e.lastChangeFullscreenRequestID++;var i=EBX_Fullscreen_Constants.saveChangeFullscreenUrl.replace("%0",""+t).replace("%1",""+e.lastChangeFullscreenRequestID);e.saveChangeFullscreenRequester.sendRequest(i)},e.saveChangeFullscreenRequester=new YAHOO.util.XHRDataSource("",{responseType:YAHOO.util.DataSource.TYPE_TEXT}),e.onChangeListeners=[],e.lastChangeFullscreenRequestID=void 0,e}();t.EBX_Fullscreen=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),s=i(2),r=i(21),o=i(3),l=i(12),a=i(22),d=i(36),u=i(0),c=i(9),h=i(37),p=i(38),m=i(8),g=i(42),f=i(15),b=i(16),E=i(43),C=i(44),_=i(47),S=i(4),v=i(19),y=i(18);window.EBX_AjaxTable=u.EBX_AjaxTable,window.EBX_Table_State=u.EBX_Table_State,window.AdvancedSearch=n.AdvancedSearch,window.AdvancedSearchActions=s.AdvancedSearchActions,window.AdvancedSearchComponents=r.AdvancedSearchComponents,window.AdvancedSearchModel=o.AdvancedSearchModel,window.AdvancedSearchPane=l.AdvancedSearchPane,window.AdvancedSearchReducers=a.AdvancedSearchReducers,window.AdvancedSearchSave=d.AdvancedSearchSave,window.FindInHierarchyComponents=p.FindInHierarchyComponents,window.EBX_AjaxTable_UIConstants=S.EBX_AjaxTable_UIConstants,window.EBX_FormNodeEditors_ReadOnly=c.EBX_FormNodeEditor_ReadOnly,window.EBX_ModelElementSelector=f.EBX_ModelElementSelector,window.EBX_MES_FormNodeEditor=g.EBX_MES_FormNodeEditor,window.EBX_ModelElementSelector_Registry=m.EBX_ModelElementSelector_Registry,window.MES_Panel=b.MES_Panel;var B=i(48);window.ResizeObserver=B,window.EBX_PasswordEdit=E.EBX_PasswordEdit,window.EBX_ScriptEditor=C.EBX_ScriptEditor,window.EBX_HierarchyWidgetFacade=h.EBX_HierarchyWidgetFacade,window.EBX_Fullscreen=v.EBX_Fullscreen,window.ebx_is_in_fullscreen=v.EBX_Fullscreen.isInFullscreen,window.ebx_change_fullscreen_display=v.EBX_Fullscreen.changeFullscreenState,window.ebx_on_fullscreen_display_change=v.EBX_Fullscreen.addListener,window.ebx_off_fullscreen_display_change=v.EBX_Fullscreen.removeListener,window.SearchTemplatesWidget=_.SearchTemplatesWidget,window.DefaultTemplatesWidgetController=_.DefaultTemplatesWidgetController,window.EBX_ModelExtensionFrame=y.EBX_ModelExtensionFrame,window.EBX_ModelExtensionsContainer=y.EBX_ModelExtensionsContainer},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e};Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),r=i(2),o=i(3),l=[];function a(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];null!=l?l.push((function(){e.apply(void 0,t)})):e.apply(void 0,t)}}function d(e,t){var i=!0,s=null;function r(t,i){var r=null;return EBX_Utils.forEach(Object.keys(e),(function(o){var l=e[o](t);(i||l!==s[o])&&(null==r&&(r=i?{}:n({},s)),r[o]=l)})),null!=r?r:s}return function(e,n){if(void 0===e&&(e=EBX_AdvancedSearch.state),void 0===n)return t(r(e,!0),void 0);i&&(s=r(n,i),i=!1);var o=r(e,i);o!==s&&(t(o,s),s=o)}}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t,i){void 0===t&&(t=EBX_AdvancedSearch.state),EBX_Utils.forEach(e,(function(e){e(t,i)}))}}function c(e,t,i){EBX_FormNodeIndex.nodes[e].eventAfterValueChanged={fn:t,arg:i}}function h(e){var t=ebx_form_getNodeMessage(e);return null!=t&&null!=t.errors&&t.errors.length>0}function p(e){e.preventDefault();var t=document.activeElement;if(null!=t){var i=document.createEvent("HTMLEvents");i.initEvent("blur",!0,!0),t.dispatchEvent(i)}return setTimeout(r.AdvancedSearchActions.applySearch,200),!1}!function(e){e.init=function(){if(null!=l){for(;l.length>0;){var e=l;l=[],EBX_Utils.forEach(e,(function(e){e()}))}l=null}},e.registerPane=a((function(e,t,i,o,l,a,c){function h(e){var t,i,s,o=function(e){var t=e.filter.allCriteriaIds.slice();null!=e.filter.additionalCriterionId&&t.push(e.filter.additionalCriterionId);var i=0;return EBX_Utils.forEach(t,(function(e){i=Math.max(i,parseInt(e,10))})),(++i).toFixed()}(e);t=o,i=c.replace(encodeURIComponent("$lineId"),t),(s=new EBX_AJAXResponseHandler).handleAjaxResponseSuccess=function(e){var i=document.createElement("div");i.innerHTML=e,S.appendChild(i),v.scrollTop=v.scrollHeight,r.AdvancedSearchActions.fetchCriterion_success({id:t,criterion:{field:"",operator:"",operand:void 0,isActivated:!1,hasError:!1}})},s.handleAjaxResponseFailed=function(){EBX_Logger.log("EBX_AjaxAdvancedSearch.ajaxAddCriterion: Failed for line "+t+".",EBX_Logger.error)},s.sendRequest(i);var l=null!=e.filter.additionalCriterionId?n({},e.filter,{allCriteriaIds:e.filter.allCriteriaIds.concat([e.filter.additionalCriterionId]),additionalCriterionId:void 0}):e.filter;return n({},e,{filter:l,fetchingCriterionId:o})}function m(){var e=b.parentElement.clientHeight,t=E.clientHeight,i=_.clientHeight;b.style.height=e-EBX_AdvancedSearch.parameters.searchPaneMargin+"px";var n=e-t-i;if(v.style.height=n-EBX_AdvancedSearch.parameters.searchPaneMargin+"px",v.scrollHeight>v.clientHeight){var s=EBX_Utils.getVScrollWidth();C.style.width=s+"px"}else C.style.width="0px"}s.AdvancedSearch.registerMiddleware((function(e,t,i){var n=e(t,i);if(t.name===r.AdvancedSearchActions.LoadFilter_success.NAME&&i.fetchingFilter&&function(e){var t=e.param;S.innerHTML=t.children[1].innerHTML}(t),null!=n.fetchingCriterionId)return n;if(null==n.filter.criterionByLineId)return h(n);if(t.name===r.AdvancedSearchActions.SelectColumn.NAME&&t.param.id===n.filter.additionalCriterionId)return h(n);return n}));var g,f=u(d({open:function(e){return e.open}},(function(e){e.open?(EBX_Utils.addCSSClass(b,"ebx_AdvancedSearchPaneOpened"),null!=g&&g.expand()):(EBX_Utils.removeCSSClass(b,"ebx_AdvancedSearchPaneOpened"),null!=g&&g.collapse());var t=document.createEvent("HTMLEvents");t.initEvent("resize",!0,!0),window.dispatchEvent(t)})),d({open:function(e){return e.open},criterionByLineId:function(e){return e.filter.criterionByLineId},additionalCriterionId:function(e){return e.filter.additionalCriterionId}},(function(e){e.open&&setTimeout(m)}))),b=document.getElementById(e),E=document.getElementById(t),C=document.getElementById(i),_=document.getElementById(o),S=document.getElementById(l),v=document.getElementById(a);b.addEventListener("submit",p);var y=EBX_LayoutManager.workspaceLayout.getUnitByPosition(EBX_LayoutManager.workspaceUnits.advancedSearch.position);"boolean"!=typeof y&&(g=y),s.AdvancedSearch.registerStateListener(f),EBX_Events.on(null,"resize",(function(){EBX_AdvancedSearch.state.open&&m()}))})),e.registerMessageContainer=a((function(e,t){var i=d({hasValidationCriterion:o.AdvancedSearchModel.hasValidationCriterion},(function(e){e.hasValidationCriterion?EBX_Utils.removeCSSClass(n,"ebx_dynamicHidden"):EBX_Utils.addCSSClass(n,"ebx_dynamicHidden")})),n=document.getElementById(e);t&&s.AdvancedSearch.registerStateListener(i),i()})),e.registerGlobalInput=a((function(e){var t=d({open:function(e){return e.open}},(function(e){e.open?EBX_Utils.addCSSClass(i,"ebx_AdvancedSearchPaneOpened"):EBX_Utils.removeCSSClass(i,"ebx_AdvancedSearchPaneOpened")})),i=document.getElementById(e);i.addEventListener("submit",p),s.AdvancedSearch.registerStateListener(t)})),e.registerQuickSearchInput=a((function(e){var t=d({quickSearch:function(e){return e.filter.quickSearch}},(function(e){var t=e.quickSearch;return l.value=t})),i=function(){r.AdvancedSearchActions.updateQuickSearch(l.value)},n=EBX_Utils.debounce(i,void 0),o=function(e,i,n){i.name===r.AdvancedSearchActions.ClearQuickSearch.NAME&&l.focus();var a=e(i,n);if(i.name===r.AdvancedSearchActions.LoadFilter_success.NAME){var d=l.parentElement;if(s.AdvancedSearch.unregisterMiddleware(o),s.AdvancedSearch.unregisterStateListener(t),null!=d){d.removeChild(l);var u=i.param;d.innerHTML=u.children[0].children[0].innerHTML}}return a};s.AdvancedSearch.registerMiddleware(o);var l=document.getElementById(e).children[0];l.addEventListener("keyup",n),l.addEventListener("change",i),s.AdvancedSearch.registerStateListener(t),EBX_FormPresenter.addAPVElementListener(l)})),e.registerQuickSearchClearButton=a((function(e){var t=d({quickSearch:function(e){return e.filter.quickSearch}},(function(e){""===e.quickSearch?EBX_Utils.addCSSClass(i,"ebx_Hidden"):EBX_Utils.removeCSSClass(i,"ebx_Hidden")})),i=document.getElementById(e);i.addEventListener("click",(function(){r.AdvancedSearchActions.clearQuickSearch()})),s.AdvancedSearch.registerStateListener(t),t()})),e.registerQuickSearchApplyButton=a((function(e){var t=u(d({open:function(e){return e.open},isEnabled:function(e){return o.AdvancedSearchModel.isSearchEnabled(e)}},(function(e,t){var n=e.open,s=e.isEnabled,r=!n&&s;EBX_ButtonUtils.setButtonDisabled(i,!r),null!=t&&n===t.open||(n?EBX_Utils.addCSSClass(i,"ebx_Hidden"):EBX_Utils.removeCSSClass(i,"ebx_Hidden")),null!=t&&s===t.isEnabled||(s?(EBX_Utils.addCSSClass(i,"ebx_Button"),EBX_Utils.addCSSClass(i,"ebx_DefaultButton"),EBX_Utils.removeCSSClass(i,"ebx_FlatButtonNoBorder")):(EBX_Utils.removeCSSClass(i,"ebx_Button"),EBX_Utils.removeCSSClass(i,"ebx_DefaultButton"),EBX_Utils.addCSSClass(i,"ebx_FlatButtonNoBorder")))})),d({hasError:function(e){return o.AdvancedSearchModel.hasError(e)},isEnabled:function(e){return o.AdvancedSearchModel.isSearchEnabled(e)},isSearchDefined:function(e){return""!==e.filter.quickSearch},isCriterionDefined:function(e){return o.AdvancedSearchModel.getNumberOfActivatedCriteria(e)>0}},(function(e){var t,n=e.hasError,s=e.isEnabled,r=e.isSearchDefined,o=e.isCriterionDefined,l=EBX_AdvancedSearch.messages.quickSearch.submit.tooltips;t=n?l.someErrors:r||o?r&&!o?s?l.someSearchNoCriteriaEnabled:l.someSearchNoCriteriaDisabled:r&&o?s?l.someSearchSomeCriteriaEnabled:l.someSearchSomeCriteriaDisabled:s?l.noSearchSomeCriteriaEnabled:l.noSearchSomeCriteriaDisabled:s?l.noSearchNoCriteriaEnabled:l.noSearchNoCriteriaDisabled,i.title=t}))),i=document.getElementById(e);s.AdvancedSearch.registerStateListener(t),t()})),e.registerSummary=a((function(e){var t=d({appliedCriteria:function(e){return o.AdvancedSearchModel.getNumberOfAppliedCriteria(e)}},(function(e){var t=e.appliedCriteria;i.textContent=t+"",0===t?EBX_Utils.addCSSClass(i,"ebx_dynamicHidden"):(EBX_Utils.removeCSSClass(i,"ebx_dynamicHidden"),i.title=1===t?t+" "+EBX_AdvancedSearch.expandCollapse.filterAppliedMessage:t+" "+EBX_AdvancedSearch.expandCollapse.filtersAppliedMessage)})),i=document.getElementById(e);s.AdvancedSearch.registerStateListener(t),t()})),e.registerToolbarFiller=a((function(e){var t=d({open:function(e){return e.open}},(function(e){e.open?EBX_Utils.removeCSSClass(i,"ebx_Hidden"):EBX_Utils.addCSSClass(i,"ebx_Hidden")})),i=document.getElementById(e);s.AdvancedSearch.registerStateListener(t),t()})),e.registerToolbarApplyButton=a((function(e,t){var i=u(d({open:function(e){return e.open}},(function(e){e.open&&n()})),d({isEnabled:function(e){return o.AdvancedSearchModel.isSearchEnabled(e)}},(function(e){var t=e.isEnabled;EBX_ButtonUtils.setButtonDisabled(r,!t),t?(EBX_Utils.addCSSClass(r,"ebx_Button"),EBX_Utils.addCSSClass(r,"ebx_DefaultButton"),EBX_Utils.removeCSSClass(r,"ebx_FlatButtonNoBorder")):(EBX_Utils.removeCSSClass(r,"ebx_Button"),EBX_Utils.removeCSSClass(r,"ebx_DefaultButton"),EBX_Utils.addCSSClass(r,"ebx_FlatButtonNoBorder"))})),d({hasError:function(e){return o.AdvancedSearchModel.hasError(e)},isEnabled:function(e){return o.AdvancedSearchModel.isSearchEnabled(e)},isSearchDefined:function(e){return""!==e.filter.quickSearch},isCriterionDefined:function(e){return o.AdvancedSearchModel.getNumberOfActivatedCriteria(e)>0}},(function(e){var t,i=e.hasError,n=e.isEnabled,s=e.isSearchDefined,o=e.isCriterionDefined,l=EBX_AdvancedSearch.messages.pane.submit.tooltips;t=i?l.someErrors:s||o?s&&!o?n?l.someSearchNoCriteriaEnabled:l.someSearchNoCriteriaDisabled:s&&o?n?l.someSearchSomeCriteriaEnabled:l.someSearchSomeCriteriaDisabled:n?l.noSearchSomeCriteriaEnabled:l.noSearchSomeCriteriaDisabled:n?l.noSearchNoCriteriaEnabled:l.noSearchNoCriteriaDisabled,r.title=t}))),n=function(){r.style.left=l.offsetLeft+"px"},r=document.getElementById(e),l=document.getElementById(t);s.AdvancedSearch.registerStateListener(i),i(),EBX_Events.on(null,"resize",(function(){EBX_AdvancedSearch.state.open&&n()}))})),e.registerActivateAll=a((function(e){var t=EBX_Utils.memoize((function(e){var t=e.allCriteriaIds,i=e.criterionByLineId;if(0===t.length)return!1;for(var n=0,s=t;n<s.length;n++){if(!i[s[n]].isActivated)return!1}return!0})),i=u(d({isChecked:function(e){return t({allCriteriaIds:e.filter.allCriteriaIds,criterionByLineId:e.filter.criterionByLineId})}},(function(e){var t=e.isChecked;n.checked=t})),d({isActive:function(e){return e.filter.allCriteriaIds.length>0}},(function(e){var t=e.isActive;n.disabled=!t}))),n=document.getElementById(e);s.AdvancedSearch.registerStateListener(i),i()})),e.registerLine=a((function(e){var t=e.lineId,i=e.elementId,n=e.operatorContainerId,o=e.valuesContainerId,l=e.fetchValuesUrl,a=e.fetchOperatorUrl,c=u(d({additionalCriterionId:function(e){return e.filter.additionalCriterionId},allCriteriaIds:function(e){return e.filter.allCriteriaIds}},(function(e){var i=e.additionalCriterionId,n=e.allCriteriaIds;if(i!==t&&!EBX_Utils.arrayContains(n,t)){var r=m.parentElement;null!=r&&r.removeChild(m),s.AdvancedSearch.unregisterStateListener(c)}})),d({isFetching:function(e){return e.fetchingColumns&&e.fetchingColumns[t]}},(function(e){if(e.isFetching){var i=new EBX_AJAXResponseHandler;i.handleAjaxResponseSuccess=function(e){r.AdvancedSearchActions.selectColumn_success(t);var i=document.createElement("div");i.innerHTML=e,g.innerHTML=i.children[0].innerHTML,f.innerHTML=i.children[1].innerHTML,p(),h()},i.handleAjaxResponseFailed=function(){EBX_Logger.log("EBX_AjaxAdvancedSearch.ajaxSelectCriterion: Failed for line "+t+".",EBX_Logger.error)},i.sendRequest(a)}})),d({isFetching:function(e){return e.fetchingOperators&&e.fetchingOperators[t]}},(function(e){if(e.isFetching){var i=new EBX_AJAXResponseHandler;i.handleAjaxResponseSuccess=function(e){r.AdvancedSearchActions.selectOperator_success(t),f.innerHTML=e,p()},i.handleAjaxResponseFailed=function(){EBX_Logger.log("AdvancedSearchComponents.registerLineValues: Fetch failed for line "+t+".",EBX_Logger.error)},i.sendRequest(l)}}))),h=function(){g.childElementCount>0?EBX_Utils.removeCSSClass(g,"ebx_dynamicHidden"):EBX_Utils.addCSSClass(g,"ebx_dynamicHidden")},p=function(){for(var e=0,t=EBX_Utils.getRecursiveChildrenMatchingCSSClass(f,EBX_Form.APVElementCSSClass);e<t.length;e++){var i=t[e];EBX_FormPresenter.addAPVElementListener(i)}},m=document.getElementById(i),g=document.getElementById(n),f=document.getElementById(o);s.AdvancedSearch.registerStateListener(c),h()})),e.registerLineActivateInput=a((function(e,t,i){var n=d({activated:function(e){var i=e.filter.criterionByLineId[t];if(null!=i)return i.isActivated}},(function(e){var t=e.activated;void 0!==t&&("true"===ebx_form_getValue(i)[0]!==t&&ebx_form_setValue(i,t))})),o=function(e,i,r){var l=e(i,r);return null==l.filter.criterionByLineId[t]&&(s.AdvancedSearch.unregisterStateListener(n),s.AdvancedSearch.unregisterMiddleware(o)),l};document.getElementById(e).addEventListener("click",(function(){r.AdvancedSearchActions.toggleLineActivation(t)})),s.AdvancedSearch.registerStateListener(n),s.AdvancedSearch.registerMiddleware(o)})),e.registerEndOfLine=a((function(e,t,i){var n=d({additionalCriterionId:function(e){return e.filter.additionalCriterionId}},(function(t){t.additionalCriterionId===e?EBX_Utils.addCSSClass(l,"ebx_dynamicHidden"):EBX_Utils.removeCSSClass(l,"ebx_dynamicHidden")})),o=function(t,l,a){var d=t(l,a);if(l.name!==r.AdvancedSearchActions.LoadFilter_success.NAME&&null==d.filter.criterionByLineId[e]){s.AdvancedSearch.unregisterStateListener(n),s.AdvancedSearch.unregisterMiddleware(o);var u=new EBX_AJAXResponseHandler;u.handleAjaxResponseSuccess=function(){},u.handleAjaxResponseFailed=function(){},u.sendRequest(i)}return d},l=document.getElementById(t);s.AdvancedSearch.registerStateListener(n),s.AdvancedSearch.registerMiddleware(o)})),e.registerOperator=a((function(e,t){c(t,(function(t){r.AdvancedSearchActions.selectOperator({id:e,value:t.key})})),r.AdvancedSearchActions.initOperator({id:e,value:ebx_form_getValue(t).key})})),e.registerWidget=a((function(e,t,i,n){function s(i){var s=i;null!=n&&null!=i&&(s=n(s)),r.AdvancedSearchActions.setValue({id:e,value:s,hasError:h(t)})}if(c(t,s),s(ebx_form_getValue(t)),null!=i)for(var o=document.getElementById(i).getElementsByTagName("input"),l=function(e){var t=o[e],i=function(){var e=document.createEvent("HTMLEvents");e.initEvent("blur",!0,!0),t.dispatchEvent(e)},n=EBX_Utils.debounce(i,void 0);t.addEventListener("keydown",(function(e){e.keyCode===EBX_Utils.keyCodes.ENTER&&i()})),t.addEventListener("keyup",n),t.addEventListener("change",i),EBX_FormPresenter.addAPVElementListener(t)},a=0;a<o.length;a++)l(a)})),e.registerDateWidget=function(t,i,n){e.registerWidget(t,i,n,(function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}))},e.registerTimeWidget=function(t,i,n){e.registerWidget(t,i,n,(function(e){return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}))},e.registerDateTimeWidget=function(t,i,n){e.registerWidget(t,i,n,(function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"T"+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}))},e.registerFkWidget=function(t,i){e.registerWidget(t,i,null,(function(e){return EBX_Utils.map(e,(function(e){return e.key}))}))},e.registerSaveButton=a((function(e){var t=d({isEnabled:function(e){return o.AdvancedSearchModel.isSaveEnabled(e)}},(function(e){var t=e.isEnabled;EBX_ButtonUtils.setButtonDisabled(i,!t)})),i=document.getElementById(e);s.AdvancedSearch.registerStateListener(t),t()}));var t=!1;e.registerLoadButton=a((function(e,i){if(!t){t=!0,s.AdvancedSearch.registerMiddleware((function(t,s,l){var a=t(s,l);if(s.name===r.AdvancedSearchActions.SaveCurrentFilter_success.NAME||s.name===r.AdvancedSearchActions.DeleteFilter_success.NAME){var d=new EBX_AJAXResponseHandler;d.handleAjaxResponseSuccess=function(t){var i=document.createElement("div");i.innerHTML=t,o.replaceChild(i.children[0],n),n=document.getElementById(e)},d.handleAjaxResponseFailed=function(){},d.sendRequest(i)}if(s.name===r.AdvancedSearchActions.DeleteFilter.NAME){var u=s.param,c=EBX_AdvancedSearch.requestLinks.filterDelete.replace(encodeURIComponent("$pk"),u);EBX_Utils.openInternalPopupWithSize(c,400,200,{isResizable:!1})}return a}));var n=document.getElementById(e),o=n.parentElement}}))}(t.AdvancedSearchComponents||(t.AdvancedSearchComponents={}))},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e};Object.defineProperty(t,"__esModule",{value:!0});var s=i(0),r=i(1),o=i(2),l=i(3);!function(e){var t=o.AdvancedSearchActions.ApplySearch,i=o.AdvancedSearchActions.ClearQuickSearch,a=o.AdvancedSearchActions.FetchCriterion_success,d=o.AdvancedSearchActions.InitCurrentFilter,u=o.AdvancedSearchActions.InitOperator,c=o.AdvancedSearchActions.LoadFilter,h=o.AdvancedSearchActions.LoadFilter_failure,p=o.AdvancedSearchActions.LoadFilter_success,m=o.AdvancedSearchActions.RemoveCriterion,g=o.AdvancedSearchActions.SelectColumn,f=o.AdvancedSearchActions.SelectColumn_success,b=o.AdvancedSearchActions.SelectOperator,E=o.AdvancedSearchActions.SelectOperator_success,C=o.AdvancedSearchActions.SetAllLinesActivation,_=o.AdvancedSearchActions.SetFetchingData,S=o.AdvancedSearchActions.SetFetchingData_cancel,v=o.AdvancedSearchActions.SetFetchingData_success,y=o.AdvancedSearchActions.SetFetchingData_uncertain,B=o.AdvancedSearchActions.SetValue,x=o.AdvancedSearchActions.ToggleLineActivation,w=o.AdvancedSearchActions.TogglePanel,I=o.AdvancedSearchActions.UpdateQuickSearch;function T(e,t){return function(i,s,r){var o=null;return EBX_Utils.forEach(Object.keys(e),(function(t){var l=s[t],a=e[t](i,l,r);l!==a&&(null==o&&(o=n({},s)),o[t]=a)})),null==o&&(o=s),null!=t?t(i,o,r):o}}var R=T({quickSearch:function(e,t,n){switch(e){case I.NAME:return n;case i.NAME:return""}return t},criterionByLineId:function(e,t,i){switch(e){case x.NAME:return function(e,t){var i,s=e[t];return null==s?e:n({},e,((i={})[t]=n({},s,{isActivated:!s.isActivated}),i))}(t,i);case B.NAME:return function(e,t){var i=t.id,s=t.value,r=t.hasError,o=e[i];if(null==o)return e;var a,d=o.operand,u=!l.AdvancedSearchModel.operandEquals(d,s);return u||o.hasError!==r?n({},e,((a={})[i]=n({},o,{hasError:r,operand:u?s:d}),a)):e}(t,i)}return t}},(function(e,t,i){switch(e){case m.NAME:return function(e,t){return EBX_Utils.arrayContains(e.allCriteriaIds,t)?n({},e,{criterionByLineId:EBX_Utils.filterObject(e.criterionByLineId,(function(e,i){return i!==t})),allCriteriaIds:EBX_Utils.filter(e.allCriteriaIds,(function(e){return e!==t}))}):e}(t,i);case C.NAME:return function(e,t){var i={},s=!1;if(EBX_Utils.forEach(e.allCriteriaIds,(function(r){var o=e.criterionByLineId[r];o.isActivated!==t?(s=!0,i[r]=n({},o,{isActivated:t})):i[r]=o})),!s)return e;var r=e.additionalCriterionId;return null!=r&&(i[r]=e.criterionByLineId[r]),n({},e,{criterionByLineId:i})}(t,i);case d.NAME:return i}return t}));r.AdvancedSearch.registerReducer(T({open:function(e,t,i){switch(e){case w.NAME:return i}return t},filter:R},(function(e,i,r){switch(e){case a.NAME:return function(e,t){var i,s=t.id,r=t.criterion;return n({},e,{filter:n({},e.filter,{criterionByLineId:n({},e.filter.criterionByLineId,(i={},i[s]=r,i)),additionalCriterionId:s}),fetchingCriterionId:void 0})}(i,r);case t.NAME:return function(e,t){if(e.fetchingData||!t&&!l.AdvancedSearchModel.isSearchEnabled(e))return e;var i=EBX_AdvancedSearch.hierarchyName;if(null!=i)ebx_ajaxTreeReplaceChildren(i,"","&$ajaxTree_applyFilter=true");else{var r=s.EBX_AjaxTable.AjaxTableRegister[EBX_AdvancedSearch.ajaxTableName];if(void 0===r)return EBX_Logger.log("AdvancedSearchView.searchFilter: Table with name "+EBX_AdvancedSearch.ajaxTableName+" is not registered.",EBX_Logger.error),e;r.content.applyFilter()}return n({},e,{fetchingData:!0,sentFilter:e.filter})}(i,r);case _.NAME:return function(e){return e.fetchingData?e:n({},e,{fetchingData:!0})}(i);case v.NAME:return function(e){return e.fetchingData?n({},e,{fetchingData:!1,appliedFilter:e.sentFilter||e.appliedFilter,sentFilter:void 0}):e}(i);case S.NAME:return function(e){return e.fetchingData?n({},e,{fetchingData:!1,sentFilter:void 0}):e}(i);case y.NAME:return function(e){return e.fetchingData?n({},e,{fetchingData:!1,sentFilter:void 0,appliedFilter:void 0}):e}(i);case g.NAME:return function(e,t){var i=t.id,s=t.value,r=e.filter.criterionByLineId[i];if(r.field===s)return e;if(null!=e.fetchingColumns&&e.fetchingColumns[i])return e;var o,l,a,d=i===e.filter.additionalCriterionId,u=n({},r,{field:s,isActivated:!!d||r.isActivated}),c=e.fetchingColumns?n({},e.fetchingColumns,((o={})[i]=!0,o)):((l={})[i]=!0,l);return n({},e,{filter:n({},e.filter,{criterionByLineId:n({},e.filter.criterionByLineId,(a={},a[i]=u,a))}),fetchingColumns:c})}(i,r);case f.NAME:return function(e,t){if(null==e.fetchingColumns||!e.fetchingColumns||!e.fetchingColumns[t])return e;var i=e.fetchingColumns?n({},e.fetchingColumns):{};return delete i[t],n({},e,{fetchingColumns:i})}(i,r);case b.NAME:return function(e,t){var i=t.id,s=t.value,r=e.filter.criterionByLineId[i];if(r.operator===s)return e;if(null!=e.fetchingOperators&&e.fetchingOperators[i])return e;var o,l,a,d=n({},r,{operator:s}),u=e.fetchingOperators?n({},e.fetchingOperators,((o={})[i]=!0,o)):((l={})[i]=!0,l);return n({},e,{filter:n({},e.filter,{criterionByLineId:n({},e.filter.criterionByLineId,(a={},a[i]=d,a))}),fetchingOperators:u})}(i,r);case E.NAME:return function(e,t){if(null==e.fetchingOperators||!e.fetchingOperators[t])return e;var i=n({},e.fetchingOperators);return delete i[t],n({},e,{fetchingOperators:i})}(i,r);case u.NAME:return function(e,t){var i,s=t.id,r=t.value,o=e.filter.criterionByLineId[s];if(null!=e.fetchingOperators&&e.fetchingOperators[s]?delete(i=n({},e.fetchingOperators))[s]:i=e.fetchingOperators,o.operator===r&&i===e.fetchingOperators)return e;var l,a=o.operator===r?e.filter:n({},e.filter,{criterionByLineId:n({},e.filter.criterionByLineId,(l={},l[s]=n({},o,{operator:r}),l))});return n({},e,{filter:a,fetchingOperators:i})}(i,r);case c.NAME:return function(e,t){if(e.fetchingFilter)return e;var i=EBX_AdvancedSearch.requestLinks.filterLoad.replace(encodeURIComponent("$pk"),t),s=new EBX_AJAXResponseHandler;return s.handleAjaxResponseSuccess=function(e){var t=document.createElement("div");t.innerHTML=e,o.AdvancedSearchActions.loadFilter_success(t)},s.handleAjaxResponseFailed=function(){EBX_Logger.log("EBX_AjaxAdvancedSearch.ajaxLoadFilter: load filter failed.",EBX_Logger.error),o.AdvancedSearchActions.loadFilter_failure()},s.sendRequest(i),n({},e,{fetchingFilter:!0})}(i,r);case p.NAME:return function(e){return e.fetchingFilter?n({},e,{fetchingFilter:!1,filter:{quickSearch:"",criterionByLineId:{},allCriteriaIds:[],additionalCriterionId:void 0}}):e}(i);case h.NAME:return function(e){return e.fetchingFilter?n({},e,{fetchingFilter:!1}):e}(i)}return i})))}(t.AdvancedSearchReducers||(t.AdvancedSearchReducers={}))},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e};Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(12),o=i(0),l=i(5),a=i(4),d=i(6),u=i(24),c=function(){function e(t){var i=this;this.table=t,this.rawResponse=null,this.inheritance=new u.InheritanceManager(this.table),this.fetch=null,this.search=null,this.setCurrentRequest=function(e){i.currentRequestID=e},this.cancelCurrentRequest=function(){if(null!=i.currentRequestID){var e=i.currentRequestID;i.currentRequestID=null,i.table.isTableReady=!0,i.table.element.isEmpty()?i.table.setState(o.EBX_Table_State.CANCELLED):i.table.setState(o.EBX_Table_State.NORMAL),i.table.showCancelHintTooltips(),s.AdvancedSearchActions.setFetchingData_cancel(),EBX_Utils.cancelRequest(e)}},this.sendCancelable=function(t,r,l){var a=EBX_PageId+"_c"+(e.cancelCounter++).toFixed();t+="&cancelableID="+a,i.setCurrentRequest(a),s.AdvancedSearchActions.setFetchingData();var d=window.setTimeout((function(){i.table.setState(o.EBX_Table_State.LOADING_LONG)}),EBX_Utils.cancel_delayBeforeButtonAppears),u=n({},r,{success:function(e,t,n){window.clearTimeout(d),s.AdvancedSearchActions.setFetchingData_success(),i.currentRequestID===a&&null!=r.success&&r.success.call(i,e,t,n)},failure:function(e,t,n){window.clearTimeout(d),s.AdvancedSearchActions.setFetchingData_cancel(),i.currentRequestID===a&&null!=r.failure&&r.failure.call(i,e,t,n)}});l.sendRequest(t,u)}}return e.prototype.init=function(){this.inheritance.init(),this.fetch=new l.YUI_XHRDataSourceJSON(o.EBX_AjaxTable.constants.fetchRequest,e.fetchResponseSchema),this.search=new l.YUI_XHRDataSourceJSON(o.EBX_AjaxTable.constants.searchRequest,e.searchResponseSchema)},e.prototype.addListeners=function(e){var t=e.querySelector(".ebx_tvMessageContainer button");null!=t&&t.addEventListener("click",this.cancelCurrentRequest)},e.prototype.refreshCurrentPage=function(e){void 0===e&&(e=!1),this.table.isTableReady=!1,this.table.setState(o.EBX_Table_State.LOADING);var t=o.EBX_AjaxTable.constants.tableNameParameter+this.table.tableName;null!=this.table.sncParameter&&(t+=o.EBX_AjaxTable.constants.sncSpecificParameter+this.table.sncParameter),e&&(t+=o.EBX_AjaxTable.constants.refreshCursorParameter+"true"),this.sendCancelable(t,this.getCallbackFetchObject(),this.fetch)},e.prototype.sortColumn=function(e){this.table.isTableReady=!1,this.table.setState(o.EBX_Table_State.LOADING);var t=o.EBX_AjaxTable.constants.tableNameParameter+this.table.tableName+o.EBX_AjaxTable.constants.sortColumnIndexParameter+e;null!=this.table.sncParameter&&(t+=o.EBX_AjaxTable.constants.sncSpecificParameter+this.table.sncParameter),this.sendCancelable(t,this.getCallbackFetchObject(),this.fetch)},e.prototype.applyFilter=function(){this.table.isTableReady=!1,this.table.setState(o.EBX_Table_State.LOADING);var e=o.EBX_AjaxTable.constants.tableNameParameter+this.table.tableName;null!=this.table.sncParameter&&(e+=o.EBX_AjaxTable.constants.sncSpecificParameter+this.table.sncParameter),this.sendCancelable(e,this.getCallbackSearchObject(),this.search)},e.prototype.getCurrentResponseResultsByKey=function(){if(null===this.currentResponseResultsByKey){this.currentResponseResultsByKey={};for(var e=this.rawResponse.results,t=0,i=e.length;t<i;t++)this.currentResponseResultsByKey[e[t][d.AjaxResponseRecordConstants.keyIndexInResultLine]]=e[t]}return this.currentResponseResultsByKey},e.prototype.syncEditedLinesByAPV=function(e,t){this.table.element.hasCreatePart()&&this.syncLinesIn(e,!0),this.syncLinesIn(t,!1)},e.prototype.loadPage=function(e){this.table.isTableReady=!1,this.table.setState(o.EBX_Table_State.LOADING);var t=o.EBX_AjaxTable.constants.tableNameParameter+this.table.tableName+o.EBX_AjaxTable.constants.paginationCommandParameter+e;null!=this.table.sncParameter&&(t+=o.EBX_AjaxTable.constants.sncSpecificParameter+this.table.sncParameter),this.sendCancelable(t,this.getCallbackFetchObject(),this.fetch)},e.prototype.getCallbackFetchObject=function(){return{success:this.callbackFetchSuccess,failure:this.callbackFetchFailure,scope:this,argument:{isSearch:!1}}},e.prototype.callbackFetchSuccess=function(e,t,i){if(204===t.status)return this.table.isTableReady=!0,void(this.table.element.isEmpty()?this.table.setState(o.EBX_Table_State.CANCELLED):this.table.setState(o.EBX_Table_State.NORMAL));this.table.callFunctionWhenTableIsInit(this.callbackFetchSuccessWhenInitIsDone,t,this)},e.prototype.callbackFetchSuccessWhenInitIsDone=function(e){this.rawResponse=e,this.currentResponseResultsByKey=null,this.table.resetContent();var t=this.table.element;if(t.update.fixed.table.removeChild(t.update.fixed.table.firstChild),t.update.fixed.table.appendChild(document.createElement("tbody")),t.update.main.table.removeChild(t.update.main.table.firstChild),t.update.main.table.appendChild(document.createElement("tbody")),0===this.rawResponse.results.length)return this.table.resizeModule.resizeContainers(),this.initCreatePart(),void this.table.onTableIsReady();var i=this.fillVisibleLines();this.table.isTableReady=!1,this.table.setState(o.EBX_Table_State.NORMAL);var n=this;window.setTimeout((function(){n.synchronizeVisibleLinesHeightAndLaunchFillRemainingLines(i)}),10)},e.prototype.callbackFetchFailure=function(e,t,i){return 401===t.status?(this.table.isTableReady=!1,this.table.setState(o.EBX_Table_State.LOGOUT),void EBX_Loader.gotoTimeoutPage()):412===t.status?(this.table.isTableReady=!0,this.table.setState(o.EBX_Table_State.NORMAL),void r.AdvancedSearchPane.addIncorrectFilterMessage()):403===t.status?(this.table.isTableReady=!1,void this.table.setState(o.EBX_Table_State.FORBIDDEN)):(this.table.isTableReady=!0,void this.table.setState(o.EBX_Table_State.ERROR))},e.prototype.getCallbackSearchObject=function(){return{success:this.callbackSearchSuccess,failure:this.callbackSearchFailure,scope:this,argument:{isSearch:!0}}},e.prototype.callbackSearchSuccess=function(e,t,i){this.table.callFunctionWhenTableIsInit(this.callbackSearchSuccessWhenInitIsDone,t,this)},e.prototype.callbackSearchSuccessWhenInitIsDone=function(e){r.AdvancedSearchPane.updateNoSearchIcon(),this.callbackFetchSuccessWhenInitIsDone(e)},e.prototype.callbackSearchFailure=function(e,t,i){return 401===t.status?(this.table.isTableReady=!1,this.table.setState(o.EBX_Table_State.LOGOUT),void EBX_Loader.gotoTimeoutPage()):412===t.status?(this.table.isTableReady=!0,this.table.setState(o.EBX_Table_State.NORMAL),void r.AdvancedSearchPane.addIncorrectFilterMessage()):403===t.status?(this.table.isTableReady=!1,void this.table.setState(o.EBX_Table_State.FORBIDDEN)):(this.table.isTableReady=!0,this.table.setState(o.EBX_Table_State.ERROR),void r.AdvancedSearchPane.updateNoSearchIcon())},e.prototype.fillVisibleLines=function(){var e,t=this.rawResponse.results.length;return this.table.resizeModule.isAutoHeight||(e=Math.ceil(this.table.scroll.mainScrollerHeight/a.EBX_AjaxTable_UIConstants.lineMinHeight))<t&&(t=e),this.appendLines(0,t),t},e.prototype.appendLines=function(e,t){for(var i=this.rawResponse.results,n=0===e,s=e;s<t;s++){var r=i[s];this.appendLine(s,n,r,this.table.element.update),n=!1}this.table.refreshCellIndexes()},e.prototype.appendLine=function(t,i,n,s){var r;s.clearRowProperty(t);var l,c=document.createElement("tr"),p=document.createElement("tr");l=1&t?"ebx_tvEven":"ebx_tvOdd";if(this.table.header.isSelectColumnEnabled){if(r=document.createElement("td"),i&&(r.style.width=this.table.header.columnDefinitionsByKey.ebx_tvColSelect.width+"px"),(this.table.header.isInheritanceColumnDisplayed||this.table.header.isSeverityColumnDisplayed)&&(r.style.borderRight="none"),r.className="ebx_tvSelectCell",this.table.isRecordSelectionEnabled){var m=[];m.push('<label  class="ebx_CheckboxButton_Label ebx_emptyLabel">'),m.push('<input type="checkbox"'),n[d.AjaxResponseRecordConstants.compiledStateIndexInResultLine].charAt(d.AjaxResponseRecordConstants.compiledRowStateIndexSelected)===d.AjaxResponseRecordConstants.compiledRowStateSelected&&(m.push(' checked="checked"'),l+=" ebx_tv_SelectedRow"),m.push('class="ebx_checkboxCustom"'),m.push("/>"),m.push("<i class='ebx_checkboxDisplay'>&nbsp;</i>"),r.innerHTML=m.join(""),m.push("</label>")}else r.innerHTML="&nbsp;";c.appendChild(r)}if(this.table.header.isInheritanceColumnDisplayed){var g=s.getRowProperty(t);g.inheritanceState=u.InheritanceManager.parseInheritanceState(n[d.AjaxResponseRecordConstants.compiledStateIndexInResultLine].charAt(d.AjaxResponseRecordConstants.compiledRowStateIndexInheritance)),l+=" "+u.InheritanceManager.getInheritanceLineCSSClass(g.inheritanceState),r=document.createElement("td"),i&&(r.style.width=this.table.header.columnDefinitionsByKey.ebx_tvColInheritance.width+"px"),this.table.header.isSeverityColumnDisplayed&&(r.style.borderRight="none"),r.className="ebx_tvInheritanceCell",r.innerHTML=this.inheritance.getInheritanceComponent(g.inheritanceState),c.appendChild(r)}this.table.header.isSeverityColumnDisplayed&&(r=document.createElement("td"),i&&(r.style.width=this.table.header.columnDefinitionsByKey.ebx_tvColSeverity.width+"px"),r.className=e.getSeverityCellClassNameFromSeverityFlag(n[d.AjaxResponseRecordConstants.compiledStateIndexInResultLine].charAt(d.AjaxResponseRecordConstants.compiledRowStateIndexSeverity)),r.title=e.getSeverityCellTitleFromSeverityFlag(n[d.AjaxResponseRecordConstants.compiledStateIndexInResultLine].charAt(d.AjaxResponseRecordConstants.compiledRowStateIndexSeverity)),r.innerHTML="&nbsp;",c.appendChild(r));for(var f=this.table.header.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInHeader+1,b=d.AjaxResponseRecordConstants.firstColumnContentIndexInResultLine,E=n.length;b<E;b++,f++){r=document.createElement("td"),i&&(void 0!==this.table.header.columnDefinitions[f].width?r.style.width=this.table.header.columnDefinitions[f].width+"px":r.style.minWidth=this.table.header.columnDefinitions[f].headerWidth+a.EBX_AjaxTable_UIConstants.minWidthIssueGap+"px");var C=n[b];if(C instanceof Array){""===C[0].trim()?r.innerHTML="&nbsp;":r.innerHTML=C[0];var _=new h;(C[1]&u.InheritanceManager.cellFlagInherit)===u.InheritanceManager.cellFlagInherit&&(r.title=o.EBX_AjaxTable.messages.table_inheritedCellValue_title,_.backgroundImage.push("url("+o.EBX_AjaxTable.constants.inheritCellFlagURL+")"),_.backgroundRepeat.push("no-repeat"),_.backgroundPosition.push("0 0")),void 0!==C[2]&&(r.style.backgroundColor=C[2],void 0!==C[3]&&(_.backgroundImage.push("url("+C[3]+")"),void 0!==C[4]&&(_.backgroundRepeat.push(C[4]),void 0!==C[5]&&_.backgroundPosition.push(C[5])))),0!==_.backgroundImage.length&&(EBX_LayoutManager.isIE8?(r.style.backgroundImage=_.backgroundImage[0],void 0!==_.backgroundRepeat[0]&&(r.style.backgroundRepeat=_.backgroundRepeat[0]),void 0!==_.backgroundPosition[0]&&(r.style.backgroundPosition=_.backgroundPosition[0])):(r.style.backgroundImage=_.backgroundImage.join(", "),r.style.backgroundRepeat=_.backgroundRepeat.join(", "),r.style.backgroundPosition=_.backgroundPosition.join(", ")))}else""===C.trim()?r.innerHTML="&nbsp;":r.innerHTML=C;f>=this.table.nbFixedColumns?p.appendChild(r):c.appendChild(r)}r.className="ebx_tv_td_lastVisible",c.appendChild(e.createBaselineControllers()),p.appendChild(e.createBaselineControllers()),c.className=p.className=l,s.fixed.table.firstChild.appendChild(c),s.main.table.firstChild.appendChild(p),s.incrementNumberOfRowDisplayed()},e.createBaselineControllers=function(){var e=document.createElement("td");return e.style.visibility="hidden",e.style.paddingLeft="0",e.style.paddingRight="0",e.innerHTML="<span style='display: inline-block'>&nbsp;</span>",e},e.prototype.initCreatePart=function(){if(this.recordsForCreateNbToInit>0)for(;this.recordsForCreateNbToInit-- >0;)this.table.gridEditModule.creation.createNewRecord(!0)},e.prototype.fillRemainingLinesAndLaunchSynchronizeRemainingLines=function(e,t){this.initCreatePart();var i=e,n=!0;(e=i+5)>this.rawResponse.results.length&&(e=this.rawResponse.results.length,n=!1),this.appendLines(i,e);var s=this;n?window.setTimeout((function(){s.fillRemainingLinesAndLaunchSynchronizeRemainingLines(e,t)}),10):window.setTimeout((function(){s.synchronizeRemainingLinesHeight(t)}),10)},e.prototype.synchronizeVisibleLinesHeightAndLaunchFillRemainingLines=function(e){var t=this.table.element.update,i=t.getNumberOfRowsDisplayed(),n=0;if(t.setLinesHeightsSum(0),0!==i)for(;n<i&&(this.synchronizeLine(n),t.setLinesHeightsSum(t.getRowProperty(n).cumulativeHeight),!(t.getLinesHeightsSum()>this.table.scroll.mainScrollerHeight));n++);var s=n;this.table.resizeModule.isAutoWidthNeeded&&this.table.header.initUndefinedColWidths(),this.table.resizeModule.resizeContainers();var r=this;window.setTimeout((function(){r.fillRemainingLinesAndLaunchSynchronizeRemainingLines(e,s)}),10)},e.prototype.clearLineSync=function(e,t){var i,n,s=t?this.table.element.create:this.table.element.update;i=s.fixed.table.rows[e],n=s.main.table.rows[e],i.cells[this.table.lastFixedCellIndex].style.paddingTop="",n.cells[this.table.lastMainCellIndex].style.paddingTop="",i.style.height="",n.style.height=""},e.prototype.synchronizeLine=function(e,t){var i,n,s,r,o,l,a,d=0;if(n=(i=t?this.table.element.create:this.table.element.update).fixed.table.rows[e],s=i.main.table.rows[e],r=n.cells[this.table.lastFixedCellIndex].firstChild.offsetTop,o=s.cells[this.table.lastMainCellIndex].firstChild.offsetTop,n.cells[this.table.lastFixedCellIndex].style.paddingTop="",s.cells[this.table.lastMainCellIndex].style.paddingTop="",r!==o||this.table.isEditionMode){var u=Math.max(r,o);n.cells[this.table.lastFixedCellIndex].style.paddingTop=u+"px",s.cells[this.table.lastMainCellIndex].style.paddingTop=u+"px",i.getRowProperty(e).offsetTop=u}else i.getRowProperty(e).offsetTop=o;this.table.header.isSeverityColumnDisplayed&&(n.cells[this.table.header.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInDataTable].style.backgroundPosition="center "+(i.getRowProperty(e).offsetTop+1)+"px"),n.style.height="",s.style.height="",(l=n.offsetHeight)>(a=s.offsetHeight)?(n.style.height=l+"px",s.style.height=l+"px",i.getRowProperty(e).height=l):(n.style.height=a+"px",s.style.height=a+"px",i.getRowProperty(e).height=a),e>0&&(d=i.getRowProperty(e-1).cumulativeHeight),i.getRowProperty(e).cumulativeHeight=d+i.getRowProperty(e).height},e.prototype.synchronizeRemainingLinesHeight=function(e){var t,i,n;if(t=this.table.element.update.main.table.rows.length,i=e,n=1,0!==t)for(;i<t&&(this.synchronizeLine(i),this.table.element.update.setLinesHeightsSum(this.table.element.update.getRowProperty(i).cumulativeHeight),!(n>5));i++,n++);if(i<t-1){e=i+1;var s=this;window.setTimeout((function(){s.synchronizeRemainingLinesHeight(e)}),0)}else this.synchronizeLinesCompleted()},e.prototype.synchronizeLinesCompleted=function(){EBX_LayoutManager.isIE8&&(this.table.element.update.fixed.table.firstChild.lastChild.className+=" ebx_ie8_last-child",this.table.element.update.main.table.firstChild.lastChild.className+=" ebx_ie8_last-child"),this.table.isEditionMode&&this.table.gridEditModule.synchronizeLinesCompleted(),this.table.onTableIsReady(),this.table.resizeModule.resizeContainers(),!1===this.table.resizeModule.isAutoHeight&&this.table.refreshContainerCSSClasses(),window.setTimeout(this.rawResponse.meta.scriptToExecute,0)},e.prototype.syncLinesIn=function(e,t){var i,n,s,r=0,o=t?this.table.element.create:this.table.element.update;for(i=o.getNumberOfRowsDisplayed(),n=0;r<i;r++)EBX_Utils.arrayContains(e,r)?(this.clearLineSync(r,t),this.synchronizeLine(r,t)):o.getRowProperty(r).cumulativeHeight=n+o.getRowProperty(r).height,n=o.getRowProperty(r).cumulativeHeight;s=o.getLinesHeightsSum(),i>0&&o.setLinesHeightsSum(o.getRowProperty(i-1).cumulativeHeight),o.getLinesHeightsSum()!==s&&this.table.resizeModule.resizeContainers()},e.getSeverityCellClassNameFromSeverityFlag=function(e){return"E"===e?"ebx_tvSeverityCell ebx_IconError":"W"===e?"ebx_tvSeverityCell ebx_IconWarning":"I"===e?"ebx_tvSeverityCell ebx_IconInfo":"C"===e?"ebx_tvSeverityCell ebx_IconConcurrentUpdate":"ebx_tvSeverityCell"},e.getSeverityCellTitleFromSeverityFlag=function(e){return"E"===e?o.EBX_AjaxTable.messages.table_severityIcon_error:"W"===e?o.EBX_AjaxTable.messages.table_severityIcon_warning:"I"===e?o.EBX_AjaxTable.messages.table_severityIcon_info:"C"===e?o.EBX_AjaxTable.messages.table_severityIcon_concurrentUpdate:""},e.fetchResponseSchema={resultsList:"records",metaFields:{hasNextPage:"hasNextPage",hasPreviousPage:"hasPreviousPage",hasChangeSet:"hasChangeSet",fullSizeUnknown:"fullSizeUnknown",pageReport:"pageReport",selectedNumber:"selectedNumber",scriptToExecute:"scriptToExecute",sortState:"sortState",isSortableByRelevancy:"isSortableByRelevancy",highestSeverity:"highestSeverity",currentTablePageId:"currentTablePageId"}},e.searchResponseSchema={resultsList:"records",metaFields:{hasNextPage:"hasNextPage",hasPreviousPage:"hasPreviousPage",hasChangeSet:"hasChangeSet",fullSizeUnknown:"fullSizeUnknown",pageReport:"pageReport",selectedNumber:"selectedNumber",scriptToExecute:"scriptToExecute",sortState:"sortState",isSortableByRelevancy:"isSortableByRelevancy",highestSeverity:"highestSeverity",currentTablePageId:"currentTablePageId"}},e.cancelCounter=0,e}();t.Content=c;var h=function(){this.backgroundImage=[],this.backgroundRepeat=[],this.backgroundPosition=[]}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=i(0),r=i(5),o=i(6),l=function(){function e(e){this.table=e,this.inheritedResponseSchema={resultsList:"messages",fields:[{key:"message"},{key:"severity"}]}}return e.prototype.init=function(){this.inheritedHandler=new r.YUI_XHRDataSourceJSON(s.EBX_AjaxTable.constants.rowInheritRequest,this.inheritedResponseSchema),this.overwrittenHandler=new r.YUI_XHRDataSourceJSON(s.EBX_AjaxTable.constants.rowOverwriteRequest,this.inheritedResponseSchema),this.occultHandler=new r.YUI_XHRDataSourceJSON(s.EBX_AjaxTable.constants.rowDeleteRequest,this.inheritedResponseSchema)},e.prototype.getInheritanceComponent=function(e){if(e.mode===n.Root);else{if(e.mode===n.Inherit)return e.canOverwrite?(e.confirmMessage=s.EBX_AjaxTable.messages.table_inheritance_overwrite_confirm,e.dataSource=this.overwrittenHandler,e.isOpeningRecord=!0,s.EBX_AjaxTable.constants.overwriteButtonHTML):s.EBX_AjaxTable.constants.inheritFlagHTML;if(e.mode===n.Overwrite)return e.canDelete?(e.confirmMessage=s.EBX_AjaxTable.messages.table_inheritance_inherit_confirm,e.dataSource=this.inheritedHandler,e.isOpeningRecord=!1,s.EBX_AjaxTable.constants.inheritButtonHTML):s.EBX_AjaxTable.constants.overwritingFlagHTML;if(e.mode===n.Occult){if(e.canDelete)return e.confirmMessage=s.EBX_AjaxTable.messages.table_inheritance_inherit_confirm,e.dataSource=this.inheritedHandler,e.isOpeningRecord=!1,s.EBX_AjaxTable.constants.inheritButtonHTML}else if(e.mode===n.OccultOrphan&&e.canDelete)return e.confirmMessage=s.EBX_AjaxTable.messages.table_deleteRecord_confirm,e.dataSource=this.occultHandler,e.isOpeningRecord=!1,s.EBX_AjaxTable.constants.deleteButtonHTML}return"&nbsp;"},e.prototype.changeInheritanceState=function(e){var t=this.table.element.update.getRowProperty(e).inheritanceState;this.table.selection.focusLineIndex(e),this.sendRequestChangeInheritanceState(t,e)},e.prototype.sendRequestChangeInheritanceState=function(e,t){var i,n=this.table.content.rawResponse.results[t][o.AjaxResponseRecordConstants.keyIndexInResultLine];(i=[]).push(s.EBX_AjaxTable.constants.tableNameParameter,this.table.tableName),i.push(s.EBX_AjaxTable.constants.rowSelectionParameter,n),e.dataSource.sendRequest(i.join(""),this.getCallbackChangeInheritanceState(t,e))},e.prototype.getCallbackChangeInheritanceState=function(e,t){return{success:this.callbackChangeInheritanceStateSuccess,failure:this.callbackChangeInheritanceStateFailure,scope:this,argument:{recordIndex:e,inheritanceState:t}}},e.prototype.callbackChangeInheritanceStateSuccess=function(e,t,i){var n=t.results;if(void 0!==n)for(var s=0;s<n.length;s++){var r=n[s].message,o=n[s].severity;void 0===o&&(o=EBX_UserMessageManager.INFO),EBX_UserMessageManager.addMessage(r,o)}i.inheritanceState.isOpeningRecord?this.table.selection.openRecordIndex(i.recordIndex):this.table.content.refreshCurrentPage()},e.prototype.callbackChangeInheritanceStateFailure=function(e,t,i){if(401===t.status)return this.table.isTableReady=!1,this.table.setState(s.EBX_Table_State.LOGOUT),void EBX_Loader.gotoTimeoutPage()},e.prototype.clickOnInheritanceButton=function(e){var t=this.table.element.update.getRowProperty(e).inheritanceState;if(void 0!==t.dataSource){var i=this;ebx_confirm({question:t.confirmMessage,jsCommandYes:function(){i.changeInheritanceState(e)}})}},e.parseInheritanceState=function(e){var t=parseInt(e,36);if(!(t>=0&&t<36))return null;var i=new a;return i.canOverwrite=t>=20,i.canOverwrite&&(t-=20),i.canDelete=t>=10,i.canDelete&&(t-=10),i.mode=t,i},e.getInheritanceLineCSSClass=function(e){return 1===e.mode?"ebx_tvRowRoot":4===e.mode||5===e.mode?"ebx_tvRowOcculting":""},e.cellFlagInherit=1,e}();t.InheritanceManager=l,function(e){e[e.Root=1]="Root",e[e.Inherit=2]="Inherit",e[e.Overwrite=3]="Overwrite",e[e.Occult=4]="Occult",e[e.OccultOrphan=5]="OccultOrphan"}(n||(n={}));var a=function(){};t.InheritanceState=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),s=i(7),r=function(){function e(e){this.table=e,this.clipboard=null,this.clipboardBorder=null,this.clipboardSynchronize=new l(this)}return e.prototype.init=function(){var e=this;this.table.header.addColumnWidthChangeHandler((function(){null!==e.clipboardBorder&&e.clipboardBorder.isVisible()&&(e.clipboardBorder.hide(),e.clipboardBorder.draw())}))},e.prototype.copy=function(){var t=this;if(null!==this.clipboard&&(this.changeClipboardCellsStyle(!1),this.clipboard=null),null!==this.table.grid_selection.getCurrentSelection()){this.clipboard=new a;var i=this.table.grid_selection.getCurrentSelection();i.onEachCell((function(n,s,r){var l="",a="",d=!0;t.isCopyEnabledFor(r)?null!==(l=t.getValueOfCell(r))&&(a=e.getTdInnerText(r.tdElement)):(d=!1,t.notifyCopyOrPasteNotSupported(r));var u=new o(l,a,d,r);t.clipboard.add(n-i.getRowStart(),s-i.getColStart(),u)})),this.clipboard.isEmpty()?this.clipboard=null:this.changeClipboardCellsStyle(!0),this.clipboardSynchronize.send()}},e.prototype.paste=function(){var e=this;if(null==this.clipboard)return null;this.changeClipboardCellsStyle(!1);var t=this.table.grid_selection.getCurrentSelection();if(null!=t){if(t.getWidth()<this.clipboard.getWidth()){var i=t.getColStart()+this.clipboard.getWidth()-1,s=this.table.nbFixedColumns-1+this.table.nbMainColumns;this.table.header.isSeverityColumnDisplayed||s--,i=Math.min(s-1,i),t.setColEnd(i)}if(t.getHeight()<this.clipboard.getHeight()){var r=t.getRowStart()+this.clipboard.getHeight()-1,o=this.table.element.update.getNumberOfRowsDisplayed()-1;this.table.element.hasCreatePart()&&(o+=this.table.element.create.getNumberOfRowsDisplayed()),r=Math.min(o,r),t.setRowEnd(r)}var l=function(i,n,s){var r=e.clipboard.getCell((i-t.getRowStart())%e.clipboard.getHeight(),(n-t.getColStart())%e.clipboard.getWidth());r.copyWasSupported&&s.getEditor().setPastedValue(r)},a=function(t,i){return!(e.table.gridEditModule.getWidgetForEdition(i).isCopyDisabled||t.getEditor()instanceof n.EBX_FormNodeEditor_Missing)},u=[],c=[],h=[];t.onEachCell((function(i,n,s){var r=e.table.gridEditModule.getCellPath(s),o=EBX_FormNodeIndex.getFormNode(r);o?a(o,s)?(l(i,n,o),h.push(r)):e.notifyCopyOrPasteNotSupported(s):e.table.gridEditModule.getWidgetForEdition(s).isReadWrite&&!e.table.gridEditModule.getWidgetForEdition(s).isCopyDisabled?(u.push(s),c.push(new d(i,n,r,s))):e.notifyCopyOrPasteNotSupported(s);t.isLastCell(i,n)&&h.length>0&&EBX_FormPresenter.stackListPathForValidationOnPaste(h)})),this.table.gridEditModule.loadCellsWidgets(u,(function(){for(var t=[],i=0;i<c.length;i++){var n=c[i],s=EBX_FormNodeIndex.getFormNode(n.path);s?a(s,n.cell)?(l(n.row,n.col,s),t.push(n.path)):e.notifyCopyOrPasteNotSupported(n.cell):EBX_Logger.log("GridEdit_CopyModule_Refresh.paste: Widget loaded but not the form node.",EBX_Logger.error)}EBX_FormPresenter.stackListPathForValidationOnPaste(t)}),(function(e){EBX_Logger.log("GridEdit_CopyModule_Refresh.paste: Error on loading widget : "+e,EBX_Logger.error)}))}},e.prototype.getValueOfCell=function(e){var t=this.table.gridEditModule.getCellPath(e),i=EBX_FormNodeIndex.getFormNode(t);return null!==i?i.getEditor().getCopyValue():this.table.gridEditModule.getWidgetForEdition(e).initialValue},e.getTdInnerText=function(t){var i=[];if(1===t.nodeType&&"BUTTON"!==t.tagName)for(var n=t.firstChild;n;)3===n.nodeType?i.push(n.wholeText):i.push(e.getTdInnerText(n)),n=n.nextSibling;var s=i.join("");return""===s&&(s=""),s.replace(/\u00a0/g," ")},e.prototype.changeClipboardCellsStyle=function(e){null!=this.clipboard&&(e?(this.clipboard.onEachCell((function(e){e.cell&&EBX_Utils.addCSSClass(e.cell.tdElement,"ebx_TableCellCopied")})),this.clipboardBorder=new s.SelectionRangeMask(this.table,s.SelectionBorderStyle.Outline,this.clipboard),this.clipboardBorder.draw()):(this.clipboard.onEachCell((function(e){e.cell&&EBX_Utils.removeCSSClass(e.cell.tdElement,"ebx_TableCellCopied")})),null!==this.clipboardBorder&&this.clipboardBorder.hide()))},e.prototype.getBuffer=function(){return this.clipboard},e.prototype.initClipboard=function(e){this.clipboard=l.getClipboardFromObject(e)},e.prototype.isCopyEnabledFor=function(e){return!this.table.gridEditModule.getWidgetForEdition(e).isCopyDisabled},e.prototype.notifyCopyOrPasteNotSupported=function(e){EBX_Utils.addCSSClass(e.tdElement,"ebx_TableCellCopyOrPasteNotSupported"),window.setTimeout((function(){EBX_Utils.removeCSSClass(e.tdElement,"ebx_TableCellCopyOrPasteNotSupported")}),500)},e}();t.GridEdit_CopyModule=r;var o=function(){function e(e,t,i,n){this.value=e,this.displayedStr=t,this.copyWasSupported=i,this.cell=n}return e.prototype.getDisplayedString=function(){return this.displayedStr?this.displayedStr:this.getValue()},e.prototype.getValue=function(){return this.value},e.prototype.serialize=function(){return JSON.stringify(this,["value","displayedStr","copyWasSupported"])},e}();t.CellCopyValue=o;var l=function(){function e(e){this.owner=e}return e.handleAjaxResponseFailed=function(e){EBX_Logger.log("GridEdit_CopyModule_Refresh.handleAjaxResponseFailed: Save clipboard failed : "+e+".",EBX_Logger.error)},e.prototype.send=function(){var t=this,i=this.owner.getBuffer(),n="";null!==i&&(n="&"+this.clipboardParam+"="+encodeURIComponent(i.serialize()));var s=this.url;s+=n;var r=new EBX_AJAXResponseHandler;r.handleAjaxResponseSuccess=function(i){var n=t.owner.getBuffer();try{if(null===n&&""===i)return;var s=JSON.parse(i),r=e.getClipboardFromObject(s);r&&r.serialize()===n.serialize()||t.send()}catch(e){EBX_Logger.log("GridEdit_CopyModule_Refresh.send: Failed to parse clipboard JSON : "+i+".",EBX_Logger.error)}},r.handleAjaxResponseFailed=e.handleAjaxResponseFailed,r.sendRequest(s)},e.getClipboardFromObject=function(e){for(var t=new a,i=0;i<e.length;i++)for(var n=e[i],s=0;s<n.length;s++){var r=n[s];r.hasOwnProperty("value")&&r.hasOwnProperty("displayedStr")&&t.add(i,s,new o(r.value,r.displayedStr,r.copyWasSupported))}return t},e}(),a=function(){function e(){this.cells=[]}return e.prototype.serialize=function(){if(!this.cells)return null;for(var e=[],t=0;t<this.cells.length;t++){for(var i=this.cells[t],n=[],s=0;s<i.length;s++)n.push(i[s].serialize());e.push("["+n.join(",")+"]")}return" ["+e.join(",")+"]"},e.prototype.add=function(e,t,i){void 0===this.cells[e]&&(this.cells[e]=[]),this.cells[e][t]=i},e.prototype.getHeight=function(){return this.cells.length},e.prototype.getWidth=function(){return this.getHeight()>0?this.cells[0].length:0},e.prototype.getCell=function(e,t){return this.cells[e][t]},e.prototype.onEachCell=function(e){for(var t=0;t<this.getHeight();t++)for(var i=0;i<this.getWidth();i++)e(this.cells[t][i])},e.prototype.getTopLeftCell=function(){return this.getCell(0,0).cell},e.prototype.getTopRightCell=function(){return this.getCell(0,this.cells[0].length-1).cell},e.prototype.getBottomLeftCell=function(){return this.getCell(this.cells.length-1,0).cell},e.prototype.getBottomRightCell=function(){return this.getCell(this.cells.length-1,this.cells[this.cells.length-1].length-1).cell},e.prototype.isEmpty=function(){var e=0===this.cells.length;if(!e){var t=!1;return this.onEachCell((function(e){!t&&e.copyWasSupported&&(t=!0)})),!t}return e},e}(),d=function(e,t,i,n){this.row=e,this.col=t,this.path=i,this.cell=n}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(9),r=i(27),o=function(){function e(e){this.table=e,this.widgetsByPath={},this.widgetPathsForCreation={},this.widgetPathsForEdition={},this.updateRecordIds=[],this.createRecordParameterPrefix=[],this.updateRecordParameterPrefix=[],this.orphanMessages={},this.widgetContainerEl=null,this.widgetContainerCurrentPosition=new l,this.currentWidgetForEditionObj=null,this.currentWidgetEdited=null,this.currentFormNodeEdited=null,this.currentTdEdited=null,this.previousCellsWaitingForAjax=[],this.creation=new r.GridEdit_RecordCreation(this.table,this.table.content,this)}return e.prototype.init=function(){this.table.callFunctionWhenTableIsReady(this.autoEditFirstReadWriteWidget,null,this)},e.prototype.initInternalElements=function(){this.widgetContainerEl=document.getElementById(this.widgetContainerId),this.widgetContainerScrollMaker=document.createElement("div"),this.widgetContainerScrollMaker.className="ebx_widgetContainerScrollMaker",this.widgetContainerEl.appendChild(this.widgetContainerScrollMaker),this.table.element.external.parentForm=EBX_Utils.getFirstParentMatchingTagName(this.table.element.container,"FORM")},e.prototype.addListeners=function(){YAHOO.util.Event.addListener(this.table.element.update.fixed.table,"dblclick",this.table.dblclickOnTableListener,this.table.element.update.fixed.table,this.table),YAHOO.util.Event.addListener(this.table.element.update.main.table,"dblclick",this.table.dblclickOnTableListener,this.table.element.update.main.table,this.table),YAHOO.util.Event.addListener(this.table.element.update.fixed.table,"mouseover",this.table.mouseoverTableListener,this.table.element.update.fixed.table,this.table),YAHOO.util.Event.addListener(this.table.element.update.main.table,"mouseover",this.table.mouseoverTableListener,this.table.element.update.main.table,this.table),YAHOO.util.Event.addListener(this.table.element.update.fixed.table,"mouseout",this.table.mouseoutTableListener,this.table.element.update.fixed.table,this.table),YAHOO.util.Event.addListener(this.table.element.update.main.table,"mouseout",this.table.mouseoutTableListener,this.table.element.update.main.table,this.table),YAHOO.util.Event.addListener(document.body,"click",this.clickOnDocumentWhenEditListener,null,this),YAHOO.util.Event.addListener(this.widgetContainerEl,"scroll",this.synchronizeScrollFromWidgetContainer,null,this),YAHOO.util.Event.addListener(this.widgetContainerEl,"keypress",this.keyPressOnWidgetContainerListener,null,this),EBX_FormPresenter.addGlobalAJAXResponseListener(this.receiveAPVResponse,this)},e.prototype.synchronizeLinesCompleted=function(){this.widgetContainerCurrentPosition.contentHeight=this.table.element.update.getLinesHeightsSum(),this.widgetContainerCurrentPosition.contentHeight<this.widgetContainerCurrentPosition.height&&(this.widgetContainerCurrentPosition.contentHeight=this.widgetContainerCurrentPosition.height),this.widgetContainerScrollMaker.style.top=this.widgetContainerCurrentPosition.contentHeight+this.table.element.update.fixed.scrollMaker.offsetHeight+"px"},e.prototype.initWhenTableIsReady=function(){this.updateWidgetsFromAPVInitDocument(),this.initDeleteStates(),this.table.element.hasCreatePart()&&this.creation.autoResizeCreatePartOnTableInit()},e.prototype.updateWidgetsFromAPVInitDocument=function(){EBX_FormPresenter.receive(this.apvDocumentToUpdateWidgets),this.receiveAPVResponse("update",null,this.apvDocumentToUpdateWidgets)},e.prototype.initDeleteStates=function(){for(var e=0,t=this.creatingRecordIndiceToIgnore;e<t.length;e++){var i=t[e],n=EBX_Utils.getFirstRecursiveChildMatchingCSSClass(this.table.element.create.fixed.table.rows[i],"ebx_deleteTableRow");this.deleteTableRow(n)}for(var s=0,r=this.recordIndiceFlaggedToDelete;s<r.length;s++){var o=r[s];n=EBX_Utils.getFirstRecursiveChildMatchingCSSClass(this.table.element.update.fixed.table.rows[o],"ebx_deleteTableRow");this.deleteTableRow(n)}},e.prototype.autoEditFirstReadWriteWidget=function(){var e=this.table.element.hasCreatePart()?this.widgetPathsForCreation:this.widgetPathsForEdition;void 0!==e[0]&&void 0!==e[0][0]&&this.table.grid_selection.focusCell(new n.Cell(this.table.getTdElFromPath(e[0][0])))},e.prototype.receiveAPVResponse=function(e,t,i){var n,s,r,o,l,a,d=[],u=[];if(void 0!==i.update)for(n=0,s=i.update.length;n<s;n++)if(void 0!==(r=i.update[n]).message&&!1===ebx_form_isNodeDefined(r.path)&&(this.orphanMessages[r.path]=r.message),o=this.table.getTdElFromPath(r.path),this.widgetsByPath[r.path].isNewValueSet=r.isNewValueSet,null!==o){l=o.parentNode.rowIndex;var c=void 0;c=this.widgetsByPath[r.path].isForCreate?d:u,!1===EBX_Utils.arrayContains(c,l)&&c.push(l),EBX_Utils.removeCSSClass(o,"ebx_LightColoredBackground"),EBX_Utils.removeCSSClass(o,"ebx_cellWithStatus"),a="",void 0!==r.message?(void 0!==r.message.errors?a="#F0D0D0":void 0!==r.message.warnings?a="#FFE0B0":void 0!==r.message.infos&&(a="#D0D0FF"),""!==a&&EBX_Utils.addCSSClass(o,"ebx_cellWithStatus")):r.isNewValueSet&&(EBX_Utils.addCSSClass(o,"ebx_LightColoredBackground"),EBX_Utils.addCSSClass(o,"ebx_cellWithStatus")),o.style.backgroundColor=a,void 0!==r.readOnlyHTML&&(o.innerHTML=r.readOnlyHTML),void 0!==r.readOnlyJS&&window.setTimeout(r.readOnlyJS,0)}this.table.element.hasCreatePart()&&this.updateTDsAndRevertButton(e,d,!0),this.updateTDsAndRevertButton(e,u,!1),this.table.content.syncEditedLinesByAPV(d,u)},e.prototype.updateTDsAndRevertButton=function(e,t,i){for(var n=i?this.table.element.create.fixed.table:this.table.element.update.fixed.table,s=i?this.widgetPathsForCreation:this.widgetPathsForEdition,r=0,o=t.length;r<o;r++){var l=t[r],a=EBX_Utils.getFirstRecursiveChildMatchingCSSClass(n.rows.item(l),"ebx_revertTableRow"),d=void 0;if("resetRecord"===e){d=!1;for(var u=0,c=void 0;void 0!==(c=s[l][u]);){this.widgetsByPath[c].isNewValueSet=!1;var h=this.table.getTdElFromPath(c);EBX_Utils.removeCSSClass(h,"ebx_LightColoredBackground"),h.style.backgroundColor="",u++}}else{d=!1;for(u=0,c=void 0;void 0!==(c=s[l][u]);){if(this.widgetsByPath[c].isNewValueSet){d=!0;break}u++}}null!==a&&(d?EBX_Utils.removeCSSClass(a,"ebx_revertTableRowDisabled"):EBX_Utils.addCSSClass(a,"ebx_revertTableRowDisabled"))}},e.prototype.clickOnDocumentWhenEditListener=function(e){var t=EBX_Utils.getTargetElement(e);if(null===this.currentTdEdited){if(null!==this.table.grid_selection.currentTdFocused){if(t===this.table.grid_selection.currentTdFocused||EBX_Utils.isChildOf(t,this.table.grid_selection.currentTdFocused))return;var i=EBX_Utils.getFirstParentMatchingCSSClass(t,"yuimenu");if(i&&"ebx_MenuForMenuButtons"===i.id)return;for(var s=n.EBX_AjaxTable.pluggedComponentRegister.toolbarsByTable[this.table.tableName],r=0,o=s.length;r<o;r++){var l=document.getElementById(s[r]);if(null!==l&&EBX_Utils.isChildOf(t,l)||l===t)return}return this.table.grid_selection.releaseCurrentCellFocus(),void this.table.grid_selection.releaseCurrentSelection()}}else{if(t===this.currentTdEdited||EBX_Utils.isChildOf(t,this.currentTdEdited))return;if(t===this.currentWidgetEdited||EBX_Utils.isChildOf(t,this.currentWidgetEdited))return;this.releaseCurrentEdition(null,!1)}},e.prototype.keyPressOnWidgetContainerListener=function(e){if(e.keyCode===EBX_Utils.keyCodes.ENTER&&(null!==this.currentTdEdited||null!==this.table.grid_selection.currentTdFocused))if(YAHOO.util.Event.stopEvent(e),null!==this.currentTdEdited){var t,i=new n.Cell(this.currentTdEdited);null===(t=e.shiftKey?this.table.grid_selection.getCellTop(i):this.table.grid_selection.getCellDown(i))?null!==this.currentTdEdited&&this.requestEditCell(i):this.requestEditCell(t)}else this.requestEditCell(new n.Cell(this.table.grid_selection.currentTdFocused))},e.prototype.editCurrentCellFocus=function(){this.requestEditCell(this.table.getCurrentCellFocused())},e.prototype.requestEditCell=function(e){var t=this;this.releaseCurrentEdition(),this.loadCellWidget(e,(function(i){if(i){var n=t.getCellPath(e),s=t.widgetsByPath[n];void 0!==s&&s.isReadWrite&&(t.table.grid_selection.releaseCurrentCellFocus(),t.editCell(s))}}),(function(e){EBX_Logger.log("GridEdit.requestEditCell: Failed to load widget : "+e+".",EBX_Logger.error)}))},e.prototype.loadCellWidget=function(e,t,i){this.loadCellsWidgets([e],t,i)},e.prototype.loadCellsWidgets=function(t,i,s){for(var r=[],o=[],l=0,d=t.length;l<d;l++){var u=t[l],c=EBX_Utils.getIndex(u.tdElement),h=0;u.isPlacedInFixedContainer()?this.table.header.isSeverityColumnDisplayed||c++:(c+=this.table.nbFixedColumns,h=this.table.header.columnDefinitions[this.table.nbFixedColumns-1].cumulativeWidth);var p=u.tdElement.parentNode.rowIndex,m=this.getCellPath(u);if(null!=m){var g=this.widgetsByPath[m];if(void 0===g.cell&&(g.cell=u,g.cellIndexForColumnDef=c,g.fixedColumnsWidthToAdd=h),g.isReadWrite&&void 0===g.widget)if(g.isPresentAtPageInit)g.widget=document.getElementById(g.wrapperId);else{g.isNoMoreAvailable&&(g.isNoMoreAvailable=!1,EBX_Utils.removeCSSClass(u.tdElement,"ebx_TableCellDisabledFocused"));var f=u.tdElement.innerHTML;u.tdElement.innerHTML="<div class='ebx_IconAnimWait ebx_tvCellWaitingIcon'>&nbsp;</div>",u.tdElement.style.cursor="wait";var b=p%2==0;r.push([encodeURI(m),b]),o.push(new a(g,f))}}}if(o.length>0){e.releaseWaitingCells(this.previousCellsWaitingForAjax),this.previousCellsWaitingForAjax=o;var E=this,C=new EBX_AJAXResponseHandler;C.handleAjaxResponseSuccess=function(t){var s=document.createElement("div");s.innerHTML=t;for(var r=0;s.childNodes.length>0;){var l=o[r].widgetObj;null!==E.table.element.external.parentForm&&void 0!==E.table.element.external.parentForm.ebx_initialSerialize&&(E.table.element.external.parentForm.ebx_initialSerialize+="&"+EBX_Form.serialize(s)),E.widgetContainerEl.appendChild(s.firstChild),l.widget=document.getElementById(l.wrapperId),n.EBX_AjaxTable.initAPVListeners(l.widget),r++}E.onWidgetLoaded((function(){e.releaseWaitingCells(o),i(E.previousCellsWaitingForAjax===o),E.previousCellsWaitingForAjax===o&&(E.previousCellsWaitingForAjax=[])}))},C.handleAjaxResponseFailed=function(t){e.releaseWaitingCells(o),s(t),E.previousCellsWaitingForAjax===o&&(E.previousCellsWaitingForAjax=[])},C.sendRequest(this.gridEditorGetWidgetAjaxURL+"&prefixedPaths="+JSON.stringify(r))}else i(!0)},e.prototype.onWidgetLoaded=function(e){this.onWidgetLoadedHandler=e},e.prototype.getCellPath=function(e){var t=EBX_Utils.getIndex(e.tdElement);e.isPlacedInFixedContainer()?(t+=this.fixedColumnsWidgetIndexOffset,!0===this.table.header.isSeverityColumnDisplayed&&t--):t+=this.mainColumnsWidgetIndexOffset;var i=e.tdElement.parentNode.rowIndex,n=e.isPlacedInTheCreatePart()?this.widgetPathsForCreation:this.widgetPathsForEdition;return void 0===n[i]||void 0===n[i][t]?null:n[i][t]},e.prototype.editCell=function(e){if(e.isNoMoreAvailable)this.table.grid_selection.focusCell(e.cell,!0);else{this.table.copyModule.changeClipboardCellsStyle(!1),this.table.grid_selection.releaseCurrentSelection(),this.hideSeverityMessagePanel(e.cell.tdElement,e.cell.getTable()),this.currentWidgetForEditionObj=e,this.resizeWidgetContainer();var t=EBX_Utils.CellHorizontalSpacing-9;this.setInputWidthOfWidgets(this.table.header.columnDefinitionsByKey[this.currentWidgetForEditionObj.columnKey].width-1-2*t,this.currentWidgetForEditionObj.wrapperId);var i=this.currentWidgetForEditionObj.cellIndexForColumnDef,n=this.currentWidgetForEditionObj.fixedColumnsWidthToAdd,r=this.currentWidgetForEditionObj.gridCoords.lineIndex,o=e.cell.isPlacedInTheCreatePart()?this.table.element.create:this.table.element.update,l={top:o.getRowProperty(r).cumulativeHeight-o.getRowProperty(r).height,left:n+this.table.header.columnDefinitions[i].cumulativeWidth-this.table.header.columnDefinitions[i].width,width:this.table.header.columnDefinitions[i].width,height:o.getRowProperty(r).height};this.currentTdEdited=this.currentWidgetForEditionObj.cell.tdElement,this.currentWidgetIsPlacedInFixedContainer=this.currentWidgetForEditionObj.cell.isPlacedInFixedContainer(),this.currentWidgetIsPlacedInCreatePart=this.currentWidgetForEditionObj.cell.isPlacedInTheCreatePart(),this.currentWidgetEdited=this.currentWidgetForEditionObj.widget,this.currentWidgetEdited.style.maxHeight=this.widgetContainerCurrentPosition.height+"px",this.currentWidgetEdited.style.maxWidth=this.widgetContainerCurrentPosition.width+"px",this.currentWidgetEdited.lastChild.style.paddingTop=o.getRowProperty(r).offsetTop+"px",this.currentWidgetWidth=this.currentWidgetEdited.offsetWidth,this.currentWidgetHeight=this.currentWidgetEdited.offsetHeight;var a=!1;l.width===this.currentWidgetWidth||(l.width>this.currentWidgetWidth?(this.currentWidgetEdited.style.minWidth=l.width-1+"px",this.currentWidgetWidth=l.width):a=!0),l.height===this.currentWidgetHeight||(l.height>this.currentWidgetHeight?(this.currentWidgetEdited.style.minHeight=l.height-1+"px",this.currentWidgetHeight=l.height):a=!0),a&&EBX_Utils.addCSSClass(this.currentWidgetEdited,"ebx_GridEditorWidgetLargerThanTheTD"),this.currentWidgetLeft=l.left,this.currentWidgetTop=l.top,this.currentWidgetLeft+this.currentWidgetWidth>this.widgetContainerCurrentPosition.contentWidth&&(this.currentWidgetLeft=this.widgetContainerCurrentPosition.contentWidth-this.currentWidgetWidth),this.currentWidgetTop+this.currentWidgetHeight>this.widgetContainerCurrentPosition.contentHeight&&(this.currentWidgetTop=this.widgetContainerCurrentPosition.contentHeight-this.currentWidgetHeight),this.currentWidgetEdited.style.top=this.currentWidgetTop+"px",this.currentWidgetEdited.style.left=this.currentWidgetLeft+"px",this.currentWidgetEdited.style.visibility="visible",this.currentFormNodeEdited=EBX_FormNodeIndex.getFormNode(this.currentWidgetForEditionObj.prefixedPath),void 0!==this.currentFormNodeEdited.editorName&&(this.currentWidgetForEditionObj.previousValue=this.currentFormNodeEdited.getValue());var d=document.activeElement;if(!1===EBX_Form.focus(this.currentFormNodeEdited.inputName)||d===document.activeElement)if(void 0!==this.currentFormNodeEdited.editorName&&this.currentFormNodeEdited.getEditor()instanceof s.EBX_FormNodeEditor_HTML){var u=EBX_Form.TextareaIdEditor[this.currentFormNodeEdited.inputName];u&&u.focus()}else{var c=this.table.findFirstElementFocusableIn(this.currentWidgetEdited);c&&c.focus()}this.synchronizePositionOfCurrentWidgetEditedWithScroll(),this.table.grid_selection.focusEditAutoScroll(),EBX_Loader.stackKeyListener(EBX_Utils.keyCodes.ESCAPE,this.releaseCurrentEdition,this,{restorePreviousValue:!0})}},e.prototype.releaseCurrentEdition=function(e,t){void 0===t&&(t=!0);var i=null;null!==this.currentWidgetEdited&&(this.currentWidgetEdited.style.visibility="",this.currentWidgetEdited.style.minHeight="",this.currentWidgetEdited.style.minWidth="",EBX_Utils.removeCSSClass(this.currentWidgetEdited,"ebx_GridEditorWidgetLargerThanTheTD"),i=this.currentTdEdited),null!==this.currentFormNodeEdited&&(document.getElementById(this.widgetsFirstFocusRelaysId).focus(),e&&e.restorePreviousValue&&this.currentWidgetForEditionObj.previousValue&&ebx_form_setValue(this.currentWidgetForEditionObj.prefixedPath,this.currentWidgetForEditionObj.previousValue)),this.currentWidgetEdited=null,this.currentFormNodeEdited=null,this.currentTdEdited=null,t&&null!==i&&this.table.grid_selection.focusCell(new n.Cell(i),!0),EBX_Loader.removeKeyListener(EBX_Utils.keyCodes.ESCAPE,this.releaseCurrentEdition,this)},e.prototype.getWidgetForEdition=function(e){var t=EBX_Utils.getIndex(e.tdElement);e.isPlacedInFixedContainer()?(t+=this.fixedColumnsWidgetIndexOffset,this.table.header.isSeverityColumnDisplayed&&t--):t+=this.mainColumnsWidgetIndexOffset;var i=e.tdElement.parentNode.rowIndex,n=e.isPlacedInTheCreatePart()?this.widgetPathsForCreation:this.widgetPathsForEdition;return void 0===n[i]||void 0===n[i][t]?null:this.widgetsByPath[n[i][t]]},e.prototype.editWidgetFocusBefore=function(e){void 0===e&&(e=new n.Cell(this.currentTdEdited));var t=this.table.grid_selection.getCellLeft(e);if(null!==t){var i=this.getWidgetForEdition(t);null!==i&&i.isReadWrite?this.requestEditCell(t):this.editWidgetFocusBefore(t)}else null!==this.currentTdEdited&&this.requestEditCell(e)},e.prototype.editWidgetFocusAfter=function(e){void 0===e&&(e=new n.Cell(this.currentTdEdited));var t=this.table.grid_selection.getCellRight(e);if(null!==t){var i=this.getWidgetForEdition(t);null!==i&&i.isReadWrite?this.requestEditCell(t):this.editWidgetFocusAfter(t)}else null!==this.currentTdEdited&&this.requestEditCell(e)},e.prototype.editCellFromEvent=function(e,t){var i=n.EBX_AjaxTable.getCellFromEventTargetElement(EBX_Utils.getTargetElement(e),t);null!==i&&this.requestEditCell(new n.Cell(i))},e.prototype.resetRow=function(e){if(void 0===this.widgetPathsForEdition[e])return null;for(var t,i=[],n=0;void 0!==(t=this.widgetPathsForEdition[e][n]);){var s=this.widgetsByPath[t],r=EBX_FormNodeIndex.getFormNode(t);(s.isNewValueSet||null!==r&&0!==r.isWaiting)&&(null!==r?i.push(r):EBX_Logger.log("EBX_AjaxTable.resetRow: Widget (path="+t+") declared as newValueSet have no FormNode.",EBX_Logger.warn)),n++}EBX_FormPresenter.resetRecord(this.updateRecordIds[e],i)},e.prototype.setInputWidthOfWidgets=function(e,t){void 0===this.dynamicCSSBlock&&(this.dynamicCSSBlock=document.createElement("style"),EBX_LayoutManager.getDocumentHead().appendChild(this.dynamicCSSBlock),EBX_LayoutManager.isIE8&&(this.dynamicCSSBlock.id=this.table.tableName+"_DynamicCSS_GridEdit",this.dynamicCSSBlock=document.styleSheets[this.dynamicCSSBlock.id]));for(var i=["input[type=text]","input[type=password]","input[type=file]","select","textarea",".ebx_LCB_List",".ebx_LargeValue"],n="",s=0,r=i.length;s<r;s++)n+=".ebx_Form #"+t+" "+i[s]+",";n+="#"+t+" .ebx_InputTip",n+="{",n+="width:"+e+"px;",n+="}",n+="#"+t+" .ebx_MessageContainer,",n+="{",n+="max-width:"+e+"px;",n+="}",EBX_LayoutManager.isIE8?this.dynamicCSSBlock.cssText=n:this.dynamicCSSBlock.innerHTML=n},e.prototype.synchronizePositionOfCurrentWidgetEditedWithScroll=function(){if(null!==this.currentWidgetEdited){var e,t;if(this.currentWidgetIsPlacedInCreatePart)e=this.table.element.create.wrapper.scrollTop,t=this.currentWidgetIsPlacedInFixedContainer?this.table.element.create.fixed.scroll.scrollLeft:this.table.element.create.main.scroll.scrollLeft;else{var i=this.currentWidgetIsPlacedInFixedContainer?this.table.element.update.fixed.scroll:this.table.element.update.main.scroll;e=i.scrollTop,t=i.scrollLeft}if(this.widgetContainerEl.scrollTop=e,this.widgetContainerEl.scrollLeft=t,this.currentFormNodeEdited.getEditor&&void 0!==this.currentFormNodeEdited.editorName){var n=this.currentFormNodeEdited.getEditor();null!==n&&n instanceof s.EBX_FormNodeEditor_ISS&&s.EBX_FormNodeEditor_ISS.notifyInputPositionChanged()}}},e.prototype.synchronizeScrollFromWidgetContainer=function(){null!==this.currentWidgetEdited&&null===this.table.scroll.lastSyncScrollOrigin&&this.table.grid_selection.focusEditAutoScroll()},e.prototype.resizeWidgetContainer=function(){if(null!==this.currentWidgetForEditionObj&&void 0!==this.currentWidgetForEditionObj.cell){var e=this.currentWidgetForEditionObj.cell.isPlacedInTheCreatePart(),t=YAHOO.util.Dom.getRegion(e?this.table.element.create.wrapper:this.table.element.update.fixed.scroll);this.widgetContainerCurrentPosition.top=t.top,this.widgetContainerCurrentPosition.left=t.left+1,this.widgetContainerCurrentPosition.height=e?this.table.resizeModule.size.createHeight:this.table.scroll.mainScrollerHeight-this.table.scroll.currentScrollbarHeight,this.widgetContainerCurrentPosition.contentHeight=e?this.table.element.create.getLinesHeightsSum():this.table.element.update.getLinesHeightsSum(),this.widgetContainerCurrentPosition.contentHeight<this.widgetContainerCurrentPosition.height&&(this.widgetContainerCurrentPosition.contentHeight=this.widgetContainerCurrentPosition.height),this.widgetContainerCurrentPosition.width=this.table.resizeModule.size.containerWidth-this.table.scroll.currentScrollbarWidth-1,this.widgetContainerCurrentPosition.bottom=this.widgetContainerCurrentPosition.top+this.widgetContainerCurrentPosition.height,this.widgetContainerCurrentPosition.right=this.widgetContainerCurrentPosition.left+this.widgetContainerCurrentPosition.width,this.widgetContainerCurrentPosition.contentWidth=this.table.header.columnDefinitions[this.table.nbFixedColumns-1].cumulativeWidth+this.table.header.columnDefinitions[this.table.header.columnDefinitions.length-1].cumulativeWidth,this.widgetContainerCurrentPosition.contentWidth<this.widgetContainerCurrentPosition.width&&(this.widgetContainerCurrentPosition.contentWidth=this.widgetContainerCurrentPosition.width),this.widgetContainerEl.style.top=this.widgetContainerCurrentPosition.top+"px",this.widgetContainerEl.style.left=this.widgetContainerCurrentPosition.left+"px",this.widgetContainerEl.style.height=this.widgetContainerCurrentPosition.height+"px",this.widgetContainerEl.style.width=this.widgetContainerCurrentPosition.width+"px",this.widgetContainerScrollMaker.style.left=this.widgetContainerCurrentPosition.contentWidth+"px",this.widgetContainerScrollMaker.style.top=this.widgetContainerCurrentPosition.contentHeight+this.table.element.update.fixed.scrollMaker.offsetHeight+"px"}},e.prototype.getSeverityMessagePanel=function(){return void 0===this.severityMessagePanel&&(this.severityMessagePanel=new YAHOO.widget.Overlay("ebx_GridEdit_SeverityMessagePanel",{constraintoviewport:!0,visible:!1}),this.severityMessagePanel.render(document.body)),this.severityMessagePanel},e.prototype.buildSeverityMessage=function(e){var t=EBX_Utils.getIndex(e.tdElement);e.isPlacedInFixedContainer()?(t+=this.fixedColumnsWidgetIndexOffset,this.table.header.isSeverityColumnDisplayed&&t--):t+=this.mainColumnsWidgetIndexOffset;var i=e.tdElement.parentNode.rowIndex,n=e.isPlacedInTheCreatePart()?this.widgetPathsForCreation:this.widgetPathsForEdition;if(void 0===n[i]||void 0===n[i][t])return null;var s=n[i][t],r=ebx_form_getNodeMessage(s);if(null===r&&(r=this.orphanMessages[s]),void 0===r)return null;var o,l,a=[];if(void 0!==r.errors){for(a.push('<div class="ebx_IconError">'),o=r.errors.length,l=0;l<o;l++)a.push('<div class="ebx_Error">',r.errors[l],"</div>");a.push("</div>")}if(void 0!==r.warnings){for(a.push('<div class="ebx_IconWarning">'),o=r.warnings.length,l=0;l<o;l++)a.push('<div class="ebx_Warning">',r.warnings[l],"</div>");a.push("</div>")}if(void 0!==r.infos){for(a.push('<div class="ebx_IconInfo">'),o=r.infos.length,l=0;l<o;l++)a.push('<div class="ebx_Info">',r.infos[l],"</div>");a.push("</div>")}return 0===a.length?null:'<div class="ebx_MessageContainer">'+a.join("")+"</div>"},e.prototype.displaySeverityMessagePanel=function(e,t){var i=n.EBX_AjaxTable.getCellFromEventTargetElement(e,t);if(this.table.currentTdMouseOver!==i){this.table.currentTdMouseOver=i;var s=this.getSeverityMessagePanel(),r=this.buildSeverityMessage(new n.Cell(i));if(null!==r){s.setBody(r),s.cfg.setProperty("context",[i,"tl","bl",null,[0,0]]);var o="";1&i.parentNode.rowIndex?o+="ebx_tvEven":o+="ebx_tvOdd",EBX_Utils.removeCSSClass(s.element,"ebx_tvEven"),EBX_Utils.removeCSSClass(s.element,"ebx_tvOdd"),EBX_Utils.addCSSClass(s.element,o),s.show()}else s.hide()}else window.clearTimeout(this.table.currentTdMouseOver_HideTimeout)},e.prototype.hideSeverityMessagePanel=function(e,t){if(null!==e){var i=n.EBX_AjaxTable.getCellFromEventTargetElement(e,t);if(this.table.currentTdMouseOver!==i)return}this.table.currentTdMouseOver=null,this.getSeverityMessagePanel().hide()},e.prototype.deleteTableRow=function(e){var t,i,n,s=EBX_Utils.getFirstParentMatchingTagName(e,"TR"),r=s.rowIndex;s.parentNode.parentNode===this.table.element.update.fixed.table?(t=this.table.element.update.main.table.rows[r],i=this.buildDeletedRecordUpdateName(r),n=this.updateRecordParameterPrefix[r]):(t=this.table.element.create.main.table.rows[r],i=this.buildIgnoredRecordCreateName(r),n=this.createRecordParameterPrefix[r]);var o=i+"_ignoreValidation",l=document.getElementById(i),a=document.getElementById(o);null===l?(EBX_Utils.addCSSClass(e,EBX_ButtonUtils.buttonPushedCSSClass),EBX_Utils.addCSSClass(s,"ebx_tvRowToDelete"),EBX_Utils.addCSSClass(t,"ebx_tvRowToDelete"),(l=document.createElement("input")).type="hidden",l.id=i,l.name=i,l.value="true",this.widgetContainerEl.appendChild(l),(a=document.createElement("input")).type="hidden",a.id=o,a.name="EBX_AliasPrefixesIgnoreValidation",a.value=n,this.widgetContainerEl.appendChild(a)):(EBX_Utils.removeCSSClass(e,EBX_ButtonUtils.buttonPushedCSSClass),EBX_Utils.removeCSSClass(s,"ebx_tvRowToDelete"),EBX_Utils.removeCSSClass(t,"ebx_tvRowToDelete"),s.style.textDecoration="",t.style.textDecoration="",l.parentNode.removeChild(l),a.parentNode.removeChild(a))},e.prototype.buildIgnoredRecordCreateName=function(e){return this.table.tableName+"_creatingRecordToIgnore_"+e},e.prototype.buildDeletedRecordUpdateName=function(e){return this.table.tableName+"_recordFlaggedToDelete_"+e},e.releaseWaitingCells=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];n.widgetObj.cell.tdElement.innerHTML=n.backup,n.widgetObj.cell.tdElement.style.cursor="default"}},e}();t.GridEdit=o;var l=function(){},a=function(e,t){this.widgetObj=e,this.backup=t};t.CellLoadedConfig=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(13),r=i(6),o=function(){function e(e,t,i){this.table=e,this.content=t,this.gridEdit=i}return e.prototype.createNewRecord=function(e,t){this.buildTableForCreationIfAbsent();for(var i=this.table.element.create,s=i.fixed.table.rows.length,o=r.AjaxResponseRecordConstants.firstColumnContentIndexInResultLine+1+this.gridEdit.dataColumnsNumber,l=[],a=0;a<o;a++)a===r.AjaxResponseRecordConstants.firstColumnContentIndexInResultLine?l.push(this.virtualCellForCreate):l.push("");var d=!i.resizeCreate.isManuallyReduced&&this.table.resizeModule.size.createHeight<this.table.resizeModule.getCreateMaxHeightForAutoExpand();this.content.appendLine(s,0===s,l,i),this.table.refreshCellIndexes(),this.content.synchronizeLine(s,!0),i.setLinesHeightsSum(i.getRowProperty(s).cumulativeHeight),this.table.resizeModule.isAutoWidthNeeded&&this.table.header.initUndefinedColWidths(),i.fixed.scrollWrapper.style.height=i.getLinesHeightsSum()+"px",i.main.scrollWrapper.style.height=i.getLinesHeightsSum()+"px",this.table.getState()===n.EBX_Table_State.EMPTY&&(this.table.isTableReady=!0,this.table.setState(n.EBX_Table_State.NORMAL));var u=this.table.resizeModule.size.createHeight+i.getRowProperty(s).height;if(d&&(u<this.table.resizeModule.getCreateMaxHeightForAutoExpand()||this.table.resizeModule.size.createHeight>this.table.resizeModule.getCreateMaxHeightForAutoExpand())&&(this.table.resizeModule.size.createHeight=u),this.table.resizeModule.resize(),void 0===e||!1===e){this.gridEdit.releaseCurrentEdition();var c=i.fixed.table.rows[s];EBX_Utils.addCSSClass(c,"ebx_tvFixedRowWaitingForCreate");var h=this,p=document.createElement("div"),m=new EBX_AJAXResponseHandler;m.handleAjaxResponseSuccess=function(e){for(p.innerHTML=e,n.EBX_AjaxTable.initAPVListeners(p);null!==p.firstChild;)h.gridEdit.widgetContainerEl.appendChild(p.firstChild);EBX_Utils.removeCSSClass(c,"ebx_tvFixedRowWaitingForCreate")},m.handleAjaxResponseFailed=function(e){EBX_Logger.log("handleAjaxResponseFailed : "+e,EBX_Logger.error),EBX_Utils.removeCSSClass(c,"ebx_tvFixedRowWaitingForCreate")};var g="&newRecordIndex="+s;void 0!==t&&(g+="&recordIndexToDuplicate="+t),m.sendRequest(this.gridEditorCreateRecordAjaxURL+g)}},e.prototype.buildTableForCreationIfAbsent=function(){this.table.element.hasCreatePart()||(this.table.element.create=new s.Table_Element_Create(this.table),this.table.element.create.buildTableForCreationIfAbsent())},e.prototype.autoResizeCreatePartOnTableInit=function(){var e=this.table.resizeModule.size.createHeight,t=this.table.element.create.getLinesHeightsSum();t<this.table.resizeModule.getCreateMaxHeightForAutoExpand()&&t!==e&&(this.table.resizeModule.size.createHeight=t,this.table.resizeModule.resize())},e}();t.GridEdit_RecordCreation=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.table=e,this.isManuallyReduced=!1,this.minHeight=10}return e.prototype.startDragResizeCreateListener=function(e){this.isDragging=!0;var t=this.table.element.create;EBX_Utils.addCSSClass(t.resizeHandle,"ebx_OnDragging"),this.initialYPosition=e.y,this.minYPosition=this.initialYPosition-this.table.resizeModule.size.createHeight+this.minHeight,this.maxHeight=t.getLinesHeightsSum(),this.maxHeight>this.table.resizeModule.getCreateMaxHeight()&&(this.maxHeight=this.table.resizeModule.getCreateMaxHeight()),this.maxYPosition=this.initialYPosition-this.table.resizeModule.size.createHeight+this.maxHeight},e.prototype.dragResizeCreateListener=function(e){var t=this.table.element.create;t.resizeHandle.style.left="0";var i=e.e.clientY;i<this.minYPosition?t.resizeHandle.style.top=-this.table.resizeModule.size.createHeight+this.minHeight+"px":i>this.maxYPosition&&(t.resizeHandle.style.top=-this.table.resizeModule.size.createHeight+this.maxHeight+"px")},e.prototype.endDragResizeCreateListener=function(e){if(!1!==this.isDragging){this.isDragging=!1;var t=this.table.element.create;EBX_Utils.removeCSSClass(t.resizeHandle,"ebx_OnDragging");var i=e.e.clientY;i<this.minYPosition?i=this.minYPosition:i>this.maxYPosition&&(i=this.maxYPosition),this.table.resizeModule.size.createHeight+=i-this.initialYPosition,this.isManuallyReduced=this.table.resizeModule.size.createHeight<t.getLinesHeightsSum(),this.table.resizeModule.resize(),t.resizeHandle.style.top="0px"}},e.prototype.init=function(){this.yuiDD=new YAHOO.util.DD(this.table.element.create.resizeHandle),this.yuiDD.subscribe("startDragEvent",this.startDragResizeCreateListener,this,!0),this.yuiDD.subscribe("dragEvent",this.dragResizeCreateListener,this,!0),this.yuiDD.subscribe("endDragEvent",this.endDragResizeCreateListener,this,!0)},e}();t.Table_ResizeCreate=n},function(e,t,i){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.Table_Element_Main=r;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(r);t.Table_Element_WithScrollWrapper=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(7),r=function(){function e(e){this.table=e,this.currentSelection=null,this.currentSelectionBorder=null,this.currentTdFocused=null}return e.prototype.init=function(){var e=this;this.table.header.addColumnWidthChangeHandler((function(){null!=e.currentSelectionBorder&&e.currentSelectionBorder.isVisible()&&(e.currentSelectionBorder.hide(),e.currentSelectionBorder.draw())}))},e.prototype.focusEditAutoScroll=function(t){var i,n,s,r,o,l,a,d,u=YAHOO.widget.Overlay.VIEWPORT_OFFSET;o=t?t.isPlacedInFixedContainer():null!==this.table.gridEditModule.currentTdEdited?this.table.gridEditModule.currentWidgetForEditionObj.cell.isPlacedInFixedContainer():this.currentTdFocusedIsPlacedInFixedContainer,(l=t?t.isPlacedInTheCreatePart():null!==this.table.gridEditModule.currentTdEdited?this.table.gridEditModule.currentWidgetForEditionObj.cell.isPlacedInTheCreatePart():this.currentTdFocusedIsPlacedInCreatePart)?(a=this.table.element.create.wrapper,d=o?this.table.element.create.fixed.scroll:this.table.element.create.main.scroll):a=d=o?this.table.element.update.fixed.scroll:this.table.element.update.main.scroll;var c=d.scrollLeft,h=d.clientWidth,p=d.scrollWidth-h,m=a.scrollTop,g=a.clientHeight,f=a.scrollHeight-g;if(t||null===this.table.gridEditModule.currentTdEdited){if(!t&&null===this.currentTdFocused)return;var b=t?t.tdElement:this.currentTdFocused,E=EBX_Utils.getIndex(b);o?!1===this.table.header.isSeverityColumnDisplayed&&E++:E+=this.table.nbFixedColumns,i=this.table.header.columnDefinitions[E].width,n=this.table.header.columnDefinitions[E].cumulativeWidth-i;var C=b.parentNode.rowIndex,_=void 0;s=(_=l?this.table.element.create.getRowProperty(C):this.table.element.update.getRowProperty(C)).height,r=_.cumulativeHeight-s}else i=this.table.gridEditModule.currentWidgetWidth,s=this.table.gridEditModule.currentWidgetHeight,n=this.table.gridEditModule.currentWidgetLeft-YAHOO.util.Dom.getRegion(d).left+this.table.gridEditModule.widgetContainerCurrentPosition.left,r=this.table.gridEditModule.currentWidgetTop-YAHOO.util.Dom.getRegion(a).top+this.table.gridEditModule.widgetContainerCurrentPosition.top;var S=c;i>h?n-c<0&&n-c>h-i||(n-c<0?S=n-(h-i):n-c>h-i&&(S=n)):i>h-2*u?S=n-(h/2-i/2):n-c<u?S=n-u:n-c>h-i-u&&(S=n-(h-i-u)),null!==S&&(S<0?S=0:S>p&&(S=p));var v=m;s>g?r-m<0&&r-m>g-s||(r-m<0?v=r-(g-s):r-m>g-s&&(v=r)):s>g-2*u?v=r-(g/2-s/2):r-m<u?v=r-u:r-m>g-s-u&&(v=r-(g-s-u)),null!==v&&(v<0?v=0:v>f&&(v=f)),c===S&&m===v||(a===d?new YAHOO.util.Scroll(a,{scroll:{to:[S,v]}},e.editionModeAutoScrollAnimationDuration/1e3,YAHOO.util.Easing.easeOut).animate():(new YAHOO.util.Scroll(a,{scroll:{to:[0,v]}},e.editionModeAutoScrollAnimationDuration/1e3,YAHOO.util.Easing.easeOut).animate(),new YAHOO.util.Scroll(d,{scroll:{to:[S,m]}},e.editionModeAutoScrollAnimationDuration/1e3,YAHOO.util.Easing.easeOut).animate()))},e.prototype.focusCell=function(e,t){if(this.table.gridEditModule.releaseCurrentEdition(null,!1),this.releaseCurrentCellFocus(),this.releaseCurrentSelection(),this.table.gridEditModule.currentWidgetForEditionObj=this.table.gridEditModule.getWidgetForEdition(e),null!==this.table.gridEditModule.currentWidgetForEditionObj){this.currentTdFocused=e.tdElement,this.currentTdFocusedIsPlacedInFixedContainer=e.isPlacedInFixedContainer(),this.currentTdFocusedIsPlacedInCreatePart=e.isPlacedInTheCreatePart(),this.currentSelection=new o(this.table);var i=this.table.gridEditModule.currentWidgetForEditionObj.gridCoords.colIndex,s=this.table.gridEditModule.currentWidgetForEditionObj.gridCoords.lineIndex;!this.currentTdFocusedIsPlacedInCreatePart&&this.table.element.hasCreatePart()&&(s+=this.table.element.create.getNumberOfRowsDisplayed()),this.currentSelection.setRange(s,s,i,i);var r=this.table.gridEditModule.currentWidgetForEditionObj;r.isReadWrite&&!r.isNoMoreAvailable?EBX_Utils.addCSSClass(this.currentTdFocused,"ebx_TableCellFocused"):(EBX_Utils.addCSSClass(this.currentTdFocused,"ebx_TableCellDisabledFocused"),r.isNoMoreAvailable?this.currentTdFocused.title=n.EBX_AjaxTable.messages.table_notAvailableCell:this.currentTdFocused.title=n.EBX_AjaxTable.messages.table_readOnlyCell),!0!==t&&this.focusEditAutoScroll(),EBX_Loader.stackKeyListener(EBX_Utils.keyCodes.ESCAPE,this.releaseCurrentCellFocus,this),EBX_Loader.stackKeyListener(EBX_Utils.keyCodes.ENTER,this.table.gridEditModule.editCurrentCellFocus,this.table.gridEditModule),EBX_Loader.stackKeyListener(EBX_Utils.keyCodes.F2,this.table.gridEditModule.editCurrentCellFocus,this.table.gridEditModule),EBX_Loader.stackKeyListener(EBX_Utils.keyCodes.LEFT,this.focusCellLeft,this),EBX_Loader.stackKeyListener(EBX_Utils.keyCodes.UP,this.focusCellUp,this),EBX_Loader.stackKeyListener(EBX_Utils.keyCodes.RIGHT,this.focusCellRight,this),EBX_Loader.stackKeyListener(EBX_Utils.keyCodes.DOWN,this.focusCellDown,this),EBX_Loader.stackKeyWithModifierListener(EBX_Utils.keyCodes.LETTER_C,!0,!1,!1,this.table.copyModule.copy,this.table.copyModule),EBX_Loader.stackKeyWithModifierListener(EBX_Utils.keyCodes.LETTER_V,!0,!1,!1,this.table.copyModule.paste,this.table.copyModule),EBX_Loader.stackKeyWithModifierListener(EBX_Utils.keyCodes.RIGHT,!1,!0,!1,this.onSelectionShiftToRight,this),EBX_Loader.stackKeyWithModifierListener(EBX_Utils.keyCodes.LEFT,!1,!0,!1,this.onSelectionShiftToLeft,this),EBX_Loader.stackKeyWithModifierListener(EBX_Utils.keyCodes.UP,!1,!0,!1,this.onSelectionShiftToTop,this),EBX_Loader.stackKeyWithModifierListener(EBX_Utils.keyCodes.DOWN,!1,!0,!1,this.onSelectionShiftToBottom,this),EBX_Loader.stackKeyDownListener(EBX_Utils.keyCodes.SHIFT,this.disableTextSelection,this),EBX_Loader.stackKeyUpListener(EBX_Utils.keyCodes.SHIFT,this.renableTextSelection,this)}},e.prototype.onSelectionShiftToRight=function(){if(null!==this.currentSelection){var e=this.table.gridEditModule.currentWidgetForEditionObj.gridCoords.colIndex,t=new o(this.table);if(t.setRangeFrom(this.currentSelection),e>t.getColStart()){var i=t.getColStart()+1;t.setColStart(i),this.selectRangeCell(t),this.focusEditAutoScroll(t.getTopLeftCell())}else{var n=t.getColEnd()+1,s=this.table.header.columnDefinitions.length-3;this.table.header.isInheritanceColumnDisplayed&&s--,this.table.header.isSelectColumnEnabled&&s--,(n=Math.min(s,n))!==t.getColEnd()&&(t.setColEnd(n),this.selectRangeCell(t),this.focusEditAutoScroll(t.getTopRightCell()))}}},e.prototype.onSelectionShiftToLeft=function(){if(null!==this.currentSelection){var e=this.table.gridEditModule.currentWidgetForEditionObj.gridCoords.colIndex,t=new o(this.table);if(t.setRangeFrom(this.currentSelection),e<t.getColEnd()){var i=t.getColEnd()-1;t.setColEnd(i),this.selectRangeCell(t),this.focusEditAutoScroll(t.getTopRightCell())}else{var n=t.getColStart()-1;(n=Math.max(0,n))!==t.getColStart()&&(t.setColStart(n),this.selectRangeCell(t),this.focusEditAutoScroll(t.getTopLeftCell()))}}},e.prototype.onSelectionShiftToTop=function(){if(null!==this.currentSelection){var e=this.table.gridEditModule.currentWidgetForEditionObj.gridCoords.lineIndex;e+=this.table.element.hasCreatePart()&&!this.table.gridEditModule.currentWidgetForEditionObj.isForCreate?this.table.element.create.getNumberOfRowsDisplayed():0;var t=new o(this.table);if(t.setRangeFrom(this.currentSelection),e<t.getRowEnd()){var i=t.getRowEnd()-1;t.setRowEnd(i),this.selectRangeCell(t),this.focusEditAutoScroll(t.getBottomLeftCell())}else{var n=t.getRowStart()-1;(n=Math.max(n,0))!==t.getRowStart()&&(t.setRowStart(n),this.selectRangeCell(t),this.focusEditAutoScroll(t.getTopLeftCell()))}}},e.prototype.onSelectionShiftToBottom=function(){if(null!==this.currentSelection){var e=this.table.gridEditModule.currentWidgetForEditionObj.gridCoords.lineIndex;e+=this.table.element.hasCreatePart()&&!this.table.gridEditModule.currentWidgetForEditionObj.isForCreate?this.table.element.create.getNumberOfRowsDisplayed():0;var t=new o(this.table);if(t.setRangeFrom(this.currentSelection),e>t.getRowStart()){var i=t.getRowStart()+1;t.setRowStart(i),this.selectRangeCell(t),this.focusEditAutoScroll(t.getTopLeftCell())}else{var n=t.getRowEnd()+1,s=this.table.element.hasCreatePart()?this.table.element.create.getNumberOfRowsDisplayed():0;s+=this.table.element.update.getNumberOfRowsDisplayed(),(n=Math.min(n,s-1))!==t.getRowEnd()&&(t.setRowEnd(n),this.selectRangeCell(t),this.focusEditAutoScroll(t.getBottomLeftCell()))}}},e.prototype.releaseCurrentCellFocus=function(){null!==this.currentTdFocused&&(EBX_Utils.removeCSSClass(this.currentTdFocused,"ebx_TableCellDisabledFocused"),EBX_Utils.removeCSSClass(this.currentTdFocused,"ebx_TableCellFocused"),this.currentTdFocused.title=""),this.currentTdFocused=null,this.table.gridEditModule.currentWidgetForEditionObj=null,EBX_Loader.removeKeyListener(EBX_Utils.keyCodes.ESCAPE,this.releaseCurrentCellFocus,this),EBX_Loader.removeKeyListener(EBX_Utils.keyCodes.ENTER,this.table.gridEditModule.editCurrentCellFocus,this.table.gridEditModule),EBX_Loader.removeKeyListener(EBX_Utils.keyCodes.F2,this.table.gridEditModule.editCurrentCellFocus,this.table.gridEditModule),EBX_Loader.removeKeyListener(EBX_Utils.keyCodes.LEFT,this.focusCellLeft,this),EBX_Loader.removeKeyListener(EBX_Utils.keyCodes.UP,this.focusCellUp,this),EBX_Loader.removeKeyListener(EBX_Utils.keyCodes.RIGHT,this.focusCellRight,this),EBX_Loader.removeKeyListener(EBX_Utils.keyCodes.DOWN,this.focusCellDown,this),EBX_Loader.removeKeyWithModifierListener(EBX_Utils.keyCodes.LETTER_C,!0,!1,!1,this.table.copyModule.copy,this.table.copyModule),EBX_Loader.removeKeyWithModifierListener(EBX_Utils.keyCodes.LETTER_V,!0,!1,!1,this.table.copyModule.paste,this.table.copyModule),EBX_Loader.removeKeyDownListener(EBX_Utils.keyCodes.SHIFT,this.disableTextSelection,this),EBX_Loader.removeKeyUpListener(EBX_Utils.keyCodes.SHIFT,this.renableTextSelection,this)},e.prototype.disableTextSelection=function(){EBX_LayoutManager.isIE&&(document.onselectstart=function(){return!1}),EBX_Utils.addCSSClass(document.body,"shiftPressed")},e.prototype.renableTextSelection=function(){EBX_LayoutManager.isIE&&(document.onselectstart=null),EBX_Utils.removeCSSClass(document.body,"shiftPressed")},e.prototype.getCellLeft=function(e){var t=EBX_Utils.previousElementSibling(e.tdElement),i=e.isPlacedInFixedContainer(),s=e.getTable();if(i&&null===t)return null;if(null===t){var r=e.tdElement.parentNode.rowIndex;s=e.isPlacedInTheCreatePart()?this.table.element.create.fixed.table:this.table.element.update.fixed.table;var o=EBX_Utils.getElementChildAtIndex(EBX_Utils.firstElementChild(s),r);t=EBX_Utils.previousElementSibling(EBX_Utils.lastElementChild(o))}return null===t?null:new n.Cell(t)},e.prototype.getCellRight=function(e){var t=EBX_Utils.nextElementSibling(e.tdElement),i=e.getTable();if(!1===e.isPlacedInFixedContainer()&&null===EBX_Utils.nextElementSibling(t))return null;if(null===EBX_Utils.nextElementSibling(t)){var s=e.tdElement.parentNode.rowIndex;i=e.isPlacedInTheCreatePart()?this.table.element.create.main.table:this.table.element.update.main.table;var r=EBX_Utils.getElementChildAtIndex(EBX_Utils.firstElementChild(i),s);t=EBX_Utils.firstElementChild(r)}return new n.Cell(t)},e.prototype.getCellTop=function(e){var t;if(null===(t=EBX_Utils.previousElementSibling(e.tdElement.parentNode))){if(e.isPlacedInTheCreatePart()||!this.table.element.hasCreatePart())return null;var i=e.isPlacedInFixedContainer()?this.table.element.create.fixed.table:this.table.element.create.main.table;return new n.Cell(EBX_Utils.getElementChildAtIndex(i.rows[i.rows.length-1],EBX_Utils.getIndex(e.tdElement)))}return new n.Cell(EBX_Utils.getElementChildAtIndex(t,EBX_Utils.getIndex(e.tdElement)))},e.prototype.getCellDown=function(e){var t;if(null===(t=EBX_Utils.nextElementSibling(e.tdElement.parentNode))){if(e.isPlacedInTheCreatePart()&&this.table.element.hasUpdatePart()){var i=e.isPlacedInFixedContainer()?this.table.element.update.fixed.table:this.table.element.update.main.table;return new n.Cell(EBX_Utils.getElementChildAtIndex(i.rows[0],EBX_Utils.getIndex(e.tdElement)))}return null}return new n.Cell(EBX_Utils.getElementChildAtIndex(t,EBX_Utils.getIndex(e.tdElement)))},e.prototype.focusCellLeft=function(){var e=this.getCellLeft(new n.Cell(this.currentTdFocused));null!==e&&(null!==this.table.gridEditModule.getWidgetForEdition(e)&&this.focusCell(e))},e.prototype.focusCellUp=function(){var e=this.getCellTop(new n.Cell(this.currentTdFocused));null!==e&&this.focusCell(e)},e.prototype.focusCellRight=function(){var e=this.getCellRight(new n.Cell(this.currentTdFocused));null!==e&&this.focusCell(e)},e.prototype.focusCellDown=function(){var e=this.getCellDown(new n.Cell(this.currentTdFocused));null!==e&&this.focusCell(e)},e.prototype.onClickShift=function(e,t){if(null!==this.table.gridEditModule.currentWidgetForEditionObj){YAHOO.util.Event.stopEvent(e);var i=EBX_Utils.getTargetElement(e),s=new n.Cell(n.EBX_AjaxTable.getParentTdElement(i,t)),r=this.table.gridEditModule.getWidgetForEdition(s);if(null!==r){var l=new o(this.table),a=this.table.gridEditModule.currentWidgetForEditionObj.gridCoords.colIndex,d=this.table.gridEditModule.currentWidgetForEditionObj.gridCoords.lineIndex;this.table.gridEditModule.currentWidgetForEditionObj.isForCreate||(d+=this.table.element.hasCreatePart()?this.table.element.create.getNumberOfRowsDisplayed():0);var u=r.gridCoords.colIndex,c=r.gridCoords.lineIndex;this.table.isForCreate(t)||(c+=this.table.element.hasCreatePart()?this.table.element.create.getNumberOfRowsDisplayed():0),l.setRange(d,c,a,u),this.selectRangeCell(l)}}},e.prototype.selectRangeCell=function(e){this.releaseCurrentSelection(),e.onEachCell((function(t,i,n){EBX_Utils.addCSSClass(n.tdElement,"ebx_TableCellSelected"),e.isBorderTop(t)&&EBX_Utils.addCSSClass(n.tdElement,"ebx_TableCellSelected_Top"),e.isBorderBottom(t)&&EBX_Utils.addCSSClass(n.tdElement,"ebx_TableCellSelected_Bottom"),e.isBorderLeft(i)&&EBX_Utils.addCSSClass(n.tdElement,"ebx_TableCellSelected_Left"),e.isBorderRight(i)&&EBX_Utils.addCSSClass(n.tdElement,"ebx_TableCellSelected_Right")})),this.currentSelection=e,this.currentSelectionBorder=new s.SelectionRangeMask(this.table,s.SelectionBorderStyle.Solid,e),this.currentSelectionBorder.draw()},e.prototype.releaseCurrentSelection=function(){null!==this.currentSelection&&(this.currentSelection.onEachCell((function(e,t,i){EBX_Utils.removeCSSClass(i.tdElement,"ebx_TableCellSelected"),EBX_Utils.removeCSSClass(i.tdElement,"ebx_TableCellSelected_Top"),EBX_Utils.removeCSSClass(i.tdElement,"ebx_TableCellSelected_Bottom"),EBX_Utils.removeCSSClass(i.tdElement,"ebx_TableCellSelected_Left"),EBX_Utils.removeCSSClass(i.tdElement,"ebx_TableCellSelected_Right")})),null!=this.currentSelectionBorder&&(this.currentSelectionBorder.hide(),this.currentSelectionBorder=null),this.currentSelection=null)},e.prototype.getCurrentSelection=function(){return this.currentSelection},e.editionModeAutoScrollAnimationDuration=200,e}();t.GridEdit_Selection=r;var o=function(){function e(e){this.table=e,this.rowStart=0,this.rowEnd=0,this.colStart=0,this.colEnd=0}return e.prototype.setRange=function(e,t,i,n){this.rowStart=Math.min(e,t),this.rowEnd=Math.max(e,t),this.colStart=Math.min(i,n),this.colEnd=Math.max(i,n)},e.prototype.getRowStart=function(){return this.rowStart},e.prototype.getRowEnd=function(){return this.rowEnd},e.prototype.getColStart=function(){return this.colStart},e.prototype.getColEnd=function(){return this.colEnd},e.prototype.setRowEnd=function(e){this.rowEnd=e},e.prototype.setColEnd=function(e){this.colEnd=e},e.prototype.setColStart=function(e){this.colStart=e},e.prototype.setRowStart=function(e){this.rowStart=e},e.prototype.isBorderTop=function(e){return e===this.rowStart},e.prototype.isBorderBottom=function(e){return e===this.rowEnd},e.prototype.isBorderLeft=function(e){return e===this.colStart},e.prototype.isBorderRight=function(e){return e===this.colEnd},e.prototype.onEachCell=function(e){for(var t=this.getRowStart();t<=this.getRowEnd();t++)for(var i=this.getColStart();i<=this.getColEnd();i++){e(t,i,this.table.getCellAt(t,i))}},e.prototype.getTopLeftCell=function(){return this.table.getCellAt(this.getRowStart(),this.getColStart())},e.prototype.getTopRightCell=function(){return this.table.getCellAt(this.getRowStart(),this.getColEnd())},e.prototype.getBottomLeftCell=function(){return this.table.getCellAt(this.getRowEnd(),this.getColStart())},e.prototype.getBottomRightCell=function(){return this.table.getCellAt(this.getRowEnd(),this.getColEnd())},e.prototype.getHeight=function(){return this.rowEnd-this.rowStart+1},e.prototype.getWidth=function(){return this.colEnd-this.colStart+1},e.prototype.isLastCell=function(e,t){return this.isBorderBottom(e)&&this.isBorderRight(t)},e.prototype.setRangeFrom=function(e){this.rowStart=e.rowStart,this.rowEnd=e.rowEnd,this.colStart=e.colStart,this.colEnd=e.colEnd},e}();t.CellRange=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),s=i(2),r=i(0),o=i(4),l=i(10),a=function(){};t.ColumnDefinition=a;var d=function(){},u=function(){},c=function(){function e(e,t,i,n){this.table=e,this.columnDefinitions=t,this.isSelectColumnEnabled=n,this.elements=new u,this.resizeColumn=new d,this.columnWidthChangeHandler=[],this.headerContainerId=i+"_headerContainer",this.headerFixedContainerId=i+"_headerFixedContainer",this.headerMainContainerWrapperId=i+"_headerMainContainerWrapper",this.headerMainContainerId=i+"_headerMainContainer",this.selectAndSortMenuButtonId=i+"_selectAndSortMenuButton"}return e.prototype.initColumns=function(){var e,t,i,n,s,r,o,a;for(this.initColumnDefinitionsByKey(),this.isInheritanceColumnDisplayed=void 0!==this.columnDefinitionsByKey.ebx_tvColInheritance&&0!==this.columnDefinitionsByKey.ebx_tvColInheritance.width,this.elements.fixed.style.tableLayout="auto",this.elements.main.style.tableLayout="auto","Chrome"!==EBX_LayoutManager.browser&&"Safari"!==EBX_LayoutManager.browser||(EBX_Utils.addCSSClass(this.elements.fixed,"ebx_tvTableLayoutAutoForWebkit"),EBX_Utils.addCSSClass(this.elements.main,"ebx_tvTableLayoutAutoForWebkit")),this.table.resizeModule.size.fixedColumnsWidth=-1,i=0,this.table.nbFixedColumns=this.elements.fixedCells.length,this.table.nbMainColumns=this.elements.mainCells.length,n=0,s=0,this.table.resizeModule.isAutoWidthNeeded=!1,e=0;e<this.table.nbFixedColumns;e++,n++)void 0===this.columnDefinitions[n].width?((r=this.elements.fixedCells[e].offsetWidth)<0&&(r=0),this.columnDefinitions[n].headerWidth=r,this.table.resizeModule.size.fixedColumnsWidth+=this.columnDefinitions[n].headerWidth,this.table.resizeModule.isAutoWidthNeeded=!0):0!==this.columnDefinitions[n].width&&(this.table.resizeModule.size.fixedColumnsWidth+=this.columnDefinitions[n].width),this.columnDefinitions[n].cumulativeWidth=this.table.resizeModule.size.fixedColumnsWidth,this.columnDefinitions[n].resizeable&&(EBX_LayoutManager.isIPad?(YAHOO.util.Event.addListener(this.elements.fixedCells[e],"gesturestart",this.gestureStartResizeColumnListener,n,this),YAHOO.util.Event.addListener(this.elements.fixedCells[e],"gesturechange",this.gestureChangeResizeColumnListener,n,this),YAHOO.util.Event.addListener(this.elements.fixedCells[e],"gestureend",this.gestureEndResizeColumnListener,n,this)):((o=document.createElement("div")).className="ebx_ColumnResizeKnob",o.style.left=this.table.resizeModule.size.fixedColumnsWidth+"px",e===this.table.nbFixedColumns-1?this.elements.fixedContainer.parentNode.appendChild(o):this.elements.fixedContainer.appendChild(o),this.columnDefinitions[n].resizeKnob=o,YAHOO.util.Event.addListener(o,"mouseover",this.mouseOverResizeKnobListener,n,this),YAHOO.util.Event.addListener(o,"mouseout",this.mouseOutResizeKnobListener,null,this))),0!==this.columnDefinitions[n].width?(this.columnDefinitions[n].colIndexInDataTable=s,s++):this.columnDefinitions[n].colIndexInDataTable=void 0,this.columnDefinitions[n].colIndexInHeader=e;for(s=0,e=0,t=this.elements.mainCells.length;e<t;e++,n++)void 0===this.columnDefinitions[n].width?((r=this.elements.mainCells[e].offsetWidth)<0&&(r=0),this.columnDefinitions[n].headerWidth=r,i+=this.columnDefinitions[n].headerWidth,this.table.resizeModule.isAutoWidthNeeded=!0):0!==this.columnDefinitions[n].width&&(i+=this.columnDefinitions[n].width),this.columnDefinitions[n].cumulativeWidth=i,this.columnDefinitions[n].resizeable&&(EBX_LayoutManager.isIPad?(YAHOO.util.Event.addListener(this.elements.mainCells[e],"gesturestart",this.gestureStartResizeColumnListener,n,this),YAHOO.util.Event.addListener(this.elements.mainCells[e],"gesturechange",this.gestureChangeResizeColumnListener,n,this),YAHOO.util.Event.addListener(this.elements.mainCells[e],"gestureend",this.gestureEndResizeColumnListener,n,this)):((o=document.createElement("div")).className="ebx_ColumnResizeKnob",o.style.left=i+"px",this.elements.mainContainer.appendChild(o),this.columnDefinitions[n].resizeKnob=o,YAHOO.util.Event.addListener(o,"mouseover",this.mouseOverResizeKnobListener,n,this),YAHOO.util.Event.addListener(o,"mouseout",this.mouseOutResizeKnobListener,null,this))),0!==this.columnDefinitions[n].width?(this.columnDefinitions[n].colIndexInDataTable=s,s++):this.columnDefinitions[n].colIndexInDataTable=void 0,this.columnDefinitions[n].colIndexInHeader=e;for(this.elements.fixed.style.tableLayout="",this.elements.main.style.tableLayout="","Chrome"!==EBX_LayoutManager.browser&&"Safari"!==EBX_LayoutManager.browser||(EBX_Utils.removeCSSClass(this.elements.fixed,"ebx_tvTableLayoutAutoForWebkit"),EBX_Utils.removeCSSClass(this.elements.main,"ebx_tvTableLayoutAutoForWebkit")),n=0,e=0,t=(a=this.elements.fixedCells).length;e<t;e++,n++)0!==this.columnDefinitions[n].width&&(void 0!==this.columnDefinitions[n].width?a[e].style.width=this.columnDefinitions[n].width+"px":a[e].style.width=this.columnDefinitions[n].headerWidth+"px");for(e=0,t=(a=this.elements.mainCells).length;e<t;e++,n++)0!==this.columnDefinitions[n].width&&(void 0!==this.columnDefinitions[n].width?a[e].style.width=this.columnDefinitions[n].width+"px":a[e].style.width=this.columnDefinitions[n].headerWidth+"px");this.table.resizeModule.size.fixedColumnsWidth+l.Resize.mainContainerMinWidth>this.table.resizeModule.size.containerWidth&&(this.table.resizeModule.size.fixedColumnsWidth=this.table.resizeModule.size.containerWidth-l.Resize.mainContainerMinWidth),-1===this.table.resizeModule.size.fixedColumnsWidth?this.elements.fixedContainer.style.width="0":this.elements.fixedContainer.style.width=this.table.resizeModule.size.fixedColumnsWidth+"px",this.elements.mainContainerWrapper.style.width=this.table.resizeModule.size.containerWidth-this.table.resizeModule.size.fixedColumnsWidth+"px",this.elements.mainContainer.style.width=this.table.resizeModule.size.containerWidth-this.table.resizeModule.size.fixedColumnsWidth+"px"},e.prototype.initColumnDefinitionsByKey=function(){this.columnDefinitionsByKey={};for(var e=0,t=this.columnDefinitions.length;e<t;e++)this.columnDefinitionsByKey[this.columnDefinitions[e].key]=this.columnDefinitions[e]},e.prototype.initInternalElements=function(){this.elements.container=document.getElementById(this.headerContainerId),this.elements.fixedContainer=document.getElementById(this.headerFixedContainerId),this.elements.mainContainerWrapper=document.getElementById(this.headerMainContainerWrapperId),this.elements.mainContainer=document.getElementById(this.headerMainContainerId),this.table.resizeModule.size.headerHeight=this.elements.container.offsetHeight,this.elements.fixed=EBX_Utils.firstElementChild(this.elements.fixedContainer),this.elements.main=EBX_Utils.firstElementChild(this.elements.mainContainer);var e=this.elements.fixed.rows.item(0).cells,t=e.length;this.elements.fixedCells=[];for(var i=0,n=t-1;i<n;i++)this.elements.fixedCells.push(e.item(i));var s=this.elements.main.rows.item(0).cells,r=s.length;this.elements.mainCells=[];for(i=0,n=r-1;i<n;i++)this.elements.mainCells.push(s.item(i));var o=EBX_Utils.firstElementChild(e.item(t-1)).offsetTop,l=EBX_Utils.firstElementChild(s.item(r-1)).offsetTop;o!==l&&(o<l?e.item(t-1).style.paddingTop=l+"px":s.item(r-1).style.paddingTop=o+"px")},e.prototype.addListeners=function(){YAHOO.util.Event.addListener(this.elements.fixed,"click",this.clickOnHeaderTableListener,this.elements.fixed,this),YAHOO.util.Event.addListener(this.elements.main,"click",this.clickOnHeaderTableListener,this.elements.main,this),n.AdvancedSearch.registerMiddleware(this.updateSortByRelevancy.bind(this))},e.prototype.updateSortByRelevancy=function(e,t,i){var n=e(t,i);if(t.name===s.AdvancedSearchActions.SetFetchingData_success.NAME){var o=this.table.element.selectAndSortMenuButton;o&&(r.EBX_AjaxTable.isSortedByRelevancy(this.table.tableName,n)?(EBX_Utils.removeCSSClass(o,"ebx_HamburgerMenu"),EBX_Utils.addCSSClass(o,"ebx_tvSelectAndSortMenuButton_inverted"),EBX_Utils.addCSSClass(o,"ebx_SortByRelevancy"),o.title=r.EBX_AjaxTable.messages.table_sort_relevancyTooltip,EBX_ButtonUtils.setMenuItemChecked(this.selectAndSortMenuButtonId,"ebx_ToggleSortByRelevancyMenuAction",!0)):(EBX_Utils.removeCSSClass(o,"ebx_SortByRelevancy"),EBX_Utils.removeCSSClass(o,"ebx_tvSelectAndSortMenuButton_inverted"),EBX_Utils.addCSSClass(o,"ebx_HamburgerMenu"),this.table.isRecordSelectionEnabled?o.title=r.EBX_AjaxTable.messages.UITableEditor_selectAndSort_menu_tooltip:o.title=r.EBX_AjaxTable.messages.UITableEditor_view_sort_title,r.EBX_AjaxTable.isSortableByRelevancy(this.table.tableName,n)&&EBX_ButtonUtils.setMenuItemChecked(this.selectAndSortMenuButtonId,"ebx_ToggleSortByRelevancyMenuAction",!1)))}return n},e.prototype.updateSortFlags=function(){var e,t,i,n,s,o,l,a,d,u;for(a=[],e=0,t=(l=this.table.content.rawResponse.meta.sortState[0]).length;e<t;e++)a[l[e]]=e+1;for(o=this.table.content.rawResponse.meta.sortState,i=0,e=this.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInHeader+1,t=this.table.nbFixedColumns;e<t;e++,i++)s=this.elements.fixedCells[e],void 0===(d=a[i])?(u=null,d=null):u=(n=Math.pow(2,i%r.EBX_AjaxTable.maxIntPowerForBitwiseOperation))===(o[Math.floor(i/r.EBX_AjaxTable.maxIntPowerForBitwiseOperation)+1]&n),this.updateSortFlag(s,d,u);for(e=0,t=this.elements.mainCells.length;e<t;e++,i++)s=this.elements.mainCells[e],void 0===(d=a[i])?(u=null,d=null):u=(n=Math.pow(2,i%r.EBX_AjaxTable.maxIntPowerForBitwiseOperation))===(o[Math.floor(i/r.EBX_AjaxTable.maxIntPowerForBitwiseOperation)+1]&n),this.updateSortFlag(s,d,u)},e.prototype.updateSortFlag=function(t,i,n){var s;null!==(s=EBX_Utils.getFirstDirectChildMatchingCSSClass(t,e.sortFlagCSSClass))&&(n?(s.className=e.sortFlagCSSClass+" "+e.sortFlagAscCSSClass,this.table.isEditionMode?t.title=r.EBX_AjaxTable.messages.table_sortasc_info:t.title=r.EBX_AjaxTable.messages.table_sortdesc_action):!1===n?(s.className=e.sortFlagCSSClass+" "+e.sortFlagDescCSSClass,this.table.isEditionMode?t.title=r.EBX_AjaxTable.messages.table_sortdesc_info:t.title=r.EBX_AjaxTable.messages.table_sortasc_action):!0!==this.table.isEditionMode&&(s.className=e.sortFlagCSSClass,t.title=r.EBX_AjaxTable.messages.table_sortasc_action),EBX_Utils.getFirstDirectChildMatchingCSSClass(s,e.sortNumberCSSClass).innerHTML=null!==i?i:"")},e.prototype.updateSeverityColumn=function(){this.setSeverityColumnDisplayed(void 0!==this.table.content.rawResponse.meta.highestSeverity)},e.prototype.initUndefinedColWidths=function(){var e,t,i,n,s,o,l,a=this.table.element,d=a.hasUpdatePart()?a.update:null,u=a.hasCreatePart()?a.create:null;for(this.elements.fixed.style.tableLayout="auto",this.elements.main.style.tableLayout="auto",null!==d&&(d.fixed.table.style.tableLayout="auto",d.main.table.style.tableLayout="auto"),null!==u&&(u.fixed.table.style.tableLayout="auto",u.main.table.style.tableLayout="auto"),"Chrome"!==EBX_LayoutManager.browser&&"Safari"!==EBX_LayoutManager.browser||(EBX_Utils.addCSSClass(this.elements.fixed,"ebx_tvTableLayoutAutoForWebkit"),EBX_Utils.addCSSClass(this.elements.main,"ebx_tvTableLayoutAutoForWebkit"),null!==d&&(EBX_Utils.addCSSClass(d.fixed.table,"ebx_tvTableLayoutAutoForWebkit"),EBX_Utils.addCSSClass(d.main.table,"ebx_tvTableLayoutAutoForWebkit")),null!==u&&(EBX_Utils.addCSSClass(u.fixed.table,"ebx_tvTableLayoutAutoForWebkit"),EBX_Utils.addCSSClass(u.main.table,"ebx_tvTableLayoutAutoForWebkit"))),null!==d&&(EBX_Utils.addCSSClass(d.fixed.table,"ebx_tvAutoresize"),EBX_Utils.addCSSClass(d.main.table,"ebx_tvAutoresize")),null!==u&&(EBX_Utils.addCSSClass(u.fixed.table,"ebx_tvAutoresize"),EBX_Utils.addCSSClass(u.main.table,"ebx_tvAutoresize")),o=0,l=-1,e=this.elements.fixedCells,t=null===d?null:d.fixed.table.rows.item(0).cells,i=null===u?null:u.fixed.table.rows.item(0).cells,n=0,s=e.length;n<s;n++,o++){if(void 0===this.columnDefinitions[o].width){var c=e[n].offsetWidth;if(null!==t)(h=t[this.columnDefinitions[o].colIndexInDataTable].offsetWidth)>c&&(c=h);if(null!==i)(p=i[this.columnDefinitions[o].colIndexInDataTable].offsetWidth)>c&&(c=p);c>r.EBX_AjaxTable.constants.maxAutoWidthAtInit&&(c=r.EBX_AjaxTable.constants.maxAutoWidthAtInit),this.columnDefinitions[o].width=c}l+=this.columnDefinitions[o].width,this.columnDefinitions[o].cumulativeWidth=l}for(l=0,e=this.elements.mainCells,t=null===d?null:d.main.table.rows.item(0).cells,i=null===u?null:u.main.table.rows.item(0).cells,n=0,s=e.length;n<s;n++,o++){if(void 0===this.columnDefinitions[o].width){var h,p;c=e[n].offsetWidth;if(null!==t)(h=t[this.columnDefinitions[o].colIndexInDataTable].offsetWidth)>c&&(c=h);if(null!==i)(p=i[this.columnDefinitions[o].colIndexInDataTable].offsetWidth)>c&&(c=p);c>r.EBX_AjaxTable.constants.maxAutoWidthAtInit&&(c=r.EBX_AjaxTable.constants.maxAutoWidthAtInit),this.columnDefinitions[o].width=c}l+=this.columnDefinitions[o].width,this.columnDefinitions[o].cumulativeWidth=l}for(this.elements.fixed.style.tableLayout="",this.elements.main.style.tableLayout="",null!==d&&(d.fixed.table.style.tableLayout="",d.main.table.style.tableLayout=""),null!==u&&(u.fixed.table.style.tableLayout="",u.main.table.style.tableLayout=""),"Chrome"!==EBX_LayoutManager.browser&&"Safari"!==EBX_LayoutManager.browser||(EBX_Utils.removeCSSClass(this.elements.fixed,"ebx_tvTableLayoutAutoForWebkit"),EBX_Utils.removeCSSClass(this.elements.main,"ebx_tvTableLayoutAutoForWebkit"),null!==d&&(EBX_Utils.removeCSSClass(d.fixed.table,"ebx_tvTableLayoutAutoForWebkit"),EBX_Utils.removeCSSClass(d.main.table,"ebx_tvTableLayoutAutoForWebkit")),null!==u&&(EBX_Utils.removeCSSClass(u.fixed.table,"ebx_tvTableLayoutAutoForWebkit"),EBX_Utils.removeCSSClass(u.main.table,"ebx_tvTableLayoutAutoForWebkit"))),null!==d&&(EBX_Utils.removeCSSClass(d.fixed.table,"ebx_tvAutoresize"),EBX_Utils.removeCSSClass(d.main.table,"ebx_tvAutoresize")),null!==u&&(EBX_Utils.removeCSSClass(u.fixed.table,"ebx_tvAutoresize"),EBX_Utils.removeCSSClass(u.main.table,"ebx_tvAutoresize")),this.sendInitAllColumnWidths(),o=0,e=this.elements.fixedCells,t=null===d?null:d.fixed.table.rows.item(0).cells,i=null===u?null:u.fixed.table.rows.item(0).cells,n=0,s=e.length;n<s;n++,o++)0!==this.columnDefinitions[o].width&&(e[n].style.width=this.columnDefinitions[o].width+"px",null!==t&&(t[this.columnDefinitions[o].colIndexInDataTable].style.width=this.columnDefinitions[o].width+"px",t[this.columnDefinitions[o].colIndexInDataTable].style.minWidth=""),null!==i&&(i[this.columnDefinitions[o].colIndexInDataTable].style.width=this.columnDefinitions[o].width+"px",i[this.columnDefinitions[o].colIndexInDataTable].style.minWidth=""),this.alignResizeKnob(o));for(e=this.elements.mainCells,t=null===d?null:d.main.table.rows.item(0).cells,i=null===u?null:u.main.table.rows.item(0).cells,n=0,s=e.length;n<s;n++,o++)0!==this.columnDefinitions[o].width&&(e[n].style.width=this.columnDefinitions[o].width+"px",null!==t&&(t[this.columnDefinitions[o].colIndexInDataTable].style.width=this.columnDefinitions[o].width+"px",t[this.columnDefinitions[o].colIndexInDataTable].style.minWidth=""),null!==i&&(i[this.columnDefinitions[o].colIndexInDataTable].style.width=this.columnDefinitions[o].width+"px",i[this.columnDefinitions[o].colIndexInDataTable].style.minWidth=""),this.alignResizeKnob(o));this.table.resizeModule.isAutoWidthNeeded=!0},e.prototype.alignResizeKnob=function(e){void 0!==this.columnDefinitions[e].resizeKnob&&(e===this.table.nbFixedColumns-1?this.columnDefinitions[e].resizeKnob.style.left=this.table.resizeModule.size.fixedColumnsWidth+"px":this.columnDefinitions[e].resizeKnob.style.left=this.columnDefinitions[e].cumulativeWidth+"px")},e.prototype.clickOnHeaderTableListener=function(e,t){var i=EBX_Utils.getTargetElement(e);if("TH"!==i.tagName&&(i=EBX_Utils.getFirstParentMatchingTagName(i,"TH")),null!==i){var n=i.cellIndex;if(t===this.elements.main&&(n+=this.table.nbFixedColumns),this.columnDefinitions[n].sortable){var s=this.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInHeader+1;this.sortColumn(n-s)}}},e.prototype.sortColumn=function(e){this.table.isEditionMode||this.table.content.sortColumn(e)},e.prototype.getResizeColumnBar=function(){return void 0===this.resizeColumn.resizeColumnBar&&(this.resizeColumn.resizeColumnBar=document.createElement("div"),this.resizeColumn.resizeColumnBar.className="ebx_ResizeColumnBar",this.table.element.container.appendChild(this.resizeColumn.resizeColumnBar),YAHOO.util.Event.addListener(this.resizeColumn.resizeColumnBar,"mouseout",this.mouseOutResizeBarListener,null,this),YAHOO.util.Event.addListener(this.resizeColumn.resizeColumnBar,"mousedown",this.mouseDownResizeBarListener,null,this),YAHOO.util.Event.addListener(this.resizeColumn.resizeColumnBar,"mouseup",this.mouseUpResizeBarListener,null,this),YAHOO.util.Event.addListener(this.resizeColumn.resizeColumnBar,"dblclick",this.autoResizeColumn,null,this),this.resizeColumn.resizeColumnBarDD=new YAHOO.util.DD(this.resizeColumn.resizeColumnBar),this.resizeColumn.resizeColumnBarDD.subscribe("startDragEvent",this.startDragResizeBarListener,this,!0),this.resizeColumn.resizeColumnBarDD.subscribe("dragEvent",this.dragResizeBarListener,this,!0),this.resizeColumn.resizeColumnBarDD.subscribe("endDragEvent",this.endDragResizeBarListener,this,!0)),this.resizeColumn.resizeColumnBar},e.prototype.mouseOverResizeKnobListener=function(e,t){if(!this.resizeColumn.isDraggingResizeBar){var i=this.getResizeColumnBar(),n=this.columnDefinitions[t].cumulativeWidth;t>=this.table.nbFixedColumns?(n+=this.table.resizeModule.size.fixedColumnsWidth,n-=this.table.element.update.main.scroll.scrollLeft,!1===this.table.scroll.mainScrollerHasHScroll&&!1===this.table.scroll.fixedColumnsHasHScroll&&!1===this.table.scroll.mainScrollerHasVScroll&&n--):n-=this.table.element.update.fixed.scroll.scrollLeft;var s=this.table.resizeModule.size.containerHeight;this.table.scroll.mainScrollerHasHScroll||this.table.scroll.fixedColumnsHasHScroll?s-=this.table.scroll.hScrollHeight+1:!1===this.table.scroll.mainScrollerHasHScroll&&(s=this.table.resizeModule.size.headerHeight+this.table.resizeModule.size.createHeight+this.table.element.update.getLinesHeightsSum()),i.style.height=s+"px",i.style.left=n+"px",i.style.display="block",this.resizeColumn.currentColIndexResize=t,void 0!==this.columnDefinitions[this.resizeColumn.currentColIndexResize].width?this.resizeColumn.colWidthBeforeResize=this.columnDefinitions[this.resizeColumn.currentColIndexResize].width:this.resizeColumn.colWidthBeforeResize=this.columnDefinitions[this.resizeColumn.currentColIndexResize].headerWidth,this.resizeColumn.resizeBarMinLeft=n-this.resizeColumn.colWidthBeforeResize+o.EBX_AjaxTable_UIConstants.minWidthColumn,this.resizeColumn.startingResizeOffsetLeft=i.offsetLeft}},e.prototype.mouseOutResizeKnobListener=function(e){document.elementFromPoint(e.clientX,e.clientY)!==this.getResizeColumnBar()&&(this.resizeColumn.isMouseDownOnResizeBar||this.hideResizeBar())},e.prototype.hideResizeBar=function(){this.resizeColumn.isDraggingResizeBar||(this.getResizeColumnBar().style.display="none",this.resizeColumn.isMouseDownOnResizeBar=!1)},e.prototype.mouseDownResizeBarListener=function(){this.resizeColumn.isMouseDownOnResizeBar=!0},e.prototype.mouseUpResizeBarListener=function(){this.resizeColumn.isDraggingResizeBar||(this.resizeColumn.isMouseDownOnResizeBar=!1)},e.prototype.mouseOutResizeBarListener=function(){this.resizeColumn.isMouseDownOnResizeBar||this.hideResizeBar()},e.prototype.startDragResizeBarListener=function(){this.resizeColumn.isDraggingResizeBar=!0},e.prototype.dragResizeBarListener=function(){this.resizeColumn.resizeColumnBar.style.top="0",this.resizeColumn.resizeColumnBar.offsetLeft<this.resizeColumn.resizeBarMinLeft&&(this.resizeColumn.resizeColumnBar.style.left=this.resizeColumn.resizeBarMinLeft+"px")},e.prototype.endDragResizeBarListener=function(){if(!1!==this.resizeColumn.isDraggingResizeBar){this.resizeColumn.isDraggingResizeBar=!1;var e=this.resizeColumn.resizeColumnBar.offsetLeft-this.resizeColumn.startingResizeOffsetLeft;this.hideResizeBar(),this.setColumnWidth(this.resizeColumn.currentColIndexResize,this.resizeColumn.colWidthBeforeResize+e)&&this.sendColumnWidth(this.resizeColumn.currentColIndexResize)}},e.prototype.autoResizeColumn=function(){var e,t,i=null,n=null;this.hideResizeBar(),this.resizeColumn.currentColIndexResize<this.table.nbFixedColumns?(e=this.elements.fixed,this.table.element.hasUpdatePart()&&(i=this.table.element.update.fixed.table),this.table.element.hasCreatePart()&&(n=this.table.element.create.fixed.table),t=this.resizeColumn.currentColIndexResize):(e=this.elements.main,this.table.element.hasUpdatePart()&&(i=this.table.element.update.main.table),this.table.element.hasCreatePart()&&(n=this.table.element.create.main.table),t=this.resizeColumn.currentColIndexResize-this.table.nbFixedColumns);var s=this.columnDefinitions[this.resizeColumn.currentColIndexResize].colIndexInDataTable;e.rows[0].cells[t].style.width="",null!==i&&(i.rows[0].cells[s].style.width=""),null!==n&&(n.rows[0].cells[s].style.width=""),e.style.tableLayout="auto",null!==i&&(i.style.tableLayout="auto"),null!==n&&(n.style.tableLayout="auto"),"Chrome"!==EBX_LayoutManager.browser&&"Safari"!==EBX_LayoutManager.browser||(EBX_Utils.addCSSClass(e,"ebx_tvTableLayoutAutoForWebkit"),null!==i&&EBX_Utils.addCSSClass(i,"ebx_tvTableLayoutAutoForWebkit"),null!==n&&EBX_Utils.addCSSClass(n,"ebx_tvTableLayoutAutoForWebkit")),null!==i&&EBX_Utils.addCSSClass(i,"ebx_tvAutoresize"),null!==n&&EBX_Utils.addCSSClass(n,"ebx_tvAutoresize");var r,l=e.rows[0].cells[t].offsetWidth;null!==i&&(l<(r=i.rows[0].cells[s].offsetWidth)&&(l=r));null!=n&&(l<(r=n.rows[0].cells[s].offsetWidth)&&(l=r));e.style.tableLayout="",null!==i&&(i.style.tableLayout=""),null!=n&&(n.style.tableLayout=""),"Chrome"!==EBX_LayoutManager.browser&&"Safari"!==EBX_LayoutManager.browser||(EBX_Utils.removeCSSClass(e,"ebx_tvTableLayoutAutoForWebkit"),null!==i&&EBX_Utils.removeCSSClass(i,"ebx_tvTableLayoutAutoForWebkit"),null!==n&&EBX_Utils.removeCSSClass(n,"ebx_tvTableLayoutAutoForWebkit")),null!==i&&EBX_Utils.removeCSSClass(i,"ebx_tvAutoresize"),null!==n&&EBX_Utils.removeCSSClass(n,"ebx_tvAutoresize"),l<o.EBX_AjaxTable_UIConstants.minWidthColumn&&(l=o.EBX_AjaxTable_UIConstants.minWidthColumn),this.setColumnWidth(this.resizeColumn.currentColIndexResize,l)&&this.sendColumnWidth(this.resizeColumn.currentColIndexResize)},e.prototype.setSeverityColumnDisplayed=function(e){if(this.isSeverityColumnDisplayed=e,(!0===this.isSeverityColumnDisplayed||!1===this.isSeverityColumnDisplayed)&&!(this.isSeverityColumnDisplayed&&this.columnDefinitionsByKey.ebx_tvColSeverity.width===o.EBX_AjaxTable_UIConstants.statusColumnWidth||!1===this.isSeverityColumnDisplayed&&0===this.columnDefinitionsByKey.ebx_tvColSeverity.width)){var t,i,n;for(this.isSeverityColumnDisplayed?(this.columnDefinitionsByKey.ebx_tvColSeverity.width=o.EBX_AjaxTable_UIConstants.statusColumnWidth,this.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInDataTable=this.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInHeader,t=o.EBX_AjaxTable_UIConstants.statusColumnWidth,n=1,this.elements.fixedCells[this.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInHeader].style.display="",this.isSelectColumnEnabled&&!1===this.isInheritanceColumnDisplayed?this.elements.fixedCells[this.columnDefinitionsByKey.ebx_tvColSelect.colIndexInHeader].style.borderRight="none":this.isInheritanceColumnDisplayed&&(this.elements.fixedCells[this.columnDefinitionsByKey.ebx_tvColInheritance.colIndexInHeader].style.borderRight="none"),!1===this.isSelectColumnEnabled&&!1===this.isInheritanceColumnDisplayed&&(EBX_Utils.addCSSClass(this.elements.fixedCells[this.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInHeader],"ebx_tv_thFixed_firstVisible"),this.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInHeader+1<this.table.nbFixedColumns&&EBX_Utils.removeCSSClass(this.elements.fixedCells[this.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInHeader+1],"ebx_tv_thFixed_firstVisible"))):(this.columnDefinitionsByKey.ebx_tvColSeverity.width=0,this.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInDataTable=void 0,t=-o.EBX_AjaxTable_UIConstants.statusColumnWidth,n=-1,this.elements.fixedCells[this.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInHeader].style.display="none",this.isSelectColumnEnabled&&!1===this.isInheritanceColumnDisplayed?this.elements.fixedCells[this.columnDefinitionsByKey.ebx_tvColSelect.colIndexInHeader].style.borderRight="":this.isInheritanceColumnDisplayed&&(this.elements.fixedCells[this.columnDefinitionsByKey.ebx_tvColInheritance.colIndexInHeader].style.borderRight=""),!1===this.isSelectColumnEnabled&&!1===this.isInheritanceColumnDisplayed&&(EBX_Utils.removeCSSClass(this.elements.fixedCells[this.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInHeader],"ebx_tv_thFixed_firstVisible"),this.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInHeader+1<this.table.nbFixedColumns&&EBX_Utils.addCSSClass(this.elements.fixedCells[this.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInHeader+1],"ebx_tv_thFixed_firstVisible"))),this.columnDefinitionsByKey.ebx_tvColSeverity.cumulativeWidth+=t,i=this.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInHeader+1;i<this.table.nbFixedColumns;i++)this.columnDefinitions[i].cumulativeWidth+=t,this.columnDefinitions[i].colIndexInDataTable+=n,this.alignResizeKnob(i);this.table.resizeModule.resizeContainers()}},e.prototype.getResizeColumnBarTablet=function(){return void 0===this.resizeColumn.resizeColumnBarTablet&&(this.resizeColumn.resizeColumnBarTablet=document.createElement("div"),this.resizeColumn.resizeColumnBarTablet.className="ebx_ResizeColumnBar",this.elements.container.appendChild(this.resizeColumn.resizeColumnBarTablet)),this.resizeColumn.resizeColumnBarTablet},e.prototype.gestureStartResizeColumnListener=function(e,t){if(EBX_LayoutManager.getGestureResizePermission(EBX_LayoutManager.tableColumnResizeId)&&(void 0===this.resizeColumn.currentColIndexResize||null===this.resizeColumn.currentColIndexResize)){this.resizeColumn.currentColIndexResize=t,e.preventDefault();var i=this.columnDefinitions[t].cumulativeWidth;t>=this.table.nbFixedColumns?(i+=this.table.resizeModule.size.fixedColumnsWidth,i-=this.table.element.update.main.scroll.scrollLeft,!1===this.table.scroll.mainScrollerHasHScroll&&!1===this.table.scroll.fixedColumnsHasHScroll&&!1===this.table.scroll.mainScrollerHasVScroll&&i--):i-=this.table.element.update.fixed.scroll.scrollLeft;var n=this.getResizeColumnBarTablet(),s=this.table.resizeModule.size.containerHeight;this.table.scroll.mainScrollerHasHScroll||this.table.scroll.fixedColumnsHasHScroll?s-=this.table.scroll.hScrollHeight+1:!1===this.table.scroll.mainScrollerHasHScroll&&(s=this.table.resizeModule.size.headerHeight+this.table.resizeModule.size.createHeight+this.table.element.update.getLinesHeightsSum()),n.style.height=s+"px",n.style.left=i+"px",n.style.display="block",void 0!==this.columnDefinitions[this.resizeColumn.currentColIndexResize].width?this.resizeColumn.colWidthBeforeResize=this.columnDefinitions[this.resizeColumn.currentColIndexResize].width:this.resizeColumn.colWidthBeforeResize=this.columnDefinitions[this.resizeColumn.currentColIndexResize].headerWidth,this.resizeColumn.columnOffsetLeft=i-this.resizeColumn.colWidthBeforeResize,this.resizeColumn.startingResizeOffsetLeft=n.offsetLeft}},e.prototype.gestureChangeResizeColumnListener=function(e,t){if(EBX_LayoutManager.isCurrentGestureResize(EBX_LayoutManager.tableColumnResizeId)&&this.resizeColumn.currentColIndexResize===t){e.preventDefault();var i=this.resizeColumn.columnOffsetLeft+this.resizeColumn.colWidthBeforeResize*e.scale;i<this.resizeColumn.columnOffsetLeft+o.EBX_AjaxTable_UIConstants.minWidthColumn&&(i=this.resizeColumn.columnOffsetLeft+o.EBX_AjaxTable_UIConstants.minWidthColumn),this.getResizeColumnBarTablet().style.left=i+"px"}},e.prototype.gestureEndResizeColumnListener=function(e,t){if(EBX_LayoutManager.isCurrentGestureResize(EBX_LayoutManager.tableColumnResizeId)&&this.resizeColumn.currentColIndexResize===t){e.preventDefault(),this.getResizeColumnBarTablet().style.display="none";var i=this.resizeColumn.colWidthBeforeResize*e.scale;i<o.EBX_AjaxTable_UIConstants.minWidthColumn&&(i=o.EBX_AjaxTable_UIConstants.minWidthColumn),this.setColumnWidth(this.resizeColumn.currentColIndexResize,i)&&this.sendColumnWidth(this.resizeColumn.currentColIndexResize),this.resizeColumn.currentColIndexResize=null,EBX_LayoutManager.releaseCurrentGestureResize()}},e.prototype.setColumnWidth=function(e,t){var i,n,s;if(t<o.EBX_AjaxTable_UIConstants.minWidthColumn)return!1;for(i=t-(void 0!==this.columnDefinitions[this.resizeColumn.currentColIndexResize].width?this.columnDefinitions[this.resizeColumn.currentColIndexResize].width:this.columnDefinitions[this.resizeColumn.currentColIndexResize].headerWidth),this.columnDefinitions[e].width=t,s=e<this.table.nbFixedColumns?this.table.nbFixedColumns:this.columnDefinitions.length,n=e;n<s;n++)this.columnDefinitions[n].cumulativeWidth+=i,this.alignResizeKnob(n);return e<this.table.nbFixedColumns?(this.elements.fixedCells[e].style.width=t+"px",void 0!==this.table.element.update.fixed.table.rows.item(0)&&(this.table.element.hasCreatePart()&&(this.table.element.create.fixed.table.rows.item(0).cells.item(this.columnDefinitions[e].colIndexInDataTable).style.width=t+"px"),this.table.element.hasUpdatePart()&&(this.table.element.update.fixed.table.rows.item(0).cells.item(this.columnDefinitions[e].colIndexInDataTable).style.width=t+"px"))):(this.elements.mainCells[e-this.table.nbFixedColumns].style.width=t+"px",void 0!==this.table.element.update.main.table.rows.item(0)&&(this.table.element.hasCreatePart()&&(this.table.element.create.main.table.rows.item(0).cells.item(this.columnDefinitions[e].colIndexInDataTable).style.width=t+"px"),this.table.element.hasUpdatePart()&&(this.table.element.update.main.table.rows.item(0).cells.item(this.columnDefinitions[e].colIndexInDataTable).style.width=t+"px"))),this.notifyColumnWidthChange(e),this.table.resizeModule.resizeContainers(),!0},e.prototype.notifyColumnWidthChange=function(e){for(var t=0;t<this.columnWidthChangeHandler.length;t++){(0,this.columnWidthChangeHandler[t])(e)}},e.prototype.addColumnWidthChangeHandler=function(e){this.columnWidthChangeHandler.push(e)},e.prototype.sendColumnWidth=function(e){var t=this.columnDefinitions[e].width;t=Math.round(t);var i=r.EBX_AjaxTable.constants.tableNameParameter+this.table.tableName+r.EBX_AjaxTable.constants.columnKeyForWidthParameter+this.columnDefinitions[e].key+r.EBX_AjaxTable.constants.widthForColumnParameter+t;null!=this.table.sncParameter&&(i+=r.EBX_AjaxTable.constants.sncSpecificParameter+this.table.sncParameter),this.table.dataSource.setColumnWidth.sendRequest(i,null)},e.prototype.sendInitAllColumnWidths=function(){var e,t,i;for(i=[],e=this.columnDefinitionsByKey.ebx_tvColSeverity.colIndexInHeader+1,t=this.columnDefinitions.length;e<t;e++)i.push(Math.round(this.columnDefinitions[e].width));var n=r.EBX_AjaxTable.constants.tableNameParameter+this.table.tableName+r.EBX_AjaxTable.constants.widthsForColumnsParameter+i.join(",");null!=this.table.sncParameter&&(n+=r.EBX_AjaxTable.constants.sncSpecificParameter+this.table.sncParameter),this.table.dataSource.initAllColumnWidths.sendRequest(n,null)},e.sortFlagCSSClass="ebx_SortFlag",e.sortFlagAscCSSClass="ebx_SortFlagAsc",e.sortFlagDescCSSClass="ebx_SortFlagDesc",e.sortNumberCSSClass="ebx_SortNumber",e}();t.Header=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(7),s=function(){function e(e,t,i){this.table=e,this.selection=t,this.grid_selection=i}return e.prototype.addListeners=function(e){YAHOO.util.Event.addListener(this.table.element.update.fixed.table,"click",this.clickOnTableListener,this.table.element.update.fixed.table,this),YAHOO.util.Event.addListener(this.table.element.update.main.table,"click",this.clickOnTableListener,this.table.element.update.main.table,this),this.table.isOpenRecordEnabled&&(YAHOO.util.Event.addListener(e.fixed.table,"dblclick",this.selection.openRecordFromLine,e.fixed.table,this.selection),YAHOO.util.Event.addListener(e.main.table,"dblclick",this.selection.openRecordFromLine,e.main.table,this.selection))},e.prototype.clickOnTableListener=function(e,t){var i=EBX_Utils.getTargetElement(e);if(!EBX_Utils.matchCSSClass(i,n.SelectionRangeMask.CSS_MASK))if(this.table.isEditionMode){if(e.shiftKey)return void this.grid_selection.onClickShift(e,t);if(this.table.isInAFixedContainer(t)){if(!0===EBX_Utils.matchCSSClass(i,"ebx_duplicateTableRow")||null!==EBX_Utils.getFirstParentMatchingCSSClass(i,"ebx_duplicateTableRow")){var s=EBX_Utils.getFirstParentMatchingTagName(i,"TR");return void this.table.gridEditModule.creation.createNewRecord(!1,s.rowIndex)}if(!0===EBX_Utils.matchCSSClass(i,"ebx_revertTableRow")||null!==EBX_Utils.getFirstParentMatchingCSSClass(i,"ebx_revertTableRow")){s=EBX_Utils.getFirstParentMatchingTagName(i,"TR");return void this.table.gridEditModule.resetRow(s.rowIndex)}if(!0===EBX_Utils.matchCSSClass(i,"ebx_deleteTableRow")||null!==EBX_Utils.getFirstParentMatchingCSSClass(i,"ebx_deleteTableRow")){var r=void 0;return r=EBX_Utils.matchCSSClass(i,"ebx_deleteTableRow")?i:EBX_Utils.getFirstParentMatchingCSSClass(i,"ebx_deleteTableRow"),void this.table.gridEditModule.deleteTableRow(r)}}this.table.focusCellFromEvent(i,t,e)}else{if(this.table.isInAFixedContainer(t)){if(this.table.isRecordSelectionEnabled&&void 0!==i.tagName&&"INPUT"===i.tagName&&"checkbox"===i.type)if("ebx_tvSelectCell"===(o=i.parentElement.parentElement).className&&o.parentNode.parentNode.parentNode.parentNode===this.table.element.update.fixed.scroll)return void this.selection.selectRowCheckboxes(i,e);if(this.table.header.isInheritanceColumnDisplayed){var o,l=null;if(null!==(l=void 0!==i.tagName&&"BUTTON"===i.tagName?i:EBX_Utils.getFirstParentMatchingTagName(i,"BUTTON")))if("ebx_tvInheritanceCell"===(o=l.parentNode).className&&o.parentNode.parentNode.parentNode.parentNode===this.table.element.update.fixed.scroll)return this.selection.focusLineIndex(o.parentNode.rowIndex),void this.table.content.inheritance.clickOnInheritanceButton(o.parentNode.rowIndex)}}if(this.table.isOpenRecordSimpleClick){s=i;do{s=EBX_Utils.getFirstParentMatchingTagName(s,"TR")}while(s.parentNode.parentNode!==this.table.element.update.fixed.table);this.selection.focusLineIndex(s.rowIndex)}}},e}();t.NavigationRouter=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(5),r=function(){function e(e){this.table=e,this.buttonsFirst=[],this.buttonsLast=[],this.buttonsPrevious=[],this.buttonsNext=[],this.pageReports=[]}return e.prototype.goToFirstPage=function(){this.goToPage(n.EBX_AjaxTable.constants.firstPageParamValue)},e.prototype.goToPreviousPage=function(){this.goToPage(n.EBX_AjaxTable.constants.prevPageParamValue)},e.prototype.goToNextPage=function(){this.goToPage(n.EBX_AjaxTable.constants.nextPageParamValue)},e.prototype.goToLastPage=function(){this.goToPage(n.EBX_AjaxTable.constants.lastPageParamValue)},e.prototype.goToPage=function(e){this.table.content.loadPage(e)},e.prototype.sendRequestSetTablePageSize=function(e,t,i){var s;(s=[]).push(n.EBX_AjaxTable.constants.tableNameParameter,this.table.tableName),s.push(n.EBX_AjaxTable.constants.tablePageSize,e),this.setTablePageSize.sendRequest(s.join(""),this.getCallbackSetTablePageSizeObject(t,i)),this.table.isTableReady=!1,this.table.setState(n.EBX_Table_State.LOADING)},e.prototype.getCallbackSetTablePageSizeObject=function(e,t){return{success:this.callbackSetTablePageSizeSuccess,failure:this.callbackSetTablePageSizeFailure,scope:this,argument:{buttonID:e,optionIndex:t}}},e.prototype.callbackSetTablePageSizeSuccess=function(e,t,i){var n=t.results;if(void 0!==n)for(var s=0;s<n.length;s++){var r=n[s].message,o=n[s].severity;void 0===o&&(o=EBX_UserMessageManager.INFO),EBX_UserMessageManager.addMessage(r,o)}this.table.content.refreshCurrentPage();var l=EBX_ButtonUtils.menuButtonsMenu[i.buttonID];l=l[0];for(s=0;s<l.length;s++)l[s].checked=s===i.optionIndex;EBX_Form.resizeFormBody()},e.prototype.callbackSetTablePageSizeFailure=function(e,t,i){if(401===t.status)return this.table.isTableReady=!1,this.table.setState(n.EBX_Table_State.LOGOUT),void EBX_Loader.gotoTimeoutPage();n.EBX_Table_State.NORMAL!==this.table.getState()&&(this.table.isTableReady=!0,this.table.setState(n.EBX_Table_State.NORMAL)),EBX_Form.resizeFormBody()},e.prototype.sendRequestComputeTableSize=function(e){var t;(t=[]).push(n.EBX_AjaxTable.constants.tableNameParameter,this.table.tableName),this.computeTableSize.sendRequest(t.join(""),this.getCallbackComputeTableSizeObject(e)),this.table.isTableReady=!1,this.table.setState(n.EBX_Table_State.LOADING)},e.prototype.getCallbackComputeTableSizeObject=function(e){return{success:this.callbackComputeTableSizeSuccess,failure:this.callbackComputeTableSizeFailure,scope:this,argument:{buttonID:e}}},e.prototype.callbackComputeTableSizeSuccess=function(e,t,i){var n=t.results;if(void 0!==n)for(var s=0;s<n.length;s++){var r=n[s].message,o=n[s].severity;void 0===o&&(o=EBX_UserMessageManager.INFO),EBX_UserMessageManager.addMessage(r,o)}this.table.content.refreshCurrentPage()},e.prototype.callbackComputeTableSizeFailure=function(e,t,i){if(401===t.status)return this.table.isTableReady=!1,this.table.setState(n.EBX_Table_State.LOGOUT),void EBX_Loader.gotoTimeoutPage();n.EBX_Table_State.NORMAL!==this.table.getState()&&(this.table.isTableReady=!0,this.table.setState(n.EBX_Table_State.NORMAL))},e.prototype.init=function(){this.setTablePageSize=new s.YUI_XHRDataSourceJSON(n.EBX_AjaxTable.constants.setTablePageSizeRequest,e.tableSizeResponseSchema),this.computeTableSize=new s.YUI_XHRDataSourceJSON(n.EBX_AjaxTable.constants.computeTableSizeRequest,e.computeTableSizeResponseSchema)},e.prototype.registerPluggedComponents=function(){var e;if(void 0!==n.EBX_AjaxTable.pluggedComponentRegister.pageReportRegister[this.table.tableName]){var t=n.EBX_AjaxTable.pluggedComponentRegister.pageReportRegister[this.table.tableName];for(e=t.length-1;e>=0;e--)this.pageReports.push(document.getElementById(t[e]))}if(void 0!==n.EBX_AjaxTable.pluggedComponentRegister.buttonFirstRegister[this.table.tableName]){var i=n.EBX_AjaxTable.pluggedComponentRegister.buttonFirstRegister[this.table.tableName];for(e=i.length-1;e>=0;e--)this.buttonsFirst.push(document.getElementById(i[e]))}if(void 0!==n.EBX_AjaxTable.pluggedComponentRegister.buttonPreviousRegister[this.table.tableName]){var s=n.EBX_AjaxTable.pluggedComponentRegister.buttonPreviousRegister[this.table.tableName];for(e=s.length-1;e>=0;e--)this.buttonsPrevious.push(document.getElementById(s[e]))}if(void 0!==n.EBX_AjaxTable.pluggedComponentRegister.buttonNextRegister[this.table.tableName]){var r=n.EBX_AjaxTable.pluggedComponentRegister.buttonNextRegister[this.table.tableName];for(e=r.length-1;e>=0;e--)this.buttonsNext.push(document.getElementById(r[e]))}if(void 0!==n.EBX_AjaxTable.pluggedComponentRegister.buttonLastRegister[this.table.tableName]){var o=n.EBX_AjaxTable.pluggedComponentRegister.buttonLastRegister[this.table.tableName];for(e=o.length-1;e>=0;e--)this.buttonsLast.push(document.getElementById(o[e]))}},e.prototype.updateButtonsState=function(){var e,t=this.table.content.rawResponse.meta.hasPreviousPage,i=this.table.content.rawResponse.meta.hasNextPage;for(e=this.buttonsFirst.length-1;e>=0;e--)EBX_ButtonUtils.setButtonDisabled(this.buttonsFirst[e],!t);for(e=this.buttonsPrevious.length-1;e>=0;e--)EBX_ButtonUtils.setButtonDisabled(this.buttonsPrevious[e],!t);for(e=this.buttonsNext.length-1;e>=0;e--)EBX_ButtonUtils.setButtonDisabled(this.buttonsNext[e],!i);for(e=this.buttonsLast.length-1;e>=0;e--)EBX_ButtonUtils.setButtonDisabled(this.buttonsLast[e],!i)},e.prototype.updatePageReport=function(){for(var e=this.pageReports.length-1;e>=0;e--)this.pageReports[e].innerHTML=this.table.content.rawResponse.meta.pageReport;EBX_Form.resizeFormBody()},e.tableSizeResponseSchema={resultsList:"messages",fields:[{key:"message"},{key:"severity"}]},e.computeTableSizeResponseSchema={resultsList:"messages",fields:[{key:"message"},{key:"severity"}]},e}();t.Pagination=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),s=function(){function e(e){this.table=e,this.currentFixedScrollLeft=0}return e.prototype.init=function(){this.hScrollHeight=EBX_Utils.getHScrollHeight(),this.vScrollWidth=EBX_Utils.getVScrollWidth()},e.prototype.synchronizeScrollFromFixed=function(t,i){if(null===this.lastSyncScrollOrigin||this.lastSyncScrollOrigin===i){this.lastSyncScrollOrigin=i,this.currentFixedScrollLeft=i.scrollLeft,this.table.header.elements.fixedContainer.scrollLeft=this.currentFixedScrollLeft,i===this.table.element.update.fixed.scroll?(this.table.element.update.main.scroll.scrollTop=this.table.element.update.fixed.scroll.scrollTop,this.table.element.hasCreatePart()&&(this.table.element.create.fixed.scroll.scrollLeft=this.currentFixedScrollLeft)):this.table.element.hasCreatePart()&&i===this.table.element.create.fixed.scroll&&(this.table.element.update.fixed.scroll.scrollLeft=this.currentFixedScrollLeft,this.table.element.update.fixed.scroll.scrollLeft=this.currentFixedScrollLeft),this.currentFixedScrollLeft===this.fixedScrollerMaxScrollLeft?EBX_Utils.removeCSSClass(this.table.element.container,"ebx_tvContainerFixedHScrollLastBorderNotVisible"):EBX_Utils.addCSSClass(this.table.element.container,"ebx_tvContainerFixedHScrollLastBorderNotVisible"),window.clearTimeout(this.clearSyncScrollTimeout);var n=this;this.clearSyncScrollTimeout=window.setTimeout((function(){n.lastSyncScrollOrigin=null}),e.syncScrollLockDuration),this.table.gridEditModule.synchronizePositionOfCurrentWidgetEditedWithScroll()}},e.prototype.synchronizeScrolls=function(t,i){if(null===this.lastSyncScrollOrigin||this.lastSyncScrollOrigin===i){this.lastSyncScrollOrigin=i;var n=i.scrollLeft;this.table.header.elements.mainContainer.scrollLeft=n,i===this.table.element.update.main.scroll?(this.table.element.update.fixed.scroll.scrollTop=i.scrollTop,this.table.element.hasCreatePart()&&(this.table.element.create.main.scroll.scrollLeft=n)):this.table.element.hasCreatePart()&&i===this.table.element.create.main.scroll&&(this.table.element.update.main.scroll.scrollLeft=n),window.clearTimeout(this.clearSyncScrollTimeout);var s=this;this.clearSyncScrollTimeout=window.setTimeout((function(){s.lastSyncScrollOrigin=null}),e.syncScrollLockDuration),this.table.gridEditModule.synchronizePositionOfCurrentWidgetEditedWithScroll()}},e.prototype.addListenerTo=function(e){YAHOO.util.Event.addListener(e.fixed.scroll,"scroll",this.synchronizeScrollFromFixed,e.fixed.scroll,this),YAHOO.util.Event.addListener(e.main.scroll,"scroll",this.synchronizeScrolls,e.main.scroll,this)},e.prototype.refreshContainerCSSClasses=function(e){!1===this.createScrollerHasVScroll&&e.push("ebx_tvContainerCreateNoVScroll"),this.fixedColumnsHasHScroll&&e.push("ebx_tvContainerFixedHScroll"),this.mainScrollerHasHScroll&&e.push("ebx_tvContainerHScroll"),this.mainScrollerHasVScroll&&e.push("ebx_tvContainerVScroll"),this.currentFixedScrollLeft!==this.fixedScrollerMaxScrollLeft&&e.push("ebx_tvContainerFixedHScrollLastBorderNotVisible")},e.prototype.refreshScrollUpdateHeight=function(e){this.mainScrollerHeight=e.containerHeight-e.headerHeight-e.createHeight-e.createResizeHandleHeight,this.table.element.hasCreatePart()&&(this.table.element.create.wrapper.style.height=e.createHeight+"px"),this.table.element.update.fixed.scrollWrapper.style.height=this.mainScrollerHeight+"px",this.table.element.update.fixed.scroll.style.height=this.mainScrollerHeight+"px",this.table.element.update.main.scroll.style.height=this.mainScrollerHeight+"px"},e.prototype.refreshScrollPosition=function(){this.synchronizeScrollFromFixed(null,this.table.element.update.fixed.scroll),this.lastSyncScrollOrigin=null,this.synchronizeScrolls(null,this.table.element.update.main.scroll)},e.prototype.refreshScrollProperties=function(e){var t=!1;this.fixedScrollerMaxScrollLeft=0,this.table.header.columnDefinitions[this.table.nbFixedColumns-1].cumulativeWidth>e.fixedColumnsWidth&&(this.fixedScrollerMaxScrollLeft=this.table.header.columnDefinitions[this.table.nbFixedColumns-1].cumulativeWidth-e.fixedColumnsWidth,t=!0);var i=e.containerWidth-e.fixedColumnsWidth,s=this.table.header.columnDefinitions[this.table.header.columnDefinitions.length-1].cumulativeWidth>=i;this.currentScrollbarHeight=0,s&&(this.currentScrollbarHeight=this.hScrollHeight),this.mainScrollerHasVScroll=this.table.element.update.getLinesHeightsSum()>this.mainScrollerHeight-this.currentScrollbarHeight,this.currentScrollbarWidth=0,this.mainScrollerHasVScroll&&(this.currentScrollbarWidth=this.vScrollWidth),this.fixedColumnsHasHScroll=t,this.mainScrollerHasVScroll&&!1===t&&(this.fixedColumnsHasHScroll=e.fixedColumnsWidth+n.Resize.mainContainerMinWidth>e.containerWidth-this.currentScrollbarWidth),this.mainScrollerHasHScroll=s,this.mainScrollerHasVScroll&&!1===s&&(this.mainScrollerHasHScroll=this.table.header.columnDefinitions[this.table.header.columnDefinitions.length-1].cumulativeWidth>=i-this.currentScrollbarWidth,this.mainScrollerHasHScroll&&(this.currentScrollbarHeight=this.hScrollHeight),this.mainScrollerHasVScroll=this.table.element.update.getLinesHeightsSum()>this.mainScrollerHeight-this.currentScrollbarHeight)},e.prototype.hasScrollbarVisible=function(){return this.mainScrollerHasHScroll||this.fixedColumnsHasHScroll||this.mainScrollerHasVScroll},e.prototype.hasHorizontalScrollbarVisible=function(){return this.mainScrollerHasHScroll||this.fixedColumnsHasHScroll},e.syncScrollLockDuration=100,e}();t.Scroll=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(5),r=i(6),o=function(){function e(e){this.table=e,this.currentRowFocusedIndex=null,this.lastRowSelectedIndex=null}return e.prototype.registerPluggedComponents=function(){var e;if(this.selectReports=[],void 0!==n.EBX_AjaxTable.pluggedComponentRegister.selectReportRegister[this.table.tableName]){var t=n.EBX_AjaxTable.pluggedComponentRegister.selectReportRegister[this.table.tableName];for(e=t.length-1;e>=0;e--)this.selectReports.push({numberPlaceHolder:document.getElementById(t[e]+n.EBX_AjaxTable.constants.suffixSelectionNumber),labelOne:document.getElementById(t[e]+n.EBX_AjaxTable.constants.suffixSelectionLabelOne),labelMany:document.getElementById(t[e]+n.EBX_AjaxTable.constants.suffixSelectionLabelMany)})}if(this.buttonsOpen=[],void 0!==n.EBX_AjaxTable.pluggedComponentRegister.buttonOpenRegister[this.table.tableName]){var i=n.EBX_AjaxTable.pluggedComponentRegister.buttonOpenRegister[this.table.tableName];for(e=i.length-1;e>=0;e--)this.buttonsOpen.push(document.getElementById(i[e]))}},e.prototype.openRecordFromLine=function(e,t){var i=EBX_Utils.getTargetElement(e);EBX_Utils.clearSelection();do{i=EBX_Utils.getFirstParentMatchingTagName(i,"TR")}while(i.parentNode.parentNode!==t);this.openRecordIndex(i.rowIndex)},e.prototype.openCurrentFocusedRecord=function(){null!==this.currentRowFocusedIndex&&this.openRecordIndex(this.currentRowFocusedIndex)},e.prototype.openRecordIndex=function(e){this.currentRowFocusedIndex=e,this.updateFocusedLine(),this.table.isOpenInPopup?EBX_Utils.openInternalPopupLargeSizeHostedClose(this.table.openInPopupURL+this.table.content.rawResponse.results[e][r.AjaxResponseRecordConstants.keyIndexInResultLine]):(this.table.element.container.style.cursor="wait",location.assign(n.EBX_AjaxTable.constants.rowEditFormRequest+this.table.content.rawResponse.results[e][r.AjaxResponseRecordConstants.keyIndexInResultLine]))},e.prototype.updateFocusedLine=function(){var e,t=this.getFocusFlag();if(null!==this.currentRowFocusedIndex){if(this.table.isOpenRecordSimpleClick)for(e=this.buttonsOpen.length-1;e>=0;e--)EBX_Utils.addCSSClass(this.buttonsOpen[e],"ebx_OpenRecordEnabled");void 0!==this.table.element.update.getRowProperty(this.currentRowFocusedIndex).height?(t.style.display="",t.style.height=this.table.element.update.getRowProperty(this.currentRowFocusedIndex).height+"px",this.currentRowFocusedIndex>0?t.style.top=this.table.element.update.getRowProperty(this.currentRowFocusedIndex-1).cumulativeHeight+"px":t.style.top="0px"):this.table.callFunctionWhenTableIsReady(this.updateFocusedLine,null,this)}else if(t.style.display="none",this.table.isOpenRecordSimpleClick)for(e=this.buttonsOpen.length-1;e>=0;e--)EBX_Utils.removeCSSClass(this.buttonsOpen[e],"ebx_OpenRecordEnabled")},e.prototype.getFocusFlag=function(){return void 0===this.table.element.focusFlag&&(this.table.element.focusFlag=document.createElement("div"),this.table.element.focusFlag.className="ebx_tvFocusFlag"),this.table.resizeModule.size.fixedColumnsWidth<=0?this.table.element.update.main.scroll.appendChild(this.table.element.focusFlag):this.table.element.update.fixed.scroll.appendChild(this.table.element.focusFlag),this.table.element.focusFlag},e.prototype.updateSelectReport=function(){for(var e=this.selectReports.length-1;e>=0;e--)0===this.table.content.rawResponse.meta.selectedNumber?(this.selectReports[e].numberPlaceHolder.innerHTML="",this.selectReports[e].labelOne.style.display="none",this.selectReports[e].labelMany.style.display="none"):(this.selectReports[e].numberPlaceHolder.innerHTML=this.table.content.rawResponse.meta.selectedNumber.toString(),this.table.content.rawResponse.meta.selectedNumber>1?(this.selectReports[e].labelOne.style.display="none",this.selectReports[e].labelMany.style.display="inline"):(this.selectReports[e].labelOne.style.display="inline",this.selectReports[e].labelMany.style.display="none"));this.table.isWorkspaceTable&&EBX_LayoutManager.bodyLayout.resize()},e.prototype.focusLineIndex=function(e){this.currentRowFocusedIndex===e?this.currentRowFocusedIndex=null:this.currentRowFocusedIndex=e,this.updateFocusedLine()},e.prototype.selectRowFromCheckBox=function(e){if(!1!==this.table.isRecordSelectionEnabled){var t=e.parentNode.parentNode.parentNode.rowIndex;this.lastRowSelectedIndex=t,this.sendRequestSelectRowInterval(t,t,e.checked,e)}},e.prototype.selectRowsFromLastToCheckBox=function(e){var t,i;!1!==this.table.isRecordSelectionEnabled&&(t=this.lastRowSelectedIndex,i=e.parentNode.parentNode.parentNode.rowIndex,this.lastRowSelectedIndex=i,t<i?this.sendRequestSelectRowInterval(t,i,e.checked,e):this.sendRequestSelectRowInterval(i,t,e.checked,e))},e.prototype.selectCurrentPage=function(){!1!==this.table.isRecordSelectionEnabled&&(this.lastRowSelectedIndex=null,this.sendRequestSelectRowInterval(0,this.table.content.rawResponse.results.length-1,!0,this.table.element.selectAndSortMenuButton))},e.prototype.unselectCurrentPage=function(){!1!==this.table.isRecordSelectionEnabled&&(this.lastRowSelectedIndex=null,this.sendRequestSelectRowInterval(0,this.table.content.rawResponse.results.length-1,!1,this.table.element.selectAndSortMenuButton))},e.prototype.selectAllRecords=function(){!1!==this.table.isRecordSelectionEnabled&&this.sendRequestSelectAllRows(!0)},e.prototype.unselectAllRecords=function(){!1!==this.table.isRecordSelectionEnabled&&this.sendRequestSelectAllRows(!1)},e.prototype.sendRequestSelectRowInterval=function(t,i,s,r){var o;!1!==this.table.isRecordSelectionEnabled&&((o=[]).push(n.EBX_AjaxTable.constants.tableNameParameter,this.table.tableName),o.push(n.EBX_AjaxTable.constants.currentPageIdAjaxParameter,this.table.content.rawResponse.meta.currentTablePageId),o.push(n.EBX_AjaxTable.constants.selectRowFromIndexAjaxParameter,t),o.push(n.EBX_AjaxTable.constants.selectRowToIndexAjaxParameter,i),s?this.selectRows.sendRequest(o.join(""),this.getCallbackRowsSelectionObject(r)):this.unselectRows.sendRequest(o.join(""),this.getCallbackRowsSelectionObject(r)),null!==r&&r!==this.table.element.selectAndSortMenuButton&&(r.parentNode.style.backgroundPosition="center "+this.table.element.update.getRowProperty(r.parentNode.parentNode.parentNode.rowIndex).offsetTop+"px"),null!==r&&EBX_Utils.addCSSClass(r.parentNode.parentNode,e.CLASS_WAITING_ROW_FOR_SELECTION))},e.prototype.sendRequestSelectAllRows=function(e){if(!1!==this.table.isRecordSelectionEnabled){var t;(t=[]).push(n.EBX_AjaxTable.constants.tableNameParameter,this.table.tableName),t.push(n.EBX_AjaxTable.constants.currentPageIdAjaxParameter,this.table.content.rawResponse.meta.currentTablePageId),t.push(n.EBX_AjaxTable.constants.selectRowFromIndexAjaxParameter,0),t.push(n.EBX_AjaxTable.constants.selectRowToIndexAjaxParameter,this.table.content.rawResponse.results.length-1),t.push(n.EBX_AjaxTable.constants.selectAllRowsAjaxParameter,!0);var i=this.table.element.selectAndSortMenuButton;e?this.selectRows.sendRequest(t.join(""),this.getCallbackRowsSelectionObject(i)):this.unselectRows.sendRequest(t.join(""),this.getCallbackRowsSelectionObject(i)),this.table.isTableReady=!1,this.table.setState(n.EBX_Table_State.LOADING)}},e.prototype.reset=function(){this.updateFocusedLine(),this.updateSelectReport(),this.updateSelectAndSortMenuButton(),this.currentRowFocusedIndex=null,this.lastRowSelectedIndex=null},e.prototype.init=function(){this.table.isRecordSelectionEnabled&&(this.selectRows=new s.YUI_XHRDataSourceJSON(n.EBX_AjaxTable.constants.rowsSelectionRequest,e.selectRowResponseSchema),this.unselectRows=new s.YUI_XHRDataSourceJSON(n.EBX_AjaxTable.constants.rowsDeselectionRequest,e.selectRowResponseSchema))},e.prototype.selectRowCheckboxes=function(e,t){t.shiftKey&&null!==this.lastRowSelectedIndex?this.selectRowsFromLastToCheckBox(e):this.selectRowFromCheckBox(e)},e.prototype.getCallbackRowsSelectionObject=function(e){return{success:this.callbackRowsSelectionSuccess,failure:this.callbackRowsSelectionFailure,scope:this,argument:{selectionElementClicked:e}}},e.prototype.callbackRowsSelectionSuccess=function(e,t,i){var s,o,l,a,d,u,c;for(s=this.table.content.getCurrentResponseResultsByKey(),l=0,a=(o=t.results).length;l<a;l++)void 0!==(u=s[(d=o[l])[r.AjaxResponseRecordConstants.keyIndexInResultLine]])&&(u[r.AjaxResponseRecordConstants.compiledStateIndexInResultLine]=d[r.AjaxResponseRecordConstants.compiledStateIndexInResultLine]);n.EBX_Table_State.NORMAL!==this.table.getState()&&(this.table.isTableReady=!0,this.table.setState(n.EBX_Table_State.NORMAL)),this.table.content.rawResponse.meta.selectedNumber=t.meta.selectedNumber,c=null,null!==i.selectionElementClicked&&(c=i.selectionElementClicked.parentNode.parentNode),this.table.callFunctionWhenTableIsReady(this.endRowsSelectionSuccess,c,this)},e.prototype.endRowsSelectionSuccess=function(t){this.updateSelectReport(),this.updateLinesSelectionCheckbox(),this.updateSelectAndSortMenuButton(),this.table.triggerSelectionChange(),null!==t&&EBX_Utils.removeCSSClass(t,e.CLASS_WAITING_ROW_FOR_SELECTION)},e.prototype.callbackRowsSelectionFailure=function(e,t,i){if(401===t.status)return this.table.isTableReady=!1,this.table.setState(n.EBX_Table_State.LOGOUT),void EBX_Loader.gotoTimeoutPage();409===t.status&&EBX_UserMessageManager.addMessage(n.EBX_AjaxTable.messages.table_warning_select_pageChanged,EBX_UserMessageManager.WARNING),n.EBX_Table_State.NORMAL!==this.table.getState()&&(this.table.isTableReady=!0,this.table.setState(n.EBX_Table_State.NORMAL));var s=null;null!==i.selectionElementClicked&&(s=i.selectionElementClicked.parentNode),this.table.callFunctionWhenTableIsReady(this.endRowsSelectionFailure,s,this)},e.prototype.endRowsSelectionFailure=function(t){this.updateLinesSelectionCheckbox(),this.updateSelectAndSortMenuButton(),null!==t&&EBX_Utils.removeCSSClass(t,e.CLASS_WAITING_ROW_FOR_SELECTION)},e.prototype.updateLinesSelectionCheckbox=function(){var e,t,i,n,s;if(!1!==this.table.isRecordSelectionEnabled)for(e=this.table.element.update.fixed.table.rows,t=this.table.element.update.main.table.rows,i=0,n=this.table.content.rawResponse.results.length;i<n;i++)s=this.table.content.rawResponse.results[i][r.AjaxResponseRecordConstants.compiledStateIndexInResultLine].charAt(r.AjaxResponseRecordConstants.compiledRowStateIndexSelected)===r.AjaxResponseRecordConstants.compiledRowStateSelected,this.getSelectCheckbox(e[i]).checked=s,s?(EBX_Utils.addCSSClass(e[i],"ebx_tv_SelectedRow"),EBX_Utils.addCSSClass(t[i],"ebx_tv_SelectedRow")):(EBX_Utils.removeCSSClass(e[i],"ebx_tv_SelectedRow"),EBX_Utils.removeCSSClass(t[i],"ebx_tv_SelectedRow"))},e.prototype.getSelectCheckbox=function(e){return void 0===this.table.element.update.getRowProperty(e.rowIndex).selectCheckbox&&(this.table.element.update.getRowProperty(e.rowIndex).selectCheckbox=EBX_Utils.getFirstRecursiveChildMatchingTagName(e.firstChild,"input")),this.table.element.update.getRowProperty(e.rowIndex).selectCheckbox},e.prototype.updateSelectAndSortMenuButton=function(){if(null!==this.table.element.selectAndSortMenuButton){var e=void 0===this.table.content.rawResponse.results||0===this.table.content.rawResponse.results.length;EBX_ButtonUtils.setButtonDisabled(this.table.element.selectAndSortMenuButton,e)}},e.CLASS_WAITING_ROW_FOR_SELECTION="ebx_WaitingForSelection",e.selectRowResponseSchema={resultsList:"rowsToUpdate",metaFields:{selectedNumber:"selectedNumber"}},e}();t.Table_Selection=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.saveFilter=function(e){EBX_Utils.openInternalPopupWithSize(e,580,330,{isResizable:!0,isResizeRestrainedToMinSize:!0})},e.handleLabelChanges=function(){for(var t=document.getElementsByClassName("ebx_CollapsibleBlockContainer"),i=0;i<t.length;i++){var n=t[i].getElementsByTagName("input")[1];n.onkeyup=e.onLabelChanges,n.onchange=e.onLabelChanges}},e.onLabelChanges=function(t){var i=e.getCurrentLabel();document.getElementsByClassName("ebx_IconInfo")[0].children[0].textContent=e.isLabelAlreadyPersisted(i)?EBX_AdvancedSearch.savePopIn.information.update:EBX_AdvancedSearch.savePopIn.information.create},e.getCurrentLabel=function(){for(var e=[],t=document.getElementsByClassName("ebx_CollapsibleBlock"),i=0;i<t.length;i++){var n={locale:t[i].getElementsByTagName("span")[0].textContent,name:t[i].getElementsByTagName("input")[0].value};e.push(n)}return{labels:e}},e.isLabelAlreadyPersisted=function(e){if(0===EBX_AdvancedSearchSaveLabels.persistedFilters.length)return!1;for(var t=JSON.stringify(e),i=0;i<EBX_AdvancedSearchSaveLabels.persistedFilters.length;i++)if(t===JSON.stringify(EBX_AdvancedSearchSaveLabels.persistedFilters[i]))return!0;return!1},e}();t.AdvancedSearchSave=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(14),s=function(){function e(){}return e.render=function(e){requirejs(["react","react-dom","ebx/control/hierarchy/HierarchyTree"],(function(t,i,s){var r=document.getElementById(n.HierarchyWidgetConstants.CONTAINER_ID),o=s.HierarchyTree;i.render(t.createElement(o,{viewUrl:e}),r)}))},e}();t.EBX_HierarchyWidgetFacade=s},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e};Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),r=i(14),o=[];function l(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];null!=o?o.push((function(){e.apply(void 0,t)})):e.apply(void 0,t)}}var a,d=function(){function e(){}return e.isFilterApplied=void 0,e.submittedValue=void 0,e}();t.FindInHierarchyComponents=d,function(e){var t;e.init=function(){if(null!=o){for(;o.length>0;){var t=o;o=[],EBX_Utils.forEach(t,(function(e){e()}))}o=null,a.updateState((function(){return{value:e.submittedValue,submittedValue:e.submittedValue,isOpen:e.isFilterApplied,isInputTouched:!1}}))}},e.registerFindInHierarchyCriteriaTextInput=l((function(e){var i=document.getElementById(e),s=function(){a.updateState((function(e){return n({},e,{value:i.value})}))},r=EBX_Utils.debounce(s,void 0);i.addEventListener("keyup",r),i.addEventListener("change",s),i.addEventListener("click",(function(){a.updateState((function(e){return n({},e,{isInputTouched:!0})}))})),a.registerListeners((function(e,n){if(""===n.value&&(i.value=n.value),n.isOpen!==e.isOpen)if(n.isOpen){var s=setTimeout((function(){i.focus(),t=null}),"500");t=function(){clearTimeout(s),t=null}}else null!=t&&t()}))})),e.registerFindInHierarchyClearButton=l((function(e){var t=document.getElementById(e);t.addEventListener("click",(function(){a.updateState((function(e){return n({},e,{value:""})}))})),a.registerListeners((function(e,i){i.value&&""!==i.value?EBX_Utils.removeCSSClass(t,"ebx_Hidden"):EBX_Utils.addCSSClass(t,"ebx_Hidden")}))})),e.registerToggleFindInHierarchyBarButton=l((function(e){document.getElementById(e).addEventListener("click",(function(){a.updateState((function(e){return n({},e,{isOpen:!e.isOpen})}))})),a.registerListeners((function(e,t){var i=document.getElementById(r.HierarchyWidgetConstants.CONTAINER_ID),n=document.getElementById("ebx_WorkspaceHierarchyFindBar");t.isOpen?(EBX_Utils.addCSSClass(i,"ebx_WorkspaceHierarchyFindOpened"),EBX_Utils.addCSSClass(n,"ebx_WorkspaceHierarchyFindOpened")):(EBX_Utils.removeCSSClass(i,"ebx_WorkspaceHierarchyFindOpened"),EBX_Utils.removeCSSClass(n,"ebx_WorkspaceHierarchyFindOpened"))}))})),e.registerFindInHierarchyFindButton=l((function(e){var t=document.getElementById(e);a.registerListeners((function(e,i){var n=!i.isInputTouched&&i.value===i.submittedValue;t.disabled=n,n?EBX_Utils.addCSSClass(t,EBX_ButtonUtils.disabledButtonCSSClass):EBX_Utils.removeCSSClass(t,EBX_ButtonUtils.disabledButtonCSSClass)}))})),e.registerFindInHierarchyAdditionalActionsDiv=l((function(e){var t=document.getElementById(e);a.registerListeners((function(e,i){!!i.submittedValue?EBX_Utils.removeCSSClass(t,"ebx_Hidden"):EBX_Utils.addCSSClass(t,"ebx_Hidden")})),s.AdvancedSearch.registerStateListener((function(e,t){void 0!==t&&e.appliedFilter!==t.appliedFilter&&a.updateState((function(e){return n({},e,{isInputTouched:!!e.value,submittedValue:void 0})}))}))}))}(d=t.FindInHierarchyComponents||(t.FindInHierarchyComponents={})),t.FindInHierarchyComponents=d,function(e){var t={isOpen:!1,isInputTouched:!1},i=[];function n(e,t){for(var n=0;n<i.length;n++){(0,i[n])(e,t)}}e.registerListeners=function(e){i.push(e)},e.notifyListeners=n,e.updateState=function(e){var i=t,s=e(t);n(i,s),t=s}}(a=t.FindInHierarchyHelper||(t.FindInHierarchyHelper={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.componentIndex=e,this.currentFilter=null}return e.prototype.loadRoots=function(e,t,i){this.currentFilter=e,this.load(e,null,t,i)},e.prototype.buildRequest=function(e,t){var i=[];return i.push(EBX_MES_Constants.request_loadDatas),i.push("&",EBX_MES_Constants.param_ajaxComponentIndex,"=",encodeURIComponent(""+this.componentIndex)),t&&(i.push("&",EBX_MES_Constants.param_nodeId,"=",encodeURIComponent(t.id)),t.extras&&i.push("&",EBX_MES_Constants.param_extras,"=",encodeURIComponent(JSON.stringify(t.extras))),t.isSeeMore&&i.push("&","mes_seeMore","=",!0)),e&&i.push("&",EBX_MES_Constants.param_search,"=",encodeURIComponent(e)),i.join("")},e.prototype.load=function(e,t,i,n){var s=this,o=this.buildRequest(e,t);r().sendRequest(o,{success:function(t,n){if(e===s.currentFilter){var r=n.results;r.forEach((function(t){t.isLeaf=!!t.isLeaf,t.isEnabled=!!t.isEnabled,t.expanded=!!t.expanded,t.isLeaf&&!t.isSeeMore||(t.loadedChildren?t.loadChildren=function(e){e(t.loadedChildren)}:t.loadChildren=function(i,n){s.load(e,t,i,n)})})),i(r,n.meta)}},failure:function(e,t){401===t.status?EBX_Loader.gotoTimeoutPage():n(decodeURIComponent(t.statusText))}})},e}();t.MES_DataLoader=n;var s=null,r=function(){return null==s&&(s=new YAHOO.util.XHRDataSource(EBX_MES_Constants.request_loadDatas,{responseType:YAHOO.util.DataSource.TYPE_JSON,responseSchema:{resultsList:"items",fields:[{key:"id"},{key:"label"},{key:"labelForDisplay"},{key:"isLeaf"},{key:"icon"},{key:"isEnabled"},{key:"urlInfos"},{key:"extras"},{key:"isSeeMore"},{key:"loadedChildren"},{key:"expanded"}],metaFields:{width:"width",height:"height"}},connMethodPost:!0})),s}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(11),s=i(17),r=function(){function e(e,t,i,n,s,r,o,l){this.widgetId=e,this.componentIndex=t,this.linkedInput=i,this.panelBody=n,this.widgetTree=s,this.panel=r,this.parentContainer=o,this.treeContainer=l,this.forcedSize=new YAHOO.util.Region(0,0,0,0),this.panelMinHeight=36,this.initResize()}return e.prototype.initResize=function(){var e=this;this.panelResize=new YAHOO.util.Resize(n.ModelElementSelector_CSS.ID_BODY+this.widgetId,{handles:["br"],proxy:!0,ghost:!0,setSize:!1}),this.panelResize.set("minHeight",this.panelMinHeight),this.panelResize.set("minWidth",this.linkedInput.offsetWidth),EBX_Utils.addCSSClass(this.panelResize.getProxyEl(),"ebx_BorderBlockColored"),this.panelResize.subscribe("endResize",(function(t){e.forcedSize.height=Math.max(t.height,e.panelMinHeight),e.forcedSize.width=Math.max(t.width,e.linkedInput.offsetWidth),e.refreshPanelDimensions(),e.savePanelDimensions()}),null,this),this.panelResize.subscribe("startResize",(function(){var t=e.panelResize.getProxyEl();t.style.top="0",t.style.left="0";var i=YAHOO.util.Dom,n=i.getClientRegion(),s=i.getRegion(e.panel.element);e.panelResize.set("maxWidth",n.right-s.left-YAHOO.widget.Overlay.VIEWPORT_OFFSET);var r=n.bottom-s.top-e.getGutterBottom();r=Math.max(r,Math.min(e.panelMinHeight,e.widgetTree.getEl().offsetHeight)),e.panelResize.set("maxHeight",r)})),this.panelResize.subscribe("proxyResize",(function(t){var i=e.panelResize.getProxyEl(),n=2;0!==YAHOO.env.ua.gecko&&n--,i.style.width=t.width-n+"px",i.style.height=t.height+"px"}),null,!1)},e.prototype.savePanelDimensions=function(){if(this.forcedSize.height&&this.forcedSize.width){var e=[];e.push(EBX_MES_Constants.request_saveDimension),e.push("&",EBX_MES_Constants.param_ajaxComponentIndex,"=",this.componentIndex),e.push("&",EBX_ISS.requestParam_popupWidth,"=",this.forcedSize.width),e.push("&",EBX_ISS.requestParam_popupHeight,"=",this.forcedSize.height),(new YAHOO.util.XHRDataSource).sendRequest(e.join(""),null)}},e.prototype.refreshPanelDimensions=function(){var e=YAHOO.util.Dom,t=e.getClientRegion(),i=e.getRegion(this.linkedInput),n=t.bottom-i.bottom-this.getGutterBottom(),r=this.widgetTree.getEl().offsetHeight+EBX_Utils.getHScrollHeight();this.forcedSize.height&&(r=Math.min(r,this.forcedSize.height));var o=Math.min(r,n);if(o=Math.max(o,this.panelMinHeight),this.panel.element.style.height=r<this.panelMinHeight?this.panelMinHeight+"px":"inherit",this.treeContainer.style.maxHeight=o+"px",this.panel.element.style.maxHeight=o+"px",this.forcedSize.width){var l=t.right-i.left-YAHOO.widget.Overlay.VIEWPORT_OFFSET;l=Math.min(l,this.forcedSize.width),l=Math.max(l,this.linkedInput.offsetWidth),this.panel.element.style.width=l+"px"}this.panel.align("tl","bl",[-1,-1]);var a=s.EBX_ScrollMaker.getScrollMaker(this.parentContainer);a.isElemOverflowing()||(a.makeElementDisplayed(this.panel.element),this.panel.align("tl","bl",[-1,-1]))},e.prototype.getGutterBottom=function(){return s.EBX_ScrollMaker.getScrollMaker(this.parentContainer).gutterBottom},e.prototype.updateForcedSize=function(e){this.forcedSize.width=e.width,this.forcedSize.height=e.height},e.prototype.setPanelMinHeight=function(e){this.panelMinHeight=e,this.panelResize.set("minHeight",this.panelMinHeight)},e}();t.MES_Panel_Resize=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAnInterestingKeyEventBasic=function(e){if(e.metaKey)return!1;if(e.ctrlKey){if(e.keyCode!==EBX_Utils.keyCodes.KEY_V&&!e.altKey)return!1;if(e.keyCode===EBX_Utils.keyCodes.NUMPAD_PLUS||e.keyCode===EBX_Utils.keyCodes.NUMPAD_MINUS)return!1}else if(e.altKey)return!1;switch(e.keyCode){case EBX_Utils.keyCodes.CTRL:case EBX_Utils.keyCodes.ALT:case EBX_Utils.keyCodes.CAPS_LOCK:case EBX_Utils.keyCodes.NUM_LOCK:case EBX_Utils.keyCodes.SCROLL_LOCK:case EBX_Utils.keyCodes.PAUSE:case EBX_Utils.keyCodes.PAGE_DOWN:case EBX_Utils.keyCodes.PAGE_UP:case EBX_Utils.keyCodes.HOME:case EBX_Utils.keyCodes.END:case EBX_Utils.keyCodes.SHIFT:case EBX_Utils.keyCodes.WIN_MENU:case EBX_Utils.keyCodes.WIN_KEY:return!1}return!EBX_Utils.isFunctionKey(e.keyCode)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(8),s=function(){function e(e){this.value=null,this.widgetId=EBX_Utils.firstElementChild(e).id,this.value=this.getWidget().lastValidValue,this.paramLabel=this.getLabel().name+"_label"}return e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(e){return this.setInnerValue(e,!e||!e.labelLoaded)},e.prototype.setInnerValue=function(e,t){return null===e||e.id===ebx_nullValueForFacetEnum?(this.value=null,this.onValueChange(t)):(this.value=e,this.onValueChange(t)),!0},e.prototype.getWidget=function(){return this.widget||(this.widget=n.EBX_ModelElementSelector_Registry.GetWidget(this.widgetId)),this.widget},e.prototype.getLabel=function(){return this.labelElement||(this.labelElement=EBX_Utils.firstElementChild(this.getWidget().input.parentElement)),this.labelElement},e.prototype.serialize=function(){var e=this.getLabel(),t=encodeURIComponent(e.name)+"="+encodeURIComponent(e.value);return t+="&"+encodeURIComponent(this.paramLabel)+"="+encodeURIComponent(this.getWidget().input.value)},e.prototype.onValueChange=function(e){this.getLabel().value=this.value?this.value.id:ebx_nullValueForFacetEnum,this.getWidget().onValueChange(this.value,e),e&&EBX_FormPresenter.stackElementForValidation(this.getWidget().input)},e.prototype.notifyInputPositionChanged=function(){this.getWidget().notifyInputPositionChanged()},e.prototype.setPastedValue=function(e){var t={id:e.getValue(),label:e.getValue()};this.setInnerValue(t,!1)},e.prototype.getCopyValue=function(){return this.getValue().id},e}();t.EBX_MES_FormNodeEditor=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="ebx_password_edit",s=function(){function e(){}return e.InEdition=n+"_expanded",e.PasswordChange=n+"_changed",e.NewPasswordContainer=n+"_fields",e.PasswordInput=n+"_fields_password",e.PasswordDisabled=n+"_fields_password_disabled",e.ConfirmZone=n+"_confirm_zone",e.ConfirmZoneWidgets=n+"_confirm_zone_widgets",e.PasswordConfirmInput=n+"_confirm_zone_input",e.PasswordConfirmLabel=n+"_confirm_zone_label",e.ConfirmZoneShadow=n+"_confirm_zone_shadow",e.PasswordButtons=n+"_buttons",e.ToggleButton=n+"_buttons_change",e.ShowButton=n+"_buttons_show_passwords",e.ShowButtonInEdition=n+"_buttons_show_passwords_in_edition",e}(),r=function(){function e(e,t,i){this.fieldName=e,this.prefixedPath=t,this.alwaysInEdition=i,this.newPasswordBackup="",this.newConfirmPasswordBackup="",this.wasShowingPassword=!1,this.changeConfirmZoneOverflowCallback=null,this._container=document.getElementById(e),this.inEdition=i,this.showingPassword=!1,this.initialRendering(),this.refreshEditMode()}return e.prototype.setInEdition=function(e){this.inEdition=e,this.refreshEditMode()},e.prototype.checkPasswordEqualsItsConfirmation=function(){var e=this;null!=document.getElementById(this.fieldName+"_InputFieldWrapper")&&(window["checkPasswordsEqualsBeforeSubmit_"+this.fieldName]=function(){var t=e.passwordEqualsItsConfirmation();return t||ebx_form_setNodeMessage(e.prefixedPath,{errors:[EBX_LocalizedMessage.password_match]}),t},EBX_Form.addCustomCheckBeforeSubmit(window["checkPasswordsEqualsBeforeSubmit_"+this.fieldName]))},e.prototype.initialRendering=function(){var e=this,t=this.alwaysInEdition?"":'\n            <button class="'+EBX_UICSSCatalog.BUTTON_FLAT_BUTTON+" "+EBX_UICSSCatalog.BUTTON_ICON_BUTTON+" "+s.ToggleButton+'" \n                type="button">\n                  <span class="'+EBX_UICSSCatalog.BUTTON_ICON+'">&nbsp;</span>\n            </button>\n        ',i=[EBX_UICSSCatalog.BUTTON_FLAT_BUTTON,EBX_UICSSCatalog.BUTTON_ICON_BUTTON,s.ShowButton];this.alwaysInEdition||i.push(s.ShowButtonInEdition);var n='\n            <button class="'+i.join(" ")+'" title="'+EBX_LocalizedMessage.password_show+'" type="button" tabindex="-1">\n                <i class="fa fa-eye"></i>\n            </button>\n        ';this._container.innerHTML='\n          \x3c!-- Buttons --\x3e\n          <div class="'+s.PasswordButtons+'">\n            '+t+"\n            "+n+'\n          </div>\n\n          <div class="'+s.NewPasswordContainer+'">\n              \x3c!-- New password zone --\x3e\n              <input type="password" class="'+s.PasswordInput+'" name="'+this.fieldName+'" disabled autocomplete="new-password"/>\n          \n              \x3c!-- Confirm new password zone   --\x3e\n              <div class="'+s.ConfirmZone+'">\n                <div class="'+s.ConfirmZoneWidgets+'">\n                  <span class="ebx_InputTip '+s.PasswordConfirmLabel+'">'+EBX_LocalizedMessage.password_ask_confirm+'</span>\n                  <input type="password" name="'+this.fieldName+'_passwordConfirm" class="ebx_IgnoreFormCheck  '+s.PasswordConfirmInput+'" autocomplete="new-password"/>\n                </div>\n                <div class="'+s.ConfirmZoneShadow+'"></div>\n              </div>\n          </div>\n          \n           <input type="hidden" name="'+this.fieldName+'_passwordHasBeenEdited" class="'+s.PasswordChange+' ebx_IgnoreFormCheck" autocomplete="new-password"/>\n        ',this.alwaysInEdition||(this._editPasswordButton=this._container.querySelector("."+s.ToggleButton),this._editPasswordButton.addEventListener("click",(function(){var t=!e.inEdition;e.setInEdition(t),t?e._inputPassword.focus():(ebx_form_setNodeMessage(e.prefixedPath,{}),e.setShowPasswords(!1))}))),this._inputPassword=this._container.querySelector("[name='"+this.fieldName+"']"),this._inputPassword.addEventListener("blur",(function(){e.checkConfirmPasswordValueOnBlurEvent()})),this._inputPasswordConfirm=this._container.querySelector("[name='"+this.fieldName+"_passwordConfirm']"),this._inputPasswordConfirm.addEventListener("blur",(function(){e.checkConfirmPasswordValueOnBlurEvent()})),this._inputPasswordChange=this._container.querySelector("[name='"+this.fieldName+"_passwordHasBeenEdited']"),this._confirmZone=this._container.querySelector("."+s.ConfirmZone),this._showPasswords=this._container.querySelector("."+s.ShowButton),this._showPasswords.addEventListener("click",(function(){e.inEdition&&e.setShowPasswords(!e.showingPassword)})),this._showPasswordsIcon=this._showPasswords.querySelector("i"),this._buttons=this._container.querySelector("."+s.PasswordButtons)},e.prototype.refreshEditMode=function(){this.inEdition||(this.newPasswordBackup=this._inputPassword.value,this.newConfirmPasswordBackup=this._inputPasswordConfirm.value,this.wasShowingPassword=this.showingPassword),this._inputPassword.disabled=!this.inEdition,this._inputPasswordChange.value=this.inEdition?"changed":null,this.inEdition?(this.alwaysInEdition||(this._editPasswordButton.classList.remove(EBX_UIButtonIcon.EDIT),this._editPasswordButton.classList.add(EBX_UIButtonIcon.REVERT),this._editPasswordButton.title=EBX_LocalizedMessage.password_revert),this._container.classList.add(s.InEdition),this._inputPassword.classList.remove(s.PasswordDisabled),this._inputPassword.disabled=!1,this._inputPassword.value=this.newPasswordBackup,this._inputPasswordConfirm.value=this.newConfirmPasswordBackup,this.setShowPasswords(this.wasShowingPassword),this.fireCallbackToChangeConfirmZoneOverflow(!0)):(this.alwaysInEdition||(this._editPasswordButton.classList.add(EBX_UIButtonIcon.EDIT),this._editPasswordButton.classList.remove(EBX_UIButtonIcon.REVERT),this._editPasswordButton.title=EBX_LocalizedMessage.password_set_new),this._container.classList.remove(s.InEdition),this._inputPassword.classList.add(s.PasswordDisabled),this._inputPassword.disabled=!0,this._inputPassword.value="********",this._inputPasswordConfirm.value="",this.fireCallbackToChangeConfirmZoneOverflow(!1))},e.prototype.setShowPasswords=function(e){this.showingPassword=e,this.refreshShowPasswords()},e.prototype.refreshShowPasswords=function(){this._inputPassword.type=this.showingPassword?"text":"password",this._inputPasswordConfirm.type=this.showingPassword?"text":"password",this.showingPassword?(this._showPasswordsIcon.classList.remove("fa-eye"),this._showPasswordsIcon.classList.add("fa-eye-slash"),this._showPasswords.classList.add(EBX_UICSSCatalog.BUTTON_BUTTON_PUSHED)):(this._showPasswordsIcon.classList.add("fa-eye"),this._showPasswordsIcon.classList.remove("fa-eye-slash"),this._showPasswords.classList.remove(EBX_UICSSCatalog.BUTTON_BUTTON_PUSHED))},e.prototype.checkConfirmPasswordValueOnBlurEvent=function(){var e=this;this.checkPasswordTimeout&&window.clearTimeout(this.checkPasswordTimeout),this.checkPasswordTimeout=window.setTimeout((function(){if(e.inEdition){e.checkPasswordTimeout=null;var t=document.activeElement;if(t!==e._inputPassword&&t!==e._inputPasswordConfirm)e.passwordEqualsItsConfirmation()?ebx_form_setNodeMessage(e.prefixedPath,{}):ebx_form_setNodeMessage(e.prefixedPath,{errors:[EBX_LocalizedMessage.password_match]})}}))},e.prototype.passwordEqualsItsConfirmation=function(){return!this.inEdition||this._inputPassword.value===this._inputPasswordConfirm.value},e.prototype.fireCallbackToChangeConfirmZoneOverflow=function(e){var t=this;this.changeConfirmZoneOverflowCallback&&window.clearTimeout(this.changeConfirmZoneOverflowCallback),e?this.changeConfirmZoneOverflowCallback=window.setTimeout((function(){t._confirmZone.style.overflow="visible",t.changeConfirmZoneOverflowCallback=null}),350):this._confirmZone.style.overflow="hidden"},e}();t.EBX_PasswordEdit=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(45),s=i(46),r=function(){function e(e,t,i,r,o){var l=this;if(this.grammarSpec=t,this.widgetPrefixedPath=i,this.isReadOnly=o,this.configureEditor=function(){l.editor.setReadOnly(l.isReadOnly),l.editorElement.classList.contains("_ebx-script-editor_widget-is-focused-init")&&(l.editor.focus(),l.editor.gotoLine(0)),l.editor.setTheme("ace/theme/textmate"),l.editor.setShowPrintMargin(!1),l.editor.setOptions({fontFamily:"ebx_font_mono, monospace"}),l.editor.getSession().on("change",(function(){ebx_form_setValue(l.widgetPrefixedPath,l.editor.getSession().getValue())})),l.editor.session.setMode(l.grammarSpec.modeName),ace.require("ace/ext/language_tools").setCompleters([new s.EditorCompletionHook(l.grammarSpec)]),l.editor.setOptions({enableBasicAutocompletion:!0,enableLiveAutocompletion:!0})},this.editorElement=document.getElementById(e),null==this.editorElement)throw new Error("Missing root div.");this.editor=ace.edit(this.editorElement),this.configureEditor(),n.AutoFillRemainingWorkspace.makeElementAutoFillWorkspaceWidth(this.editorElement.parentElement,(function(){l.editor.resize()})),r?n.AutoFillRemainingWorkspace.makeElementAutoFillWorkspaceHeight(this.editorElement.parentElement):this.makeParentResizable()}return e.prototype.makeParentResizable=function(){var e=this,t=this.editorElement.parentElement,i=this.editorElement.parentElement.offsetHeight,n=new YAHOO.util.Resize(this.editorElement,{handles:["br"],proxy:!0,ghost:!0,setSize:!1,minHeight:i});n.getProxyEl().classList.add("ebx_BorderBlockColored","_ebx-script-editor_resize_proxy"),n.subscribe("endResize",(function(e){t.style.height=Math.max(e.height,i)+"px"}),null,this);var s=2;0!==YAHOO.env.ua.gecko&&s--,n.subscribe("startResize",(function(){var t=n.getProxyEl();t.style.top="0",t.style.left="0";var i=YAHOO.util.Dom.getRegion(e.editorElement).width-s;n.set("maxWidth",i),n.set("minWidth",i)})),n.subscribe("proxyResize",(function(e){n.getProxyEl().style.height=Math.max(e.height-s,i)+"px"}),null,!1)},e.prototype.setAnnotations=function(e){this.editor.getSession().setAnnotations(e)},e}();t.EBX_ScriptEditor=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(18),s=YAHOO.util.Dom,r=function(){function e(){}return e.makeElementAutoFillWorkspaceWidth=function(t,i){var n=e.isElementInTableFormRow(t);EBX_LayoutManager.resizeWorkspaceListeners.push((function(){var e=s.getClientRegion(),r=s.getRegion(t),o=e.right-r.left-EBX_Form.workspaceFormBodyPadding-EBX_LayoutManager.getWorkspaceContentMarginHorizontal();n&&(o-=EBX_Utils.FieldHorizontalPadding),t.style.width=o+"px",i&&i()}))},e.makeElementAutoFillWorkspaceHeight=function(t,i){var r=e.isElementInTableFormRow(t);EBX_LayoutManager.resizeWorkspaceListeners.push((function(){var e=s.getClientRegion(),o=s.getRegion(t),l=e.bottom-o.top-EBX_Form.getWorkspaceFormBottomBarHeight()-EBX_LayoutManager.getWorkspaceContentMarginBottom();r&&(l-=EBX_Utils.FieldVerticalPadding),n.EBX_ModelExtensionFrame.isInExtension()&&(l-=1),t.style.height=l+"px",i&&i()}))},e.isElementInTableFormRow=function(e){return null!=EBX_Utils.getFirstParentMatchingCSSClass(e,EBX_Form.InputClassName)},e}();t.AutoFillRemainingWorkspace=r},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e};Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){var t=this;this.grammarSpec=e,this.requester=new EBX_AJAXResponseHandler,this.getCompletions=function(e,i,s,r,o){var l=ace.require("ace/range").Range.fromPoints({column:0,row:0},s),a=e.session.getTextRange(l),d=a.length-r.length,u=n({},t.grammarSpec.completionAdditionalData,{script:e.getValue(),wordPosition:d,cursorPosition:a.length}),c=new URL(t.grammarSpec.completionUrl);Object.keys(u).forEach((function(e){return c.searchParams.append(e,u[e])})),t.requester.handleAjaxResponseSuccess=function(e){var t=e?JSON.parse(e):[];o(null,t.map((function(e){return{caption:e.word,value:e.word,score:1,meta:""}})))},t.requester.sendRequest(c.href)},this.requester.handleAjaxResponseFailed=function(){throw new Error("Failed to retrieve completion.")}};t.EditorCompletionHook=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,r){this.isDefaultTemplate=t,this.isOverwritten=i,this.prefixedPath=n,this.checkboxPrefixedPath=r;var o=document.getElementById(e);this.inheritedElement=o.querySelector(".ebx-search-selector-inherited-value"),this.overwrittenElement=o.querySelector(".ebx-search-selector-combo-box"),s.register(this)}return e.prototype.refreshDisplay=function(){this.isOverwritten?(this.overwrittenElement.classList.remove(e.COMBO_BOX_HIDDEN_CLASSNAME),this.inheritedElement.style.display="none"):(this.overwrittenElement.classList.add(e.COMBO_BOX_HIDDEN_CLASSNAME),this.inheritedElement.style.display="inline",this.isDefaultTemplate?this.inheritedElement.innerText=s.getDefaultStrategyForType():this.inheritedElement.innerText=s.getInheritedStrategy())},e.prototype.onClickSwitchToOverwritten=function(){this.isOverwritten=!0,ebx_form_setValue(this.checkboxPrefixedPath,["true"]),this.refreshDisplay(),this.onValueChange()},e.prototype.onClickSwitchToInherited=function(){this.isOverwritten=!1,ebx_form_setValue(this.checkboxPrefixedPath,[]),this.refreshDisplay(),this.onValueChange()},e.prototype.onValueChange=function(){if(this.isDefaultTemplate){var e=void 0,t=ebx_form_getValue(this.prefixedPath);e=this.isOverwritten&&t?t.label:s.getDefaultStrategyForType(),s.onChange(e)}},e.COMBO_BOX_HIDDEN_CLASSNAME="ebx-search-selector-combo-box-hidden",e}();t.SearchTemplatesWidget=n;var s=function(){function e(){}return e.register=function(t){e.widgets.push(t)},e.getInheritedStrategy=function(){return e.inheritedStrategy},e.getDefaultStrategyForType=function(){return e.defaultStrategyForType},e.onChange=function(t){e.inheritedStrategy=t,e.widgets.forEach((function(e){return e.refreshDisplay()}))},e.widgets=[],e}();t.DefaultTemplatesWidgetController=s},function(e,t,i){(function(t){var i;i=function(){"use strict";var e=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var i=-1;return e.some((function(e,n){return e[0]===t&&(i=n,!0)})),i}return function(){function t(){this.__entries__=[]}var i={size:{configurable:!0}};return i.size.get=function(){return this.__entries__.length},t.prototype.get=function(t){var i=e(this.__entries__,t),n=this.__entries__[i];return n&&n[1]},t.prototype.set=function(t,i){var n=e(this.__entries__,t);~n?this.__entries__[n][1]=i:this.__entries__.push([t,i])},t.prototype.delete=function(t){var i=this.__entries__,n=e(i,t);~n&&i.splice(n,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var i=0,n=this.__entries__;i<n.length;i+=1){var s=n[i];e.call(t,s[1],s[0])}},Object.defineProperties(t.prototype,i),t}()}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,n=void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),s="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(n):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},r=["top","right","bottom","left","width","height","size","weight"],o="undefined"!=typeof MutationObserver,l=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var i=!1,n=!1,r=0;function o(){i&&(i=!1,e()),n&&a()}function l(){s(o)}function a(){var e=Date.now();if(i){if(e-r<2)return;n=!0}else i=!0,n=!1,setTimeout(l,t);r=e}return a}(this.refresh.bind(this),20)};l.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},l.prototype.removeObserver=function(e){var t=this.observers_,i=t.indexOf(e);~i&&t.splice(i,1),!t.length&&this.connected_&&this.disconnect_()},l.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},l.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},l.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),o?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},l.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},l.prototype.onTransitionEnd_=function(e){var t=e.propertyName;void 0===t&&(t=""),r.some((function(e){return!!~t.indexOf(e)}))&&this.refresh()},l.getInstance=function(){return this.instance_||(this.instance_=new l),this.instance_},l.instance_=null;var a=function(e,t){for(var i=0,n=Object.keys(t);i<n.length;i+=1){var s=n[i];Object.defineProperty(e,s,{value:t[s],enumerable:!1,writable:!1,configurable:!0})}return e},d=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||n},u=f(0,0,0,0);function c(e){return parseFloat(e)||0}function h(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];return t.reduce((function(t,i){return t+c(e["border-"+i+"-width"])}),0)}function p(e){var t=e.clientWidth,i=e.clientHeight;if(!t&&!i)return u;var n=d(e).getComputedStyle(e),s=function(e){for(var t={},i=0,n=["top","right","bottom","left"];i<n.length;i+=1){var s=n[i],r=e["padding-"+s];t[s]=c(r)}return t}(n),r=s.left+s.right,o=s.top+s.bottom,l=c(n.width),a=c(n.height);if("border-box"===n.boxSizing&&(Math.round(l+r)!==t&&(l-=h(n,"left","right")+r),Math.round(a+o)!==i&&(a-=h(n,"top","bottom")+o)),!function(e){return e===d(e).document.documentElement}(e)){var p=Math.round(l+r)-t,m=Math.round(a+o)-i;1!==Math.abs(p)&&(l-=p),1!==Math.abs(m)&&(a-=m)}return f(s.left,s.top,l,a)}var m="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"==typeof e.getBBox};function g(e){return i?m(e)?function(e){var t=e.getBBox();return f(0,0,t.width,t.height)}(e):p(e):u}function f(e,t,i,n){return{x:e,y:t,width:i,height:n}}var b=function(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=f(0,0,0,0),this.target=e};b.prototype.isActive=function(){var e=g(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},b.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e};var E=function(e,t){var i,n,s,r,o,l,d,u=(n=(i=t).x,s=i.y,r=i.width,o=i.height,l="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,d=Object.create(l.prototype),a(d,{x:n,y:s,width:r,height:o,top:s,right:n+r,bottom:o+s,left:n}),d);a(this,{target:e,contentRect:u})},C=function(t,i,n){if(this.activeObservations_=[],this.observations_=new e,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=i,this.callbackCtx_=n};C.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},C.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},C.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},C.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},C.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new E(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},C.prototype.clearActive=function(){this.activeObservations_.splice(0)},C.prototype.hasActive=function(){return this.activeObservations_.length>0};var _="undefined"!=typeof WeakMap?new WeakMap:new e,S=function(e){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=l.getInstance(),i=new C(e,t,this);_.set(this,i)};return["observe","unobserve","disconnect"].forEach((function(e){S.prototype[e]=function(){return(t=_.get(this))[e].apply(t,arguments);var t}})),void 0!==n.ResizeObserver?n.ResizeObserver:S},e.exports=i()}).call(this,i(49))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i}])}));